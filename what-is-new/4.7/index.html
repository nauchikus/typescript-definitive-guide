<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="og:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="og:description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="nauchikus"/><meta name="twitter:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="twitter:description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="yandex-verification" content="d7555ce264b8a099"/><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><title>TDG-подробное руководство по языку TypeScript</title><meta name="description" content="Обзор нововведений и изменений для версии 4.7"/><meta name="og:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="og:description" content="Обзор нововведений и изменений для версии 4.7"/><meta name="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="nauchikus"/><meta name="twitter:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="twitter:description" content="Обзор нововведений и изменений для версии 4.7"/><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/48b3a72d7930fb66ae91.css" as="style"/><link rel="stylesheet" href="/_next/static/css/48b3a72d7930fb66ae91.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-0e3c274fd8419109d37b.js" defer=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" defer=""></script><script src="/_next/static/chunks/main-7096870a72703e216a95.js" defer=""></script><script src="/_next/static/chunks/pages/_app-26db1d60995b9ed1b6bf.js" defer=""></script><script src="/_next/static/chunks/452-2343a28788c03f958a4e.js" defer=""></script><script src="/_next/static/chunks/950-86a83352b01b7466f89f.js" defer=""></script><script src="/_next/static/chunks/222-f79b6bb9bf6211af52b8.js" defer=""></script><script src="/_next/static/chunks/460-cf93e771b3da01004124.js" defer=""></script><script src="/_next/static/chunks/763-b007244d3307e1e9232d.js" defer=""></script><script src="/_next/static/chunks/211-d4969ecab0eef9742617.js" defer=""></script><script src="/_next/static/chunks/200-de381b6021e76daeafb5.js" defer=""></script><script src="/_next/static/chunks/292-b590b4910dc175cf5074.js" defer=""></script><script src="/_next/static/chunks/pages/what-is-new/%5Bversion%5D-298349b4e1d95ad1d6f1.js" defer=""></script><script src="/_next/static/lBJQfFCuVW1g-ePmkAwxd/_buildManifest.js" defer=""></script><script src="/_next/static/lBJQfFCuVW1g-ePmkAwxd/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="base-layout"><div></div><header class="app-header app-header-grid"><div class="app-header-grid-item__driver-toggle"><button class="app-driver-toggle-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"></path></svg></button></div><div class="app-header-grid-item__logo"><span role="img" tabindex="-1" class="anticon app-logo"><svg id="logo_app_svg__Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 118.08 43.32" width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><defs><style>.logo_app_svg__cls-2{fill:#1d1d1b}</style></defs><path d="M38.56 3.3v8H26v33.6h-9.34V11.28H4.12v-8z" transform="translate(-4.12 -2.34)" fill="#3273b9"></path><path class="logo_app_svg__cls-2" d="M81 24.06a24.31 24.31 0 01-1.68 9.42 17.45 17.45 0 01-4.77 6.66 20.38 20.38 0 01-7.52 4 35 35 0 01-10 1.32q-2.53 0-5.88-.21a48 48 0 01-6.61-.87V3.84A55.14 55.14 0 0151.3 3c2.34-.14 4.36-.21 6-.21A36.41 36.41 0 0167 4a19.87 19.87 0 017.5 3.8 16.88 16.88 0 014.79 6.6A25 25 0 0181 24.06zm-27 13.2q.64.06 1.53.09h2.06q7 0 10.41-3.54t3.39-9.78q0-6.54-3.23-9.9T57.81 10.8h-2a18.29 18.29 0 00-1.91.15zM109.05 10.5q-6.54 0-9.45 3.63t-2.91 9.93a19.58 19.58 0 00.73 5.55 12 12 0 002.15 4.29 9.73 9.73 0 003.6 2.79 12 12 0 005 1q1.56 0 2.67-.06a12.66 12.66 0 002-.24V22.92h9.36V43.5a35.26 35.26 0 01-5.4 1.41 47.42 47.42 0 01-9.18.75 23.76 23.76 0 01-8.48-1.44A17.79 17.79 0 0192.61 40a18.75 18.75 0 01-4.17-6.78A26.63 26.63 0 0187 24.06a24.58 24.58 0 011.62-9.24A19.9 19.9 0 0193 8a18.67 18.67 0 016.64-4.23 22.75 22.75 0 018.12-1.44 32.88 32.88 0 015.31.39 33.5 33.5 0 014.08.9 18.93 18.93 0 012.82 1q1.11.54 1.59.84l-2.7 7.5a24.4 24.4 0 00-4.41-1.77 18.76 18.76 0 00-5.4-.69z" transform="translate(-4.12 -2.34)"></path></svg></span></div><div class="app-header-grid-item__search"><form class="search" autoComplete="off" action="#"><button class="search__submit-button-placeholder button-with-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon search__search-svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></button><input type="search" class="search__query-input" id="algolia-search" name="app-search-query" placeholder="search..." required=""/></form></div><div class="app-header-grid-item__secondary-bar"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://t.me/nauchikus" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://github.com/nauchikus/typescript-definitive-guide" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="app-header-grid-item__primary-bar"><div class="dropdown app-nav__dropdown"><button class="dropdown__toggle app-nav__dropdown-toggle_adaptive"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></button><div class="dropdown__menu app-nav__dropdown-menu_adaptive"><div class="flat-panel"><div class="app-nav__link-bar app-nav__link-bar_adaptive"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://t.me/nauchikus" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://github.com/nauchikus/typescript-definitive-guide" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="divide-full_x app-nav__divide_adaptive"></div><div class="app-nav__nav"><nav class="app-nav"><ul class="menu app-nav__menu_adaptive"><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/">Главная</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/book/chapters/">Оглавление</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/what-is-new/">Что нового?</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/pdf/">Скачать Pdf</a></li></ul></nav></div></div></div></div></div></header><div class="layer slide-layer" toggle="false"><div class="slide-layer__driver"><div class="slide-layer__fixed-driver"><div class="driver"><div class="layer driver-content-nav"><ul class="ant-menu ant-menu-root ant-menu-inline ant-menu-light driver-content-nav__menu" role="menu" tabindex="0" data-menu-list="true"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">Содержание</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#Modifikatory_variantnosti_parametrov_tipa_in_i_out">Модификаторы вариантности параметров типа in и out</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#Analiz_potoka_upravleniya_dlya_vychislyaemyh_svoistv">Анализ потока управления для вычисляемых свойств</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#Uluchshenie_vyvoda_funkcii">Улучшение вывода функций</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#Konkretizaciya_ssylki_na_funkciu">Конкретизация ссылки на функцию</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#Ogranichenie_infer_s_pomoshchu_extends">Ограничение infer с помощью extends</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#typeof_dlya_#privatnyh_chlenov">typeof для #приватных членов</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#Nastroika_razresheniya_poiska_modulei_s_pomoshchu_moduleSuffixes">Настройка разрешения поиска модулей с помощью moduleSuffixes</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#Razreshenie_importa_i_eksporta_tolko_tipa_s_pomoshchu_resolution-mode">Разрешение импорта и экспорта только типа с помощью resolution-mode</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#Podderjka_ECMAScript_modulei_v_Node.js">Поддержка ECMAScript модулей в Node.js</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#[KRITIChESKOE_IZMENENIE]_Parametry_tipa_bolshe_ne_sovmestimy_s_{}_v_strictNullChecks">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Параметры типа больше не совместимы с {} в strictNullChecks</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#[KRITIChESKOE_IZMENENIE]_Metod_readFile_klassa_LanguageServiceHost_teper_obyazatelnyi">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Метод readFile  класса LanguageServiceHost теперь обязательный</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.7#[KRITIChESKOE_IZMENENIE]_Svoistvo_length_u_korteja_teper_readonly">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Свойство length у кортежа теперь readonly</a></span></li></ul></li></ul><div style="display:none" aria-hidden="true"></div></div></div></div></div><div class="slide-layer__first-empty"></div><div class="slide-layer__content"><div class="content-box"><div class="content-box__page-nav content-box__page-nav_left"><div class="page-nav__bar page-nav__bar_left"><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn"><span role="img" aria-label="left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></span></button></div></div><main id="content" class="content-box__html"><section id="4.7@beta" class="content__section innovation-presenter"><div class="innovation-presenter__info-bar"><div class="innovation-presenter__info-bar__section innovation-presenter__info-bar__section_left"><span class="innovation-presenter__info-bar__section__label">Статус</span><span class="innovation-presenter__info-bar__label_version">beta</span></div><div class="innovation-presenter__info-bar__section innovation-presenter__info-bar__section_right"><span class="innovation-presenter__info-bar__section__label">Дата публикации</span><time class="innovation-presenter__info-bar__label_last-update" dateTime="April 8, 2022">April 8, 2022</time></div></div><h1 class="innovation-presenter__title">4.7</h1><div class="innovation-presenter__share-bar"><button aria-label="vk" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#45668e"></circle><path d="M44.94,44.84h-0.2c-2.17-.36-3.66-1.92-4.92-3.37C39.1,40.66,38,38.81,36.7,39c-1.85.3-.93,3.52-1.71,4.9-0.62,1.11-3.29.91-5.12,0.71-5.79-.62-8.75-3.77-11.35-7.14A64.13,64.13,0,0,1,11.6,26a10.59,10.59,0,0,1-1.51-4.49C11,20.7,12.56,21,14.11,21c1.31,0,3.36-.29,4.32.2C19,21.46,19.57,23,20,24a37.18,37.18,0,0,0,3.31,5.82c0.56,0.81,1.41,2.35,2.41,2.14s1.06-2.63,1.1-4.18c0-1.77,0-4-.5-4.9S25,22,24.15,21.47c0.73-1.49,2.72-1.63,5.12-1.63,2,0,4.84-.23,5.62,1.12s0.25,3.85.2,5.71c-0.06,2.09-.41,4.25,1,5.21,1.09-.12,1.68-1.2,2.31-2A28,28,0,0,0,41.72,24c0.44-1,.91-2.65,1.71-3,1.21-.47,3.15-0.1,4.92-0.1,1.46,0,4.05-.41,4.52.61,0.39,0.85-.75,3-1.1,3.57a61.88,61.88,0,0,1-4.12,5.61c-0.58.78-1.78,2-1.71,3.27,0.05,0.94,1,1.67,1.71,2.35a33.12,33.12,0,0,1,3.92,4.18c0.47,0.62,1.5,2,1.4,2.76C52.66,45.81,46.88,44.24,44.94,44.84Z" fill="white"></path></svg></button><button aria-label="facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg></button><button aria-label="twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="telegram" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#37aee2"></circle><path d="m45.90873,15.44335c-0.6901,-0.0281 -1.37668,0.14048 -1.96142,0.41265c-0.84989,0.32661 -8.63939,3.33986 -16.5237,6.39174c-3.9685,1.53296 -7.93349,3.06593 -10.98537,4.24067c-3.05012,1.1765 -5.34694,2.05098 -5.4681,2.09312c-0.80775,0.28096 -1.89996,0.63566 -2.82712,1.72788c-0.23354,0.27218 -0.46884,0.62161 -0.58825,1.10275c-0.11941,0.48114 -0.06673,1.09222 0.16682,1.5716c0.46533,0.96052 1.25376,1.35737 2.18443,1.71383c3.09051,0.99037 6.28638,1.93508 8.93263,2.8236c0.97632,3.44171 1.91401,6.89571 2.84116,10.34268c0.30554,0.69185 0.97105,0.94823 1.65764,0.95525l-0.00351,0.03512c0,0 0.53908,0.05268 1.06412,-0.07375c0.52679,-0.12292 1.18879,-0.42846 1.79109,-0.99212c0.662,-0.62161 2.45836,-2.38812 3.47683,-3.38552l7.6736,5.66477l0.06146,0.03512c0,0 0.84989,0.59703 2.09312,0.68132c0.62161,0.04214 1.4399,-0.07726 2.14229,-0.59176c0.70766,-0.51626 1.1765,-1.34683 1.396,-2.29506c0.65673,-2.86224 5.00979,-23.57745 5.75257,-27.00686l-0.02107,0.08077c0.51977,-1.93157 0.32837,-3.70159 -0.87096,-4.74991c-0.60054,-0.52152 -1.2924,-0.7498 -1.98425,-0.77965l0,0.00176zm-0.2072,3.29069c0.04741,0.0439 0.0439,0.0439 0.00351,0.04741c-0.01229,-0.00351 0.14048,0.2072 -0.15804,1.32576l-0.01229,0.04214l-0.00878,0.03863c-0.75858,3.50668 -5.15554,24.40802 -5.74203,26.96472c-0.08077,0.34417 -0.11414,0.31959 -0.09482,0.29852c-0.1756,-0.02634 -0.50045,-0.16506 -0.52679,-0.1756l-13.13468,-9.70175c4.4988,-4.33199 9.09945,-8.25307 13.744,-12.43229c0.8218,-0.41265 0.68483,-1.68573 -0.29852,-1.70681c-1.04305,0.24584 -1.92279,0.99564 -2.8798,1.47502c-5.49971,3.2626 -11.11882,6.13186 -16.55882,9.49279c-2.792,-0.97105 -5.57873,-1.77704 -8.15298,-2.57601c2.2336,-0.89555 4.00889,-1.55579 5.75608,-2.23009c3.05188,-1.1765 7.01687,-2.7042 10.98537,-4.24067c7.94051,-3.06944 15.92667,-6.16346 16.62028,-6.43037l0.05619,-0.02283l0.05268,-0.02283c0.19316,-0.0878 0.30378,-0.09658 0.35471,-0.10009c0,0 -0.01756,-0.05795 -0.00351,-0.04566l-0.00176,0zm-20.91715,22.0638l2.16687,1.60145c-0.93418,0.91311 -1.81743,1.77353 -2.45485,2.38812l0.28798,-3.98957" fill="white"></path></svg></button></div></section><section id="Modifikatory_variantnosti_parametrov_tipa_in_i_out" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">Модификаторы вариантности параметров типа in и out</h2>
<p>Идентификация данных осуществляется при помощи типов и предназначена для предотвращения попадания в операции неподходящих для них значений. Каждая операция имеет свое низкоуровневое описание содержащее, в том числе и тип, к которому должно принадлежать пригодное для неё значение. Сверка типа значения с этим типом называется процессом выявления совместимости. Совместимость осуществляется по правилам вариантности, которые бывают четырех видов. Но прежде, чем рассмотреть каждый из них, ненадолго отвлечемся на <em>TypeScript</em>.
Поскольку <em>TypeScript</em> реализует <em>структурную типизацию</em>, тип проще всего представить в виде обычного листка бумаги, который может содержать имена (идентификаторы) ассоциированные с какими-либо другими типами. Идентификатор + ассоциированный с ним тип = признак типа. Именно на основе этих признаков и осуществляется процесс выявления совместимости речь о которой пойдет сразу после того освещения ещё одной очень простой темы - иерархии наследования.
Представляя иерархию наследования в голове сразу вырисовывается картина из мира номинативной типизации, что неосознанно выбивает из колеи структурной. Поэтому сразу стоит сосредоточиться на интересующей нас детали - логическом обозначении иерархических отношений. Дело в том, что иерархия направлена сверху вниз, а значит более базовый тип расположен выше, чем его подтип. Таким образом, в логических выражениях представляющих иерархию базовые типы обозначаются, как большие (<code class="content__code_inline">&gt;</code>) по отношению к своим подтипам. И наоборот. То есть, <code class="content__code_inline">SuperType &gt; SubType</code> и <code class="content__code_inline">SubType &lt; SuperType</code>. Но упомяну ещё раз, в структурной типизации нет понятия иерархия наследования, поскольку при сравнении берутся в расчет признаки типов, а не ссылки (<code class="content__code_inline">ref</code>). Но чтобы не забивать особо голову просто возьмем за правило, что тип, который обладает всеми признаками другого типа и кроме этого содержит дополнительные, будет считаться подтипом, а значит, в логических выражениях будет обозначаться меньшим (<code class="content__code_inline">&lt;</code>).</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    f0</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">B</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    f0</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">;</span><span>
</span><span>    f1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#DD4A68">С</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    f0</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">;</span><span>
</span><span>    f1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// A &gt; B или B &lt; A</span><span>
</span><span></span><span class="token" style="color:slategray">// A &gt; C или C &lt; A</span><span>
</span><span></span><span class="token" style="color:slategray">// B = C или C = B</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Это очень просто и это знают все, но повторить все равно стоило, так как именно логические выражения нам помогут разобраться в количестве видов вариантов совместимости. Теперь, на основе полученной информации давайте рассмотрим варианты по которым может происходить проверка на совместимость.</p>
<p>И так, вариантов всего четыре и каждый из них имеет собственное название. Но чтобы было более понятно рассмотрим сценарий, когда переменной принадлежащей к типу <code class="content__code_inline">A</code> может быть присвоено значение с типом <code class="content__code_inline">B</code>.</p>
<p><code class="content__code_inline">Ковариантность</code> предполагает, что проверка на совместимость завершится успехом в случаи, когда <code class="content__code_inline">B &lt; A</code> или <code class="content__code_inline">B = A</code> (в номинативной типизации <code class="content__code_inline">B</code> подтип <code class="content__code_inline">A</code> ). <code class="content__code_inline">Контрвариантность</code> предполагает, что <code class="content__code_inline">B &gt; A</code> или <code class="content__code_inline">B = A</code> (в номинативной бы это звучало, как базовый тип можно совместим с подтипом или самим собой, но не наоборот). <code class="content__code_inline">Инвариантность</code>, это когда совместимы исключительно при условии <code class="content__code_inline">B = A</code>. <code class="content__code_inline">Бивариантность</code> подразумевает <code class="content__code_inline">B &lt; A</code>, <code class="content__code_inline">B &gt; A</code> или <code class="content__code_inline">B = A</code>, то есть - все предыдущие варианты в одном.</p>
<p>А теперь к сути дела. В <em>TypeScript</em> все типы проверяются на совместимость по ковариантным правилам, за исключением параметров функций, которые контрвариантны. Поскольку различные правила на сложных рекурсивных типах требуют дорогостоящие вычисления, <em>TypeScript</em> реализует механизм явного аннотирования параметров типа при с помощью необязательных модификаторов <code class="content__code_inline">in</code> и <code class="content__code_inline">out</code>.</p>
<p><code class="content__code_inline">in</code> указывает, что параметр типа ковариантен, а <code class="content__code_inline">out</code> контрвариантен. Но стоит сделать акцент на том, что с помощью этих модификаторов невозможно изменить правила по которым <em>TypeScript</em> производит вычисления совместимости, а можно лишь их конкретизировать.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Setter</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Getter</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Стандартный код.
</span><span class="token doc-comment" style="color:slategray"> * При сравнении двух сеттеров параметры в сигнатуре будут проверятся по контрвариантным правилам, а для геттеров возвращаемые типы по ковариантным.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Setter</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">in</span><span class="token" style="color:#DD4A68"> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Getter</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#DD4A68">out </span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [Код с модификаторами]
</span><span class="token doc-comment" style="color:slategray"> * Правила будут идентичны предыдущему примеру. Разница лишь в явной конкретизации.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Setter</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#DD4A68">out </span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// [0]</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Getter</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">in</span><span class="token" style="color:#DD4A68"> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// [1]</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [Код с модификаторами]
</span><span class="token doc-comment" style="color:slategray"> * К тому же, нельзя изменить поведение, то есть - нельзя поменять модификаторы местами!
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0]
</span><span class="token doc-comment" style="color:slategray"> * Type &#x27;Setter&lt;sub-T&gt;&#x27; is not assignable to type &#x27;Setter&lt;super-T&gt;&#x27; as implied by variance annotation.
</span><span class="token doc-comment" style="color:slategray"> *  Types of parameters &#x27;param&#x27; and &#x27;param&#x27; are incompatible.
</span><span class="token doc-comment" style="color:slategray"> *   Type &#x27;super-T&#x27; is not assignable to type &#x27;sub-T&#x27;.ts(2636)
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [1]
</span><span class="token doc-comment" style="color:slategray"> * Type &#x27;Getter&lt;super-T&gt;&#x27; is not assignable to type &#x27;Getter&lt;sub-T&gt;&#x27; as implied by variance annotation.
</span><span class="token doc-comment" style="color:slategray"> *  Type &#x27;super-T&#x27; is not assignable to type &#x27;sub-T&#x27;.ts(2636)
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Проще всего воспринимать эти модификаторы, как указание на то, что тип будет использоваться во входных параметрах (<code class="content__code_inline">&lt;in T&gt;</code>) или выходных (<code class="content__code_inline">&lt;out T&gt;</code>) или и то и другое одновременно <code class="content__code_inline">&lt;in out T&gt;</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Указание на то, что тип используется во входных и в выходных параметрах. 
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Func</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">in</span><span class="token" style="color:#DD4A68"> out </span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Analiz_potoka_upravleniya_dlya_vychislyaemyh_svoistv" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">Анализ потока управления для вычисляемых свойств</h2>
<p>Предыдущие версии <em>TypeScript</em> прекрасно справлялись с анализом вычисляемых членов объектов идентификаторы которых определялись непосредственно в квадратных скобках <code class="content__code_inline">{[id]: type}</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">let</span><span> o </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">[</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">hundred</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Math</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">round</span><span class="token" style="color:#999">(</span><span class="token known-class-name" style="color:#DD4A68">Math</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">random</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span> </span><span class="token" style="color:#905">100</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;100&quot;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">typeof</span><span> o</span><span class="token" style="color:#999">[</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">hundred</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&quot;string&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    o</span><span class="token" style="color:#999">[</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">hundred</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toUpperCase</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">else</span><span class="token" style="color:#999">{</span><span>
</span><span>    o</span><span class="token" style="color:#999">[</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">hundred</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toFixed</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Но это не работало при внешнем определении идентификатора.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">const</span><span> key </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">hundred</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">let</span><span> o </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Math</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">round</span><span class="token" style="color:#999">(</span><span class="token known-class-name" style="color:#DD4A68">Math</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">random</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span> </span><span class="token" style="color:#905">100</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;100&quot;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">typeof</span><span> o</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&quot;string&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    o</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toUpperCase</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error -&gt; Property &#x27;toUpperCase&#x27; does not exist on type &#x27;string | number&#x27;.</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">else</span><span class="token" style="color:#999">{</span><span>
</span><span>    o</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toFixed</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error -&gt; Property &#x27;toFixed&#x27; does not exist on type &#x27;string | number&#x27;.</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Начиная с текущей версии алгоритм анализа был доработан.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">const</span><span> key </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">hundred</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">let</span><span> o </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Math</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">round</span><span class="token" style="color:#999">(</span><span class="token known-class-name" style="color:#DD4A68">Math</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">random</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span> </span><span class="token" style="color:#905">100</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;100&quot;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">typeof</span><span> o</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&quot;string&quot;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    o</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toUpperCase</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">else</span><span class="token" style="color:#999">{</span><span>
</span><span>    o</span><span class="token" style="color:#999">[</span><span>key</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toFixed</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Кроме этого, новые правила сделали возможным выявление забытых инициализаций для вычисляемых членов.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [*]
</span><span class="token doc-comment" style="color:slategray"> * До v4.7 (Ok) на этапе компиляции, но (Error) во время выполнения
</span><span class="token doc-comment" style="color:slategray"> * Начиная с v4.7 (Error) -&gt; Property &#x27;[&quot;field&quot;]&#x27; has no initializer and is not definitely assigned in the constructor.ts(2564)
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;field&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// [*]</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:slategray">// Забыли инициализировать индексное поле name</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Uluchshenie_vyvoda_funkcii" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">Улучшение вывода функций</h2>
<p>В текущей версии были внесены значительные доработки вывода функциональных типов внутри объектов и массивов.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">a</span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">b</span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">declare</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token generic-function" style="color:#DD4A68">f</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic" style="color:#905">T</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span>param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> </span><span class="token function-variable" style="color:#DD4A68">a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">,</span><span> </span><span class="token function-variable" style="color:#DD4A68">b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> x </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> x</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toFixed</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> </span><span class="token function-variable" style="color:#DD4A68">a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> n </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> n</span><span class="token" style="color:#999">,</span><span> </span><span class="token function-variable" style="color:#DD4A68">b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span>x</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> x</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toFixed</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> </span><span class="token function-variable" style="color:#DD4A68">a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> n </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> n</span><span class="token" style="color:#999">,</span><span> </span><span class="token function-variable" style="color:#DD4A68">b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> x </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> x</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toFixed</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>  </span><span class="token" style="color:slategray">// Было Error, стало Ok</span><span>
</span><span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> </span><span class="token function-variable" style="color:#DD4A68">a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">function</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#905">100</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token function-variable" style="color:#DD4A68">b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> x </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> x</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toFixed</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>  </span><span class="token" style="color:slategray">// Было Error, стало Ok</span><span>
</span><span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> </span><span class="token function-variable" style="color:#DD4A68">a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">function</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#905">100</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token function-variable" style="color:#DD4A68">b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> x </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> x</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toFixed</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>  </span><span class="token" style="color:slategray">// Было Error, стало Ok</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Konkretizaciya_ssylki_na_funkciu" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">Конкретизация ссылки на функцию</h2>
<p>Существуют ситуации при которых обычные конструкции могут быть более общими, чем это требуется.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Box</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    value</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// функция, которая порождает коробки с любым содержимым</span><span>
</span><span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token generic-function" style="color:#DD4A68">createBox</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic" style="color:#905">T</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span>value</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Box</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span>value</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>До текущей версии конкретизация типа могла бы быть осуществлена с помощью излишнего кода в виде обертки..</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Food</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// более конкретная функция, которая порождает исключительно коробки с Food</span><span>
</span><span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">createFoodBox</span><span class="token" style="color:#999">(</span><span>value</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Food</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#DD4A68">createBox</span><span class="token" style="color:#999">(</span><span>value</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>..или же при помощи псевдонима типа.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FoodBox</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>value</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Food</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token maybe-class-name">Box</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Food</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// ссылка на более общую функцию createBox, но конкретизированная псевдонимом типа</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> createFoodBox</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FoodBox</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> createBox</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Первый вариант немного излишен, а второй слишком громоздкий. Поэтому для разрешения подобных сценариев был добавлен механизм конкретизации непосредственно самой ссылки на порождающий объект.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span></span><span class="token" style="color:slategray">// сохранение ссылки и конкретизация типа одновременно</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> createFoodBox </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> createBox</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Food</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Этот же механизм распространяется на функции-конструкторы..</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Box</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">readonly</span><span> value</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">NumberBox</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Box</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#690">number</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">let</span><span> a </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">NumberBox</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">5</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#07a">let</span><span> b </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">NumberBox</span><span class="token" style="color:#999">(</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">5</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error -&gt; Argument of type &#x27;string&#x27; is not assignable to parameter of type &#x27;number&#x27;.ts(2345)</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>.. в том числе и <code class="content__code_inline">Array</code>, <code class="content__code_inline">Map</code> и <code class="content__code_inline">Set</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">NumberMap</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Map</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">let</span><span> numberMap </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">NumberMap</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Ogranichenie_infer_s_pomoshchu_extends" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">Ограничение infer с помощью extends</h2>
<p>Условные типы позволяют творить настоящие чудеса, но иногда бывают немного громоздки. Для примера представьте сценарий при котором необходимо получить тип первого элемента кортежа, но только тогда, когда этот тип совместим со <code class="content__code_inline">string</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FirstNumberItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>
</span><span>    </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#07a">infer</span><span> </span><span class="token" style="color:#905">S</span><span class="token" style="color:#999">,</span><span> </span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span class="token" style="color:#690">unknown</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">]</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span> </span><span class="token" style="color:#905">S</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token" style="color:#690">number</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span> </span><span class="token" style="color:#905">S</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">never</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">never</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// type A = number</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">FirstNumberItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// type B = 100</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">B</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">FirstNumberItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#999">[</span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// type C = 100 | 500</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">C</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">FirstNumberItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#999">[</span><span class="token" style="color:#905">100</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">500</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// type D = never</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">D</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">FirstNumberItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Несмотря на то, что данный код решает возложенную на него задачу, вложенные условные выражения затрудняют его читаемость. Именно этот факт и стал причиной создания нового механизма позволяющий ограничивать переменные типа <code class="content__code_inline">infer</code> конкретным типом при помощи ключевого слова <code class="content__code_inline">extends</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FirstNumberItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span>
</span><span>    </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#07a">infer</span><span> </span><span class="token" style="color:#905">S</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">,</span><span> </span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span class="token" style="color:#690">unknown</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span> </span><span class="token" style="color:#905">S</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">never</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * ..здесь располагается код аналогичный предыдущему.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="typeof_dlya_#privatnyh_chlenov" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">typeof для #приватных членов</h2>
<p>Начиная с текущей версии стало возможным выполнять запрос типа на приватных полях предусмотренных в <em>ECMAScript</em> спецификации.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Class</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    #field </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">method</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">typeof</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">#field</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">#field</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Nastroika_razresheniya_poiska_modulei_s_pomoshchu_moduleSuffixes" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">Настройка разрешения поиска модулей с помощью moduleSuffixes</h2>
<p>Теперь в <code class="content__code_inline">tsconfig.json</code> можно указать правила для разрешения модулей на основе расширений.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_json"><span class="content_code-label_lang">json</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-json" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#905">&quot;compilerOptions&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#905">&quot;moduleSuffixes&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;.ios&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;.native&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">&quot;&quot;</span><span class="token" style="color:#999">]</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_json"></div></div>
<p>При конфигурации выше, код ниже..</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">*</span><span class="token imports"> </span><span class="token imports module" style="color:#07a">as</span><span class="token imports"> x</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;./x&quot;</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>..будет разрешен таким образом, что сначала осуществится поиск <code class="content__code_inline">./x.ios</code>, затем <code class="content__code_inline">./x.native</code> и наконец <code class="content__code_inline">./x.ts</code>.
Стоит обратить внимает, что указание пустой строки в качестве элемента параметра <code class="content__code_inline">moduleSuffixes</code> требуется для указания поиска файлов с расширением <code class="content__code_inline">.ts</code> и это значение является значение по умолчанию.</p></section><section id="Razreshenie_importa_i_eksporta_tolko_tipa_s_pomoshchu_resolution-mode" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">Разрешение импорта и экспорта только типа с помощью resolution-mode</h2>
<p>Компилятор <em>TypeScript</em> умеет успешно разрешать сценарии при импортировании таких модулей, как <code class="content__code_inline">CommonJS</code> и <code class="content__code_inline">ECMAScript</code>. Для разрешения импорта только типа теперь существует отдельный механизм, который осуществляется путем указания после пути до модуля ключевого слова <code class="content__code_inline">assert</code> за которым в фигурных скобках определяется конфигурация позволяющая конкретизировать вид модулей.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// Для require()</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token maybe-class-name">TypeFromRequere</span><span> </span><span class="token" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;module-name&quot;</span><span> </span><span class="token" style="color:#07a">assert</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#690">&quot;resolution-mode&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;require&quot;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// Для import</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token maybe-class-name">TypeFromImport</span><span> </span><span class="token" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;module-name&quot;</span><span> </span><span class="token" style="color:#07a">assert</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#690">&quot;resolution-mode&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;import&quot;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">MergedType</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TypeFromRequere</span><span class="token" style="color:#999">,</span><span> </span><span class="token maybe-class-name">TypeFromImport</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Помимо этого, утверждения можно применить и к динамическому импорту..</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;module-name&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span> assert</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#690">&quot;resolution-mode&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;require&quot;</span><span> </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access maybe-class-name">TypeFromRequire</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;module-name&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span> assert</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#690">&quot;resolution-mode&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;import&quot;</span><span> </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">.</span><span class="token property-access maybe-class-name">TypeFromImport</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>..а также, к коментарной директиве.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">/// &lt;reference types=&quot;module-name&quot; resolution-mode=&quot;require&quot; /&gt;</span><span>
</span><span></span><span class="token" style="color:slategray">/// &lt;reference types=&quot;module-name&quot; resolution-mode=&quot;import&quot; /&gt;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Podderjka_ECMAScript_modulei_v_Node.js" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">Поддержка ECMAScript модулей в Node.js</h2>
<p>Начиная с текущей версии <em>TypeScript</em> реализует поддержку <em>ECMAScript</em> модулей в <em>Node.js</em>, который указывается с помощью новых значений <code class="content__code_inline">node12</code> и <code class="content__code_inline">nodenext</code> свойства компилятора <code class="content__code_inline">module</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_json"><span class="content_code-label_lang">json</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-json" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#905">&quot;compilerOptions&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#905">&quot;module&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;nodenext&quot;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_json"></div></div></section><section id="[KRITIChESKOE_IZMENENIE]_Parametry_tipa_bolshe_ne_sovmestimy_s_{}_v_strictNullChecks" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Параметры типа больше не совместимы с {} в strictNullChecks</h2>
<p>Изначально параметры типа рассматривались компилятором, как неявно принадлежащие к типу <code class="content__code_inline">{}</code>, который затем был заменен на <code class="content__code_inline">unknown</code>. В деактивированном режиме <code class="content__code_inline">strictNullChecks</code> эти два типа совместимы, но при активации совместимость пропадает. Это известный факт, но до текущей версии для обратной совместимости компилятор <em>TypeScript</em> пренебрегал им.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">function</span><span> </span><span class="token generic-function" style="color:#DD4A68">f</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic" style="color:#905">T</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span>x</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> x</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Начиная с текущей версии данный прореха в безопасности была закрыта.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">function</span><span> </span><span class="token generic-function" style="color:#DD4A68">f</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic" style="color:#905">T</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span>x</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> x</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error -&gt; Type &#x27;T&#x27; is not assignable to type &#x27;{}&#x27;.ts(2322)</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>`ts
</span>
</code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="[KRITIChESKOE_IZMENENIE]_Metod_readFile_klassa_LanguageServiceHost_teper_obyazatelnyi" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Метод readFile  класса LanguageServiceHost теперь обязательный</h2>
<p>Если вы создаете экземпляр класса <code class="content__code_inline">LanguageService</code>, то необходимые ему <code class="content__code_inline">LanguageServiceHosts</code> теперь обязаны реализовывать метод <code class="content__code_inline">readFile</code>.</p></section><section id="[KRITIChESKOE_IZMENENIE]_Svoistvo_length_u_korteja_teper_readonly" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/26/2022</span></div></div></aside><h2 class="content__heading">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Свойство length у кортежа теперь readonly</h2>
<p>Начиная с текущей версии свойство <code class="content__code_inline">length</code> у кортежей стало только для чтения <code class="content__code_inline">readonly</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span>tuple</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    tuple</span><span class="token" style="color:#999">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error -&gt; Type &#x27;0&#x27; is not assignable to type &#x27;3&#x27;.</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><aside class="content-box__page__content-bar_post"><nav class="post-content-bar__nav"><a href="4.6" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_prev"><div class="post-content-bar__nav__btn_padding-fix"><span role="img" aria-label="arrow-left" class="anticon anticon-arrow-left post-content-bar__nav__btn__icon_prev"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"></path></svg></span><span class="post-content-bar__nav__btn__label">4.6</span></div></a><a href="4.8" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_next"><div class="post-content-bar__nav__btn_padding-fix"><span class="post-content-bar__nav__btn__label">4.8</span><span role="img" aria-label="arrow-right" class="anticon anticon-arrow-right post-content-bar__nav__btn__icon_next"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"></path></svg></span></div></a></nav></aside></main><div class="content-box__page-nav content-box__page-nav_right"><div class="page-nav__bar page-nav__bar_right"><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="up" class="anticon anticon-up"><svg viewBox="64 64 896 896" focusable="false" data-icon="up" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"></path></svg></span></button></span><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn page-nav__btn_next-page"><span role="img" aria-label="right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></button><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></button></span></div></div></div></div><div class="slide-layer__last-empty"></div></div><footer class="app-footer"><div class="app-footer__empty"></div><div class="app-footer_contacts app-footer__section"></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"innovationPage":{"key":"4.7@beta_12","title":"4.7@beta","path":"4.7@beta","coverUrl":"https://github.com/nauchikus/typescript-definitive-guide/raw/master/what-is-new/4.7@beta/metadata/cover.png","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"},"sections":[{"key":"4.7@beta_8","title":"Модификаторы вариантности параметров типа in и out","tags":["Улучшение"],"markdown":"## Модификаторы вариантности параметров типа in и out\n\nИдентификация данных осуществляется при помощи типов и предназначена для предотвращения попадания в операции неподходящих для них значений. Каждая операция имеет свое низкоуровневое описание содержащее, в том числе и тип, к которому должно принадлежать пригодное для неё значение. Сверка типа значения с этим типом называется процессом выявления совместимости. Совместимость осуществляется по правилам вариантности, которые бывают четырех видов. Но прежде, чем рассмотреть каждый из них, ненадолго отвлечемся на _TypeScript_.\nПоскольку _TypeScript_ реализует _структурную типизацию_, тип проще всего представить в виде обычного листка бумаги, который может содержать имена (идентификаторы) ассоциированные с какими-либо другими типами. Идентификатор + ассоциированный с ним тип = признак типа. Именно на основе этих признаков и осуществляется процесс выявления совместимости речь о которой пойдет сразу после того освещения ещё одной очень простой темы - иерархии наследования.\nПредставляя иерархию наследования в голове сразу вырисовывается картина из мира номинативной типизации, что неосознанно выбивает из колеи структурной. Поэтому сразу стоит сосредоточиться на интересующей нас детали - логическом обозначении иерархических отношений. Дело в том, что иерархия направлена сверху вниз, а значит более базовый тип расположен выше, чем его подтип. Таким образом, в логических выражениях представляющих иерархию базовые типы обозначаются, как большие (`\u003e`) по отношению к своим подтипам. И наоборот. То есть, `SuperType \u003e SubType` и `SubType \u003c SuperType`. Но упомяну ещё раз, в структурной типизации нет понятия иерархия наследования, поскольку при сравнении берутся в расчет признаки типов, а не ссылки (`ref`). Но чтобы не забивать особо голову просто возьмем за правило, что тип, который обладает всеми признаками другого типа и кроме этого содержит дополнительные, будет считаться подтипом, а значит, в логических выражениях будет обозначаться меньшим (`\u003c`).\n\n`````ts\ninterface A {\n    f0: boolean;\n}\ninterface B {\n    f0: boolean;\n    f1: number;\n}\ninterface С {\n    f0: boolean;\n    f1: number;\n}\n\n// A \u003e B или B \u003c A\n// A \u003e C или C \u003c A\n// B = C или C = B\n`````\n\nЭто очень просто и это знают все, но повторить все равно стоило, так как именно логические выражения нам помогут разобраться в количестве видов вариантов совместимости. Теперь, на основе полученной информации давайте рассмотрим варианты по которым может происходить проверка на совместимость.\n\nИ так, вариантов всего четыре и каждый из них имеет собственное название. Но чтобы было более понятно рассмотрим сценарий, когда переменной принадлежащей к типу `A` может быть присвоено значение с типом `B`.\n\n`Ковариантность` предполагает, что проверка на совместимость завершится успехом в случаи, когда `B \u003c A` или `B = A` (в номинативной типизации `B` подтип `A` ). `Контрвариантность` предполагает, что `B \u003e A` или `B = A` (в номинативной бы это звучало, как базовый тип можно совместим с подтипом или самим собой, но не наоборот). `Инвариантность`, это когда совместимы исключительно при условии `B = A`. `Бивариантность` подразумевает `B \u003c A`, `B \u003e A` или `B = A`, то есть - все предыдущие варианты в одном.\n\nА теперь к сути дела. В _TypeScript_ все типы проверяются на совместимость по ковариантным правилам, за исключением параметров функций, которые контрвариантны. Поскольку различные правила на сложных рекурсивных типах требуют дорогостоящие вычисления, _TypeScript_ реализует механизм явного аннотирования параметров типа при с помощью необязательных модификаторов `in` и `out`.\n\n`in` указывает, что параметр типа ковариантен, а `out` контрвариантен. Но стоит сделать акцент на том, что с помощью этих модификаторов невозможно изменить правила по которым _TypeScript_ производит вычисления совместимости, а можно лишь их конкретизировать.\n\n`````ts\ntype Setter\u003cT\u003e = (param: T) =\u003e void;\ntype Getter\u003cT\u003e = () =\u003e T;\n\n/**\n * Стандартный код.\n * При сравнении двух сеттеров параметры в сигнатуре будут проверятся по контрвариантным правилам, а для геттеров возвращаемые типы по ковариантным.\n */\n`````\n`````ts\ntype Setter\u003cin T\u003e = (param: T) =\u003e void;\ntype Getter\u003cout T\u003e = () =\u003e T;\n\n/**\n * [Код с модификаторами]\n * Правила будут идентичны предыдущему примеру. Разница лишь в явной конкретизации.\n */\n`````\n`````ts\ntype Setter\u003cout T\u003e = (param: T) =\u003e void; // [0]\ntype Getter\u003cin T\u003e = () =\u003e T; // [1]\n\n/**\n * [Код с модификаторами]\n * К тому же, нельзя изменить поведение, то есть - нельзя поменять модификаторы местами!\n */\n\n/**\n * [0]\n * Type 'Setter\u003csub-T\u003e' is not assignable to type 'Setter\u003csuper-T\u003e' as implied by variance annotation.\n *  Types of parameters 'param' and 'param' are incompatible.\n *   Type 'super-T' is not assignable to type 'sub-T'.ts(2636)\n */\n\n/**\n * [1]\n * Type 'Getter\u003csuper-T\u003e' is not assignable to type 'Getter\u003csub-T\u003e' as implied by variance annotation.\n *  Type 'super-T' is not assignable to type 'sub-T'.ts(2636)\n */\n`````\n\nПроще всего воспринимать эти модификаторы, как указание на то, что тип будет использоваться во входных параметрах (`\u003cin T\u003e`) или выходных (`\u003cout T\u003e`) или и то и другое одновременно `\u003cin out T\u003e`.\n\n`````ts\n/**\n * Указание на то, что тип используется во входных и в выходных параметрах. \n */\ntype Func\u003cin out T\u003e = (param: T) =\u003e T;\n`````\n","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Modifikatory_variantnosti_parametrov_tipa_in_i_out","elementId":"Modifikatory_variantnosti_parametrov_tipa_in_i_out","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_0","title":"Анализ потока управления для вычисляемых свойств","tags":["Улучшение"],"markdown":"## Анализ потока управления для вычисляемых свойств\n\nПредыдущие версии _TypeScript_ прекрасно справлялись с анализом вычисляемых членов объектов идентификаторы которых определялись непосредственно в квадратных скобках `{[id]: type}`.\n\n`````ts\nlet o = {\n    [`hundred`]: Math.round(Math.random()) ? 100 : \"100\"\n};\n\nif (typeof o[`hundred`] === \"string\") {\n    o[`hundred`].toUpperCase(); // Ok\n}else{\n    o[`hundred`].toFixed(); // Ok\n}\n`````\n\nНо это не работало при внешнем определении идентификатора.\n\n`````ts\nconst key = `hundred`;\n\nlet o = {\n    [key]: Math.round(Math.random()) ? 100 : \"100\"\n};\n\nif (typeof o[key] === \"string\") {\n    o[key].toUpperCase(); // Error -\u003e Property 'toUpperCase' does not exist on type 'string | number'.\n}else{\n    o[key].toFixed(); // Error -\u003e Property 'toFixed' does not exist on type 'string | number'.\n}\n`````\n\nНачиная с текущей версии алгоритм анализа был доработан.\n\n`````ts\nconst key = `hundred`;\n\nlet o = {\n    [key]: Math.round(Math.random()) ? 100 : \"100\"\n};\n\nif (typeof o[key] === \"string\") {\n    o[key].toUpperCase(); // Ok\n}else{\n    o[key].toFixed(); // Ok\n}\n`````\n\nКроме этого, новые правила сделали возможным выявление забытых инициализаций для вычисляемых членов.\n\n`````ts\n/**\n * [*]\n * До v4.7 (Ok) на этапе компиляции, но (Error) во время выполнения\n * Начиная с v4.7 (Error) -\u003e Property '[\"field\"]' has no initializer and is not definitely assigned in the constructor.ts(2564)\n */\n\nclass T {\n    [\"field\"]: string; // [*]\n\n    constructor() {\n        // Забыли инициализировать индексное поле name\n    }\n}\n`````\n\n\n","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Analiz_potoka_upravleniya_dlya_vychislyaemyh_svoistv","elementId":"Analiz_potoka_upravleniya_dlya_vychislyaemyh_svoistv","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_10","title":"Улучшение вывода функций","tags":["Улучшение"],"markdown":"## Улучшение вывода функций\n\nВ текущей версии были внесены значительные доработки вывода функциональных типов внутри объектов и массивов.\n\n`````ts\ntype Param\u003cT\u003e = {\n    a(p: number): T;\n    b(p: T): void;\n};\ndeclare function f\u003cT\u003e(param: Param\u003cT\u003e): void;\n\nf({ a: () =\u003e 100, b: x =\u003e x.toFixed() }); // Ok\nf({ a: n =\u003e n, b: (x: number) =\u003e x.toFixed() }); // Ok\nf({ a: n =\u003e n, b: x =\u003e x.toFixed() });  // Было Error, стало Ok\nf({ a: function() { return 100 }, b: x =\u003e x.toFixed() });  // Было Error, стало Ok\nf({ a: function() { return 100 }, b: x =\u003e x.toFixed() });  // Было Error, стало Ok\n`````\n\n","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Uluchshenie_vyvoda_funkcii","elementId":"Uluchshenie_vyvoda_funkcii","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_6","title":"Конкретизация ссылки на функцию","tags":["Улучшение"],"markdown":"## Конкретизация ссылки на функцию\n\nСуществуют ситуации при которых обычные конструкции могут быть более общими, чем это требуется.\n\n`````ts\ninterface Box\u003cT\u003e {\n    value: T;\n}\n\n// функция, которая порождает коробки с любым содержимым\nfunction createBox\u003cT\u003e(value: T): Box\u003cT\u003e {\n    return {value};\n}\n`````\n\nДо текущей версии конкретизация типа могла бы быть осуществлена с помощью излишнего кода в виде обертки..\n\n`````ts\ninterface Food{}\n\n// более конкретная функция, которая порождает исключительно коробки с Food\nfunction createFoodBox(value: Food) {\n    return createBox(value);\n}\n`````\n\n..или же при помощи псевдонима типа.\n\n`````ts\ntype FoodBox = (value: Food) =\u003e Box\u003cFood\u003e;\n\n// ссылка на более общую функцию createBox, но конкретизированная псевдонимом типа\nconst createFoodBox: FoodBox = createBox;\n`````\n\nПервый вариант немного излишен, а второй слишком громоздкий. Поэтому для разрешения подобных сценариев был добавлен механизм конкретизации непосредственно самой ссылки на порождающий объект.\n\n`````ts\n\n// сохранение ссылки и конкретизация типа одновременно\nconst createFoodBox = createBox\u003cFood\u003e;\n`````\n\nЭтот же механизм распространяется на функции-конструкторы..\n\n`````ts\nclass Box\u003cT\u003e {\n    constructor(readonly value: T){}\n}\n\nconst NumberBox = Box\u003cnumber\u003e;\nlet a = new NumberBox(5); // Ok\nlet b = new NumberBox(`5`); // Error -\u003e Argument of type 'string' is not assignable to parameter of type 'number'.ts(2345)\n`````\n\n.. в том числе и `Array`, `Map` и `Set`.\n`````ts\nconst NumberMap = Map\u003cstring, number\u003e;\nlet numberMap = new NumberMap();\n`````\n","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Konkretizaciya_ssylki_na_funkciu","elementId":"Konkretizaciya_ssylki_na_funkciu","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_1","title":"Ограничение infer с помощью extends","tags":["Улучшение"],"markdown":"## Ограничение infer с помощью extends\n\nУсловные типы позволяют творить настоящие чудеса, но иногда бывают немного громоздки. Для примера представьте сценарий при котором необходимо получить тип первого элемента кортежа, но только тогда, когда этот тип совместим со `string`.\n\n`````ts\ntype FirstNumberItem\u003cT\u003e =\n    T extends [infer S, ...unknown[]]\n        ? S extends number ? S : never\n        : never;\n\n// type A = number\ntype A = FirstNumberItem\u003c[number, boolean, string]\u003e;\n\n// type B = 100\ntype B = FirstNumberItem\u003c[100, boolean, string]\u003e;\n\n// type C = 100 | 500\ntype C = FirstNumberItem\u003c[100 | 500, boolean]\u003e;\n\n// type D = never\ntype D = FirstNumberItem\u003c[boolean, number, number]\u003e;\n`````\n\nНесмотря на то, что данный код решает возложенную на него задачу, вложенные условные выражения затрудняют его читаемость. Именно этот факт и стал причиной создания нового механизма позволяющий ограничивать переменные типа `infer` конкретным типом при помощи ключевого слова `extends`.\n\n`````ts\ntype FirstNumberItem\u003cT\u003e =\n    T extends [infer S extends number, ...unknown[]] ? S : never;\n\n/**\n * ..здесь располагается код аналогичный предыдущему.\n */\n`````\n\n\n","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Ogranichenie_infer_s_pomoshchu_extends","elementId":"Ogranichenie_infer_s_pomoshchu_extends","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_5","title":"typeof для #приватных членов","tags":["Улучшение"],"markdown":"## typeof для #приватных членов\n\nНачиная с текущей версии стало возможным выполнять запрос типа на приватных полях предусмотренных в _ECMAScript_ спецификации.\n\n`````ts\nclass Class {\n    #field = 100;\n\n    method(): typeof this.#field {\n    return this.#field;\n}\n}\n`````\n\n","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"typeof_dlya_#privatnyh_chlenov","elementId":"typeof_dlya_#privatnyh_chlenov","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_11","title":"Настройка разрешения поиска модулей с помощью moduleSuffixes","tags":["Нововведение"],"markdown":"## Настройка разрешения поиска модулей с помощью moduleSuffixes\n\nТеперь в `tsconfig.json` можно указать правила для разрешения модулей на основе расширений.\n\n`````json\n{\n    \"compilerOptions\": {\n        \"moduleSuffixes\": [\".ios\", \".native\", \"\"]\n    }\n}\n`````\n\nПри конфигурации выше, код ниже..\n`````ts\nimport * as x from \"./x\";\n`````\n\n..будет разрешен таким образом, что сначала осуществится поиск `./x.ios`, затем `./x.native` и наконец `./x.ts`.\nСтоит обратить внимает, что указание пустой строки в качестве элемента параметра `moduleSuffixes` требуется для указания поиска файлов с расширением `.ts` и это значение является значение по умолчанию.\n\n\n","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Nastroika_razresheniya_poiska_modulei_s_pomoshchu_moduleSuffixes","elementId":"Nastroika_razresheniya_poiska_modulei_s_pomoshchu_moduleSuffixes","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_7","title":"Разрешение импорта и экспорта только типа с помощью resolution-mode","tags":["Улучшение"],"markdown":"## Разрешение импорта и экспорта только типа с помощью resolution-mode\n\nКомпилятор _TypeScript_ умеет успешно разрешать сценарии при импортировании таких модулей, как `CommonJS` и `ECMAScript`. Для разрешения импорта только типа теперь существует отдельный механизм, который осуществляется путем указания после пути до модуля ключевого слова `assert` за которым в фигурных скобках определяется конфигурация позволяющая конкретизировать вид модулей.\n\n`````ts\n// Для require()\nimport type { TypeFromRequere } from \"module-name\" assert {\n    \"resolution-mode\": \"require\"\n};\n\n// Для import\nimport type { TypeFromImport } from \"module-name\" assert {\n    \"resolution-mode\": \"import\"\n};\n\nexport interface MergedType extends TypeFromRequere, TypeFromImport {}\n`````\n\nПомимо этого, утверждения можно применить и к динамическому импорту..\n\n`````ts\nimport(\"module-name\", { assert: { \"resolution-mode\": \"require\" } }).TypeFromRequire;\nimport(\"module-name\", { assert: { \"resolution-mode\": \"import\" } }).TypeFromImport;\n`````\n\n..а также, к коментарной директиве.\n\n`````ts\n/// \u003creference types=\"module-name\" resolution-mode=\"require\" /\u003e\n/// \u003creference types=\"module-name\" resolution-mode=\"import\" /\u003e\n`````","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Razreshenie_importa_i_eksporta_tolko_tipa_s_pomoshchu_resolution-mode","elementId":"Razreshenie_importa_i_eksporta_tolko_tipa_s_pomoshchu_resolution-mode","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_4","title":"Поддержка ECMAScript модулей в Node.js","tags":["Улучшение"],"markdown":"## Поддержка ECMAScript модулей в Node.js\n\nНачиная с текущей версии _TypeScript_ реализует поддержку _ECMAScript_ модулей в _Node.js_, который указывается с помощью новых значений `node12` и `nodenext` свойства компилятора `module`.\n\n`````json\n{\n    \"compilerOptions\": {\n        \"module\": \"nodenext\"\n    }\n}\n`````","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Podderjka_ECMAScript_modulei_v_Node.js","elementId":"Podderjka_ECMAScript_modulei_v_Node.js","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_3","title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Параметры типа больше не совместимы с {} в strictNullChecks","tags":["Критическое изменение"],"markdown":"## [КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Параметры типа больше не совместимы с {} в strictNullChecks\n\nИзначально параметры типа рассматривались компилятором, как неявно принадлежащие к типу `{}`, который затем был заменен на `unknown`. В деактивированном режиме `strictNullChecks` эти два типа совместимы, но при активации совместимость пропадает. Это известный факт, но до текущей версии для обратной совместимости компилятор _TypeScript_ пренебрегал им.\n\n\n`````ts\nfunction f\u003cT\u003e(x: T) {\n    const a: {} = x; // Ok\n}\n`````\n\nНачиная с текущей версии данный прореха в безопасности была закрыта.\n\n`````ts\nfunction f\u003cT\u003e(x: T) {\n    const a: {} = x; // Error -\u003e Type 'T' is not assignable to type '{}'.ts(2322)\n}\n`````\n`````ts\n`````ts\n\n","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"[KRITIChESKOE_IZMENENIE]_Parametry_tipa_bolshe_ne_sovmestimy_s_{}_v_strictNullChecks","elementId":"[KRITIChESKOE_IZMENENIE]_Parametry_tipa_bolshe_ne_sovmestimy_s_{}_v_strictNullChecks","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_2","title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Метод readFile  класса LanguageServiceHost теперь обязательный","tags":["Критическое изменение"],"markdown":"## [КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Метод readFile  класса LanguageServiceHost теперь обязательный\n\nЕсли вы создаете экземпляр класса `LanguageService`, то необходимые ему `LanguageServiceHosts` теперь обязаны реализовывать метод `readFile`.\n","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"[KRITIChESKOE_IZMENENIE]_Metod_readFile_klassa_LanguageServiceHost_teper_obyazatelnyi","elementId":"[KRITIChESKOE_IZMENENIE]_Metod_readFile_klassa_LanguageServiceHost_teper_obyazatelnyi","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}},{"key":"4.7@beta_9","title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Свойство length у кортежа теперь readonly","tags":["Критическое изменение"],"markdown":"## [КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Свойство length у кортежа теперь readonly\n\nНачиная с текущей версии свойство `length` у кортежей стало только для чтения `readonly`.\n\n`````ts\nfunction f(tuple: [boolean, number, string]) {\n    tuple.length = 0; // Error -\u003e Type '0' is not assignable to type '3'.\n}\n`````\n","githubFileInfo":{"lastUpdate":1650963933000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"[KRITIChESKOE_IZMENENIE]_Svoistvo_length_u_korteja_teper_readonly","elementId":"[KRITIChESKOE_IZMENENIE]_Svoistvo_length_u_korteja_teper_readonly","version":{"version":"4.7@beta","dateRelease":"April 8, 2022","datePublication":"April 26, 2022"}}]},"contentNavData":{"key":"4.7@beta","level":0,"index":0,"contentIndex":0,"title":"4.7@beta","path":"4.7@beta","elementId":"4.7@beta","children":[{"key":"Модификаторы вариантности параметров типа in и out_0","level":1,"index":1,"contentIndex":1,"title":"Модификаторы вариантности параметров типа in и out","path":"Modifikatory_variantnosti_parametrov_tipa_in_i_out","elementId":"Modifikatory_variantnosti_parametrov_tipa_in_i_out"},{"key":"Анализ потока управления для вычисляемых свойств_1","level":1,"index":2,"contentIndex":2,"title":"Анализ потока управления для вычисляемых свойств","path":"Analiz_potoka_upravleniya_dlya_vychislyaemyh_svoistv","elementId":"Analiz_potoka_upravleniya_dlya_vychislyaemyh_svoistv"},{"key":"Улучшение вывода функций_2","level":1,"index":3,"contentIndex":3,"title":"Улучшение вывода функций","path":"Uluchshenie_vyvoda_funkcii","elementId":"Uluchshenie_vyvoda_funkcii"},{"key":"Конкретизация ссылки на функцию_3","level":1,"index":4,"contentIndex":4,"title":"Конкретизация ссылки на функцию","path":"Konkretizaciya_ssylki_na_funkciu","elementId":"Konkretizaciya_ssylki_na_funkciu"},{"key":"Ограничение infer с помощью extends_4","level":1,"index":5,"contentIndex":5,"title":"Ограничение infer с помощью extends","path":"Ogranichenie_infer_s_pomoshchu_extends","elementId":"Ogranichenie_infer_s_pomoshchu_extends"},{"key":"typeof для #приватных членов_5","level":1,"index":6,"contentIndex":6,"title":"typeof для #приватных членов","path":"typeof_dlya_#privatnyh_chlenov","elementId":"typeof_dlya_#privatnyh_chlenov"},{"key":"Настройка разрешения поиска модулей с помощью moduleSuffixes_6","level":1,"index":7,"contentIndex":7,"title":"Настройка разрешения поиска модулей с помощью moduleSuffixes","path":"Nastroika_razresheniya_poiska_modulei_s_pomoshchu_moduleSuffixes","elementId":"Nastroika_razresheniya_poiska_modulei_s_pomoshchu_moduleSuffixes"},{"key":"Разрешение импорта и экспорта только типа с помощью resolution-mode_7","level":1,"index":8,"contentIndex":8,"title":"Разрешение импорта и экспорта только типа с помощью resolution-mode","path":"Razreshenie_importa_i_eksporta_tolko_tipa_s_pomoshchu_resolution-mode","elementId":"Razreshenie_importa_i_eksporta_tolko_tipa_s_pomoshchu_resolution-mode"},{"key":"Поддержка ECMAScript модулей в Node.js_8","level":1,"index":9,"contentIndex":9,"title":"Поддержка ECMAScript модулей в Node.js","path":"Podderjka_ECMAScript_modulei_v_Node.js","elementId":"Podderjka_ECMAScript_modulei_v_Node.js"},{"key":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Параметры типа больше не совместимы с {} в strictNullChecks_9","level":1,"index":10,"contentIndex":10,"title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Параметры типа больше не совместимы с {} в strictNullChecks","path":"[KRITIChESKOE_IZMENENIE]_Parametry_tipa_bolshe_ne_sovmestimy_s_{}_v_strictNullChecks","elementId":"[KRITIChESKOE_IZMENENIE]_Parametry_tipa_bolshe_ne_sovmestimy_s_{}_v_strictNullChecks"},{"key":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Метод readFile  класса LanguageServiceHost теперь обязательный_10","level":1,"index":11,"contentIndex":11,"title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Метод readFile  класса LanguageServiceHost теперь обязательный","path":"[KRITIChESKOE_IZMENENIE]_Metod_readFile_klassa_LanguageServiceHost_teper_obyazatelnyi","elementId":"[KRITIChESKOE_IZMENENIE]_Metod_readFile_klassa_LanguageServiceHost_teper_obyazatelnyi"},{"key":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Свойство length у кортежа теперь readonly_11","level":1,"index":12,"contentIndex":12,"title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Свойство length у кортежа теперь readonly","path":"[KRITIChESKOE_IZMENENIE]_Svoistvo_length_u_korteja_teper_readonly","elementId":"[KRITIChESKOE_IZMENENIE]_Svoistvo_length_u_korteja_teper_readonly"}]},"pageNav":{"isPrevPage":true,"isNextPage":true,"prevPage":{"title":"4.6","path":"4.6"},"nextPage":{"title":"4.8","path":"4.8"}},"pageDescription":"Обзор нововведений и изменений для версии 4.7"},"__N_SSG":true},"page":"/what-is-new/[version]","query":{"version":"4.7"},"buildId":"lBJQfFCuVW1g-ePmkAwxd","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>