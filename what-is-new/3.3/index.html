<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="og:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="og:description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="nauchikus"/><meta name="twitter:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="twitter:description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="yandex-verification" content="d7555ce264b8a099"/><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><title>TDG-подробное руководство по языку TypeScript</title><meta name="description" content="Обзор нововведений и изменений для версии 3.3"/><meta name="og:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="og:description" content="Обзор нововведений и изменений для версии 3.3"/><meta name="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="nauchikus"/><meta name="twitter:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="twitter:description" content="Обзор нововведений и изменений для версии 3.3"/><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/48b3a72d7930fb66ae91.css" as="style"/><link rel="stylesheet" href="/_next/static/css/48b3a72d7930fb66ae91.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-0e3c274fd8419109d37b.js" defer=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" defer=""></script><script src="/_next/static/chunks/main-7096870a72703e216a95.js" defer=""></script><script src="/_next/static/chunks/pages/_app-cf52effae52c8422f0c7.js" defer=""></script><script src="/_next/static/chunks/452-2343a28788c03f958a4e.js" defer=""></script><script src="/_next/static/chunks/950-86a83352b01b7466f89f.js" defer=""></script><script src="/_next/static/chunks/222-f79b6bb9bf6211af52b8.js" defer=""></script><script src="/_next/static/chunks/460-cf93e771b3da01004124.js" defer=""></script><script src="/_next/static/chunks/763-b007244d3307e1e9232d.js" defer=""></script><script src="/_next/static/chunks/211-d4969ecab0eef9742617.js" defer=""></script><script src="/_next/static/chunks/200-de381b6021e76daeafb5.js" defer=""></script><script src="/_next/static/chunks/292-ec41396293991a7b3186.js" defer=""></script><script src="/_next/static/chunks/pages/what-is-new/%5Bversion%5D-298349b4e1d95ad1d6f1.js" defer=""></script><script src="/_next/static/RR0kZb73ocCXr1X-8JJkR/_buildManifest.js" defer=""></script><script src="/_next/static/RR0kZb73ocCXr1X-8JJkR/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="base-layout"><div></div><header class="app-header app-header-grid"><div class="app-header-grid-item__driver-toggle"><button class="app-driver-toggle-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"></path></svg></button></div><div class="app-header-grid-item__logo"><span role="img" tabindex="-1" class="anticon app-logo"><svg id="logo_app_svg__Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 118.08 43.32" width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><defs><style>.logo_app_svg__cls-2{fill:#1d1d1b}</style></defs><path d="M38.56 3.3v8H26v33.6h-9.34V11.28H4.12v-8z" transform="translate(-4.12 -2.34)" fill="#3273b9"></path><path class="logo_app_svg__cls-2" d="M81 24.06a24.31 24.31 0 01-1.68 9.42 17.45 17.45 0 01-4.77 6.66 20.38 20.38 0 01-7.52 4 35 35 0 01-10 1.32q-2.53 0-5.88-.21a48 48 0 01-6.61-.87V3.84A55.14 55.14 0 0151.3 3c2.34-.14 4.36-.21 6-.21A36.41 36.41 0 0167 4a19.87 19.87 0 017.5 3.8 16.88 16.88 0 014.79 6.6A25 25 0 0181 24.06zm-27 13.2q.64.06 1.53.09h2.06q7 0 10.41-3.54t3.39-9.78q0-6.54-3.23-9.9T57.81 10.8h-2a18.29 18.29 0 00-1.91.15zM109.05 10.5q-6.54 0-9.45 3.63t-2.91 9.93a19.58 19.58 0 00.73 5.55 12 12 0 002.15 4.29 9.73 9.73 0 003.6 2.79 12 12 0 005 1q1.56 0 2.67-.06a12.66 12.66 0 002-.24V22.92h9.36V43.5a35.26 35.26 0 01-5.4 1.41 47.42 47.42 0 01-9.18.75 23.76 23.76 0 01-8.48-1.44A17.79 17.79 0 0192.61 40a18.75 18.75 0 01-4.17-6.78A26.63 26.63 0 0187 24.06a24.58 24.58 0 011.62-9.24A19.9 19.9 0 0193 8a18.67 18.67 0 016.64-4.23 22.75 22.75 0 018.12-1.44 32.88 32.88 0 015.31.39 33.5 33.5 0 014.08.9 18.93 18.93 0 012.82 1q1.11.54 1.59.84l-2.7 7.5a24.4 24.4 0 00-4.41-1.77 18.76 18.76 0 00-5.4-.69z" transform="translate(-4.12 -2.34)"></path></svg></span></div><div class="app-header-grid-item__search"><form class="search" autoComplete="off" action="#"><button class="search__submit-button-placeholder button-with-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon search__search-svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></button><input type="search" class="search__query-input" id="algolia-search" name="app-search-query" placeholder="search..." required=""/></form></div><div class="app-header-grid-item__secondary-bar"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://t.me/nauchikus" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://github.com/nauchikus/typescript-definitive-guide" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="app-header-grid-item__primary-bar"><div class="dropdown app-nav__dropdown"><button class="dropdown__toggle app-nav__dropdown-toggle_adaptive"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></button><div class="dropdown__menu app-nav__dropdown-menu_adaptive"><div class="flat-panel"><div class="app-nav__link-bar app-nav__link-bar_adaptive"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://t.me/nauchikus" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://github.com/nauchikus/typescript-definitive-guide" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="divide-full_x app-nav__divide_adaptive"></div><div class="app-nav__nav"><nav class="app-nav"><ul class="menu app-nav__menu_adaptive"><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/">Главная</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/book/chapters/">Оглавление</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/what-is-new/">Что нового?</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/pdf/">Скачать Pdf</a></li></ul></nav></div></div></div></div></div></header><div class="layer slide-layer" toggle="false"><div class="slide-layer__driver"><div class="slide-layer__fixed-driver"><div class="driver"><div class="layer driver-content-nav"><ul class="ant-menu ant-menu-root ant-menu-inline ant-menu-light driver-content-nav__menu" role="menu" tabindex="0" data-menu-list="true"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">Содержание</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/3.3#Povyshenie_proizvoditelnosti_sborki_dlya_komandy_--build_--watch">Повышение производительности сборки для команды --build --watch</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/3.3#Uluchshenie_povedeniya_dlya_tipov_Union_ukazannyh_v_kachestve_parametrov_funkcii">Улучшение поведения для типов Union указанных в качестве параметров функции</a></span></li></ul></li></ul><div style="display:none" aria-hidden="true"></div></div></div></div></div><div class="slide-layer__first-empty"></div><div class="slide-layer__content"><div class="content-box"><div class="content-box__page-nav content-box__page-nav_left"><div class="page-nav__bar page-nav__bar_left"><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn"><span role="img" aria-label="left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></span></button></div></div><main id="content" class="content-box__html"><section id="3.3" class="content__section innovation-presenter"><div class="innovation-presenter__info-bar"><div class="innovation-presenter__info-bar__section innovation-presenter__info-bar__section_left"><span class="innovation-presenter__info-bar__section__label">Статус</span><span class="innovation-presenter__info-bar__label_version">release</span></div><div class="innovation-presenter__info-bar__section innovation-presenter__info-bar__section_right"><span class="innovation-presenter__info-bar__section__label">Дата публикации</span><time class="innovation-presenter__info-bar__label_last-update" dateTime="january 31, 2019">january 31, 2019</time></div></div><h1 class="innovation-presenter__title">3.3</h1><div class="innovation-presenter__share-bar"><button aria-label="vk" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#45668e"></circle><path d="M44.94,44.84h-0.2c-2.17-.36-3.66-1.92-4.92-3.37C39.1,40.66,38,38.81,36.7,39c-1.85.3-.93,3.52-1.71,4.9-0.62,1.11-3.29.91-5.12,0.71-5.79-.62-8.75-3.77-11.35-7.14A64.13,64.13,0,0,1,11.6,26a10.59,10.59,0,0,1-1.51-4.49C11,20.7,12.56,21,14.11,21c1.31,0,3.36-.29,4.32.2C19,21.46,19.57,23,20,24a37.18,37.18,0,0,0,3.31,5.82c0.56,0.81,1.41,2.35,2.41,2.14s1.06-2.63,1.1-4.18c0-1.77,0-4-.5-4.9S25,22,24.15,21.47c0.73-1.49,2.72-1.63,5.12-1.63,2,0,4.84-.23,5.62,1.12s0.25,3.85.2,5.71c-0.06,2.09-.41,4.25,1,5.21,1.09-.12,1.68-1.2,2.31-2A28,28,0,0,0,41.72,24c0.44-1,.91-2.65,1.71-3,1.21-.47,3.15-0.1,4.92-0.1,1.46,0,4.05-.41,4.52.61,0.39,0.85-.75,3-1.1,3.57a61.88,61.88,0,0,1-4.12,5.61c-0.58.78-1.78,2-1.71,3.27,0.05,0.94,1,1.67,1.71,2.35a33.12,33.12,0,0,1,3.92,4.18c0.47,0.62,1.5,2,1.4,2.76C52.66,45.81,46.88,44.24,44.94,44.84Z" fill="white"></path></svg></button><button aria-label="facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg></button><button aria-label="twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="telegram" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#37aee2"></circle><path d="m45.90873,15.44335c-0.6901,-0.0281 -1.37668,0.14048 -1.96142,0.41265c-0.84989,0.32661 -8.63939,3.33986 -16.5237,6.39174c-3.9685,1.53296 -7.93349,3.06593 -10.98537,4.24067c-3.05012,1.1765 -5.34694,2.05098 -5.4681,2.09312c-0.80775,0.28096 -1.89996,0.63566 -2.82712,1.72788c-0.23354,0.27218 -0.46884,0.62161 -0.58825,1.10275c-0.11941,0.48114 -0.06673,1.09222 0.16682,1.5716c0.46533,0.96052 1.25376,1.35737 2.18443,1.71383c3.09051,0.99037 6.28638,1.93508 8.93263,2.8236c0.97632,3.44171 1.91401,6.89571 2.84116,10.34268c0.30554,0.69185 0.97105,0.94823 1.65764,0.95525l-0.00351,0.03512c0,0 0.53908,0.05268 1.06412,-0.07375c0.52679,-0.12292 1.18879,-0.42846 1.79109,-0.99212c0.662,-0.62161 2.45836,-2.38812 3.47683,-3.38552l7.6736,5.66477l0.06146,0.03512c0,0 0.84989,0.59703 2.09312,0.68132c0.62161,0.04214 1.4399,-0.07726 2.14229,-0.59176c0.70766,-0.51626 1.1765,-1.34683 1.396,-2.29506c0.65673,-2.86224 5.00979,-23.57745 5.75257,-27.00686l-0.02107,0.08077c0.51977,-1.93157 0.32837,-3.70159 -0.87096,-4.74991c-0.60054,-0.52152 -1.2924,-0.7498 -1.98425,-0.77965l0,0.00176zm-0.2072,3.29069c0.04741,0.0439 0.0439,0.0439 0.00351,0.04741c-0.01229,-0.00351 0.14048,0.2072 -0.15804,1.32576l-0.01229,0.04214l-0.00878,0.03863c-0.75858,3.50668 -5.15554,24.40802 -5.74203,26.96472c-0.08077,0.34417 -0.11414,0.31959 -0.09482,0.29852c-0.1756,-0.02634 -0.50045,-0.16506 -0.52679,-0.1756l-13.13468,-9.70175c4.4988,-4.33199 9.09945,-8.25307 13.744,-12.43229c0.8218,-0.41265 0.68483,-1.68573 -0.29852,-1.70681c-1.04305,0.24584 -1.92279,0.99564 -2.8798,1.47502c-5.49971,3.2626 -11.11882,6.13186 -16.55882,9.49279c-2.792,-0.97105 -5.57873,-1.77704 -8.15298,-2.57601c2.2336,-0.89555 4.00889,-1.55579 5.75608,-2.23009c3.05188,-1.1765 7.01687,-2.7042 10.98537,-4.24067c7.94051,-3.06944 15.92667,-6.16346 16.62028,-6.43037l0.05619,-0.02283l0.05268,-0.02283c0.19316,-0.0878 0.30378,-0.09658 0.35471,-0.10009c0,0 -0.01756,-0.05795 -0.00351,-0.04566l-0.00176,0zm-20.91715,22.0638l2.16687,1.60145c-0.93418,0.91311 -1.81743,1.77353 -2.45485,2.38812l0.28798,-3.98957" fill="white"></path></svg></button></div></section><section id="Povyshenie_proizvoditelnosti_sborki_dlya_komandy_--build_--watch" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">8/14/2020</span></div></div></aside><p>##Повышение производительности сборки для команды --build --watch</p>
<p>Так как ссылки на проекты, появившиеся в версии <em>v3.0</em>, способны значительно упростить разработку крупных проектов, команда <em>TypeScript</em>, в версии <em>v3,3</em>, направив свои усилия на усовершенствование этого функционала, смогла ускорить процесс сборки при совместном использовании флагов <code class="content__code_inline">--build</code> и <code class="content__code_inline">--watch</code> на 50% - 75%, что действительно можно назвать впечатляющим результатом.</p></section><section id="Uluchshenie_povedeniya_dlya_tipov_Union_ukazannyh_v_kachestve_parametrov_funkcii" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/mindyourlifeguide" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/35348648?v=4"/></span></a><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">3/21/2021</span></div></div></aside><p>##Улучшение поведения для типов Union указанных в качестве параметров функции</p>
<p>До версии <em>v3.3</em> было невозможно вызвать функцию даже если аргумент, передаваемый при вызове, принадлежал к типу, включенным в определение каждого объединенного типа указанного в аннотации параметров функциональных типов определяющих объединенный вызываемый тип к которому принадлежит вызываемая функция.</p>
<p>Вышесказанное с трудом поддается осмыслению, поэтому продолжить рассмотрение описанного случая лучше сразу на коде, который по шагам разберет завал из умных слов по полочкам.</p>
<p>Всем нам известно, что объединенный тип (<code class="content__code_inline">Union</code>) представляет из себя множество типов, к одному из которых может принадлежать ассоциированное с ним значение.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// До v3.3</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Несовместимые типы A, B
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">B</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Определение функционального типа параметры которого
</span><span class="token doc-comment" style="color:slategray"> * принадлежат к типу Union определяющегося типами A и B
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T0</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">B</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Декларация функции принадлежащий к функциональному типу T0
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">declare</span><span> </span><span class="token" style="color:#07a">const</span><span> f</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T0</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok, аргумент принадлежащий к типу A; const f: (p: A | B) =&gt; number</span><span>
</span><span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok, аргумент принадлежащий к типу B; const f: (p: A | B) =&gt; number</span><span>
</span><span></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690">Из кода выше понятно, что компилятор, в случаи первого вызова, определяет принадлежность аргумента к типу </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#905">A</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">, а во втором к типу </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#905">B</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">. Все предельно просто, поэтому перейдем к следующему шагу и расширим пример.
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690"></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>ts
</span><span></span><span class="token" style="color:slategray">// До v3.3</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Добавлен ещё один тип C
</span><span class="token doc-comment" style="color:slategray"> * Несовместимые типы A, B и C
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">B</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">C</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    c</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * добавлена определение ещё одного функционального типа T1
</span><span class="token doc-comment" style="color:slategray"> * параметры которого принадлежат к типу Union определяющегося
</span><span class="token doc-comment" style="color:slategray"> * типами A и C и также отличным возвращаемым типом
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T0</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">B</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T1</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">C</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Теперь декларация функции принадлежит к типу Union
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">declare</span><span> </span><span class="token" style="color:#07a">const</span><span> f</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T0</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">T1</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error, (error text is listed below)</span><span>
</span><span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error, (error text is listed below)</span><span>
</span><span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> c</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error, (error text is listed below)</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Cannot invoke an expression whose type lacks a call
</span><span class="token doc-comment" style="color:slategray"> * signature. Type &#x27;T0 | T1&#x27; has no compatible call
</span><span class="token doc-comment" style="color:slategray"> * signatures.ts(2349)
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690">Как видно из кода выше, в случаях, когда вызываемая функция принадлежит к типу </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token maybe-class-name">Union</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690"> определенному функциональными типами, в параметрах которых также указаны объединенные типы, даже не смотря на то, что их определение включает общий для всех тип </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#905">A</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">, возникает ошибка. Это кажется нелогичным, так как тип объединение вызывающий ошибку определяется типами, которые по отдельности к ней не приводят.
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token doc-comment" style="color:slategray">Поэтому начиная с версии _v3.3_ это поведение было изменено и теперь код из второго примера не приводит к ошибке.
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690"></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>ts
</span><span></span><span class="token" style="color:slategray">// Начиная с v3.3</span><span>
</span>
<span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">B</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">C</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    c</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T0</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">B</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T1</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">C</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">declare</span><span> </span><span class="token" style="color:#07a">const</span><span> f</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T0</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">T1</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok, const f: (p: A | (A &amp; C) | (B &amp; A) | (B &amp; C)) =&gt; string | number</span><span>
</span><span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error, так как тип B определяет объединение указанное только в параметрах типа T0</span><span>
</span><span></span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> c</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error, так как тип С определяет объединение указанное только в параметрах типа T1</span><span>
</span><span></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690">Код выше наглядно демонстрирует сказанное, а именно тот факт, что при вызове функции с аргументом принадлежащем к типу </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#905">A</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">, который является общим для всех определений типов Union, компилятор рассматривает вызываемую функцию основываясь сразу на двух функциональных типах </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#905">T0</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690"> и </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#905">T1</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690"> -
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690"></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>ts
</span><span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Так компилятор начиная с v3.3 видит вызываемый тип
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable" style="color:#DD4A68">f</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">A</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> </span><span class="token" style="color:#905">C</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">B</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> </span><span class="token" style="color:#905">A</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">B</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;</span><span> </span><span class="token" style="color:#905">C</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">string</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token doc-comment" style="color:slategray">Кроме того, что уже известно на данный момент, также существует ещё один случай при котором новое поведение работать не будет. Таким случаем является ограничение на использование функциональных обобщены типов. Новое поведение не будет работать, если объединенный тип определяется более чем одним обобщенным вызываемым типом.
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690"></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>ts
</span><span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Тип A является обобщенным типом (generics type)
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">A</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">B</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">C</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    c</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * сигнатура обоих типов (T0 и T1) имеют
</span><span class="token doc-comment" style="color:slategray"> * объявления параметров типа (T)
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T0</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">A</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">B</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T1</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">A</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">C</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">declare</span><span> </span><span class="token" style="color:#07a">const</span><span> f</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T0</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">T1</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token generic-function" style="color:#DD4A68">f</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic" style="color:#690">number</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error, (error text is listed below)</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Cannot invoke an expression whose type lacks a call
</span><span class="token doc-comment" style="color:slategray"> * signature. Type &#x27;T0 | T1&#x27; has no compatible call
</span><span class="token doc-comment" style="color:slategray"> * signatures.ts(2349)
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690">Как уже было сказано, ошибка возникает из-за того, что оба типа </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#905">T0</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690"> и </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#905">T1</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690"> являются обобщенными. Но обобщенные типы в реальной практике обычное явление, при возникновении подобного случая единственных выход прибегнуть к механизму закрытия типозаполнителя.
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690"></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>ts
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">A</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">B</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token" style="color:#905">C</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    c</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Сигнатура только одного типа T0 является обобщенной.
</span><span class="token doc-comment" style="color:slategray"> * В определении типа T1 тип A указан с закрытым параметром типа.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T0</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">A</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">B</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T1</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">A</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#690">number</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">C</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">declare</span><span> </span><span class="token" style="color:#07a">const</span><span> f</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T0</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#905">T1</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token generic-function" style="color:#DD4A68">f</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic" style="color:#690">number</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span> a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span> </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok, const f: &lt;number&gt;(p: A&lt;number&gt; | (B &amp; A&lt;number&gt;) | (B &amp; C) | (A&lt;number&gt; &amp; C)) =&gt; string | number</span><span>
</span><span></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690">Кроме того, новое поведение отразилось на методе принадлежащему классу </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token known-class-name" style="color:#DD4A68">Array</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">, а именно </span><span class="token template-string template-punctuation" style="color:#690">`</span><span>forEach</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">. До версии _v3.3_, в случаях когда операции выполнялись над объектом принадлежащем к объединенному типу определенного массивами принадлежащих к разным типам, итерировать с помощью метода </span><span class="token template-string template-punctuation" style="color:#690">`</span><span>forEach</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690"> над ним можно было лишь после его уточнения.
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690"></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>ts
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Bird</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    kind</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;bird&#x27;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    uniqueBirdProp</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Fish</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    kind</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;fish&#x27;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    uniqueFishProp</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">isBirdAll</span><span class="token" style="color:#999">(</span><span>animalAll</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Bird</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token maybe-class-name">Fish</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> animalAll </span><span class="token" style="color:#07a">is</span><span> </span><span class="token maybe-class-name">Bird</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> animalAll</span><span class="token" style="color:#999">[</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">.</span><span class="token property-access">kind</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&#x27;bird&#x27;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Параметр принадлежит к объединённому типу определяемого
</span><span class="token doc-comment" style="color:slategray"> * типами массива принадлежащих к типам Bird и Fish
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span>animalAll</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Bird</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token maybe-class-name">Fish</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">     * Уточнение массива с помощью защитника типа
</span><span class="token doc-comment" style="color:slategray">     */</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">isBirdAll</span><span class="token" style="color:#999">(</span><span>animalAll</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        animalAll</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">forEach</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span>animal</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token" style="color:slategray">// param animal is of type Bird</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span> </span><span class="token control-flow" style="color:#07a">else</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        animalAll</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">forEach</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span>animal</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token" style="color:slategray">// param animal is of type Fish</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690">Начиная с версии _v3.3_ уточнение типа можно выполнять на уровне метода </span><span class="token template-string template-punctuation" style="color:#690">`</span><span>forEach</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690"> -
</span><span class="token doc-comment" style="color:slategray">
</span><span class="token template-string" style="color:#690"></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>ts
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Bird</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>   kind</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;bird&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>   uniqueBirdProp</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Fish</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>   kind</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;fish&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>   uniqueFishProp</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<!-- -->
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span> animalAll</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Bird</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token maybe-class-name">Fish</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>   animalAll</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">forEach</span><span class="token" style="color:#999">(</span><span> </span><span class="token" style="color:#999">(</span><span> animal</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Bird</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token maybe-class-name">Fish</span><span> </span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>       </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">        * Уточнение типа на уровне метода forEach
</span><span class="token doc-comment" style="color:slategray">        */</span><span>
</span><span>       </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span> animal</span><span class="token" style="color:#999">.</span><span class="token property-access">kind</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&#x27;bird&#x27;</span><span> </span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>           </span><span class="token" style="color:slategray">// param animal is of type Bird</span><span>
</span><span>       </span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">else</span><span class="token" style="color:#999">{</span><span>
</span><span>           </span><span class="token" style="color:slategray">// param animal is of type Fish</span><span>
</span><span>       </span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>`</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><aside class="content-box__page__content-bar_post"><nav class="post-content-bar__nav"><a href="" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_prev"><div class="post-content-bar__nav__btn_padding-fix"><span role="img" aria-label="arrow-left" class="anticon anticon-arrow-left post-content-bar__nav__btn__icon_prev"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"></path></svg></span><span class="post-content-bar__nav__btn__label"></span></div></a><a href="3.4" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_next"><div class="post-content-bar__nav__btn_padding-fix"><span class="post-content-bar__nav__btn__label">3.4</span><span role="img" aria-label="arrow-right" class="anticon anticon-arrow-right post-content-bar__nav__btn__icon_next"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"></path></svg></span></div></a></nav></aside></main><div class="content-box__page-nav content-box__page-nav_right"><div class="page-nav__bar page-nav__bar_right"><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="up" class="anticon anticon-up"><svg viewBox="64 64 896 896" focusable="false" data-icon="up" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"></path></svg></span></button></span><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn page-nav__btn_next-page"><span role="img" aria-label="right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></button><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></button></span></div></div></div></div><div class="slide-layer__last-empty"></div></div><footer class="app-footer"><div class="app-footer__empty"></div><div class="app-footer_contacts app-footer__section"></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"innovationPage":{"key":"3.3_2","title":"3.3","path":"3.3","coverUrl":"https://github.com/nauchikus/typescript-definitive-guide/raw/master/what-is-new/3.3/metadata/cover.png","version":{"version":"3.3","dateRelease":"january 31, 2019","datePublication":"January 31, 2019"},"sections":[{"key":"3.3_0","title":"Повышение производительности сборки для команды --build --watch","tags":[],"markdown":"##Повышение производительности сборки для команды --build --watch\n\nТак как ссылки на проекты, появившиеся в версии _v3.0_, способны значительно упростить разработку крупных проектов, команда _TypeScript_, в версии _v3,3_, направив свои усилия на усовершенствование этого функционала, смогла ускорить процесс сборки при совместном использовании флагов `--build` и `--watch` на 50% - 75%, что действительно можно назвать впечатляющим результатом.\n","githubFileInfo":{"lastUpdate":1597402008000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Povyshenie_proizvoditelnosti_sborki_dlya_komandy_--build_--watch","elementId":"Povyshenie_proizvoditelnosti_sborki_dlya_komandy_--build_--watch","version":{"version":"3.3","dateRelease":"January 31, 2019","datePublication":"January 31, 2019"}},{"key":"3.3_1","title":"Улучшение поведения для типов Union указанных в качестве параметров функции","tags":[],"markdown":"##Улучшение поведения для типов Union указанных в качестве параметров функции\n\nДо версии _v3.3_ было невозможно вызвать функцию даже если аргумент, передаваемый при вызове, принадлежал к типу, включенным в определение каждого объединенного типа указанного в аннотации параметров функциональных типов определяющих объединенный вызываемый тип к которому принадлежит вызываемая функция.\n\nВышесказанное с трудом поддается осмыслению, поэтому продолжить рассмотрение описанного случая лучше сразу на коде, который по шагам разберет завал из умных слов по полочкам.\n\nВсем нам известно, что объединенный тип (`Union`) представляет из себя множество типов, к одному из которых может принадлежать ассоциированное с ним значение.\n\n`````ts\n// До v3.3\n\n/**\n * Несовместимые типы A, B\n */\ninterface A {\n    a: number;\n}\ninterface B {\n    b: number;\n}\n\n/**\n * Определение функционального типа параметры которого\n * принадлежат к типу Union определяющегося типами A и B\n */\ntype T0 = (p: A | B) =\u003e number;\n\n/**\n * Декларация функции принадлежащий к функциональному типу T0\n */\ndeclare const f: T0;\n\nf({ a: 0 }); // Ok, аргумент принадлежащий к типу A; const f: (p: A | B) =\u003e number\nf({ b: 0 }); // Ok, аргумент принадлежащий к типу B; const f: (p: A | B) =\u003e number\n```\n\nИз кода выше понятно, что компилятор, в случаи первого вызова, определяет принадлежность аргумента к типу `A`, а во втором к типу `B`. Все предельно просто, поэтому перейдем к следующему шагу и расширим пример.\n\n`````ts\n// До v3.3\n\n/**\n * Добавлен ещё один тип C\n * Несовместимые типы A, B и C\n */\ninterface A {\n    a: number;\n}\ninterface B {\n    b: number;\n}\ninterface C {\n    c: number;\n}\n\n/**\n * добавлена определение ещё одного функционального типа T1\n * параметры которого принадлежат к типу Union определяющегося\n * типами A и C и также отличным возвращаемым типом\n */\ntype T0 = (p: A | B) =\u003e number;\ntype T1 = (p: A | C) =\u003e string;\n\n/**\n * Теперь декларация функции принадлежит к типу Union\n */\ndeclare const f: T0 | T1;\n\nf({ a: 0 }); // Error, (error text is listed below)\nf({ b: 0 }); // Error, (error text is listed below)\nf({ c: 0 }); // Error, (error text is listed below)\n\n/**\n * Cannot invoke an expression whose type lacks a call\n * signature. Type 'T0 | T1' has no compatible call\n * signatures.ts(2349)\n */\n```\n\nКак видно из кода выше, в случаях, когда вызываемая функция принадлежит к типу `Union` определенному функциональными типами, в параметрах которых также указаны объединенные типы, даже не смотря на то, что их определение включает общий для всех тип `A`, возникает ошибка. Это кажется нелогичным, так как тип объединение вызывающий ошибку определяется типами, которые по отдельности к ней не приводят.\n\nПоэтому начиная с версии _v3.3_ это поведение было изменено и теперь код из второго примера не приводит к ошибке.\n\n`````ts\n// Начиная с v3.3\n\ninterface A {\n    a: number;\n}\ninterface B {\n    b: number;\n}\ninterface C {\n    c: number;\n}\n\ntype T0 = (p: A | B) =\u003e number;\ntype T1 = (p: A | C) =\u003e string;\n\ndeclare const f: T0 | T1;\n\nf({ a: 0 }); // Ok, const f: (p: A | (A \u0026 C) | (B \u0026 A) | (B \u0026 C)) =\u003e string | number\nf({ b: 0 }); // Error, так как тип B определяет объединение указанное только в параметрах типа T0\nf({ c: 0 }); // Error, так как тип С определяет объединение указанное только в параметрах типа T1\n```\n\nКод выше наглядно демонстрирует сказанное, а именно тот факт, что при вызове функции с аргументом принадлежащем к типу `A`, который является общим для всех определений типов Union, компилятор рассматривает вызываемую функцию основываясь сразу на двух функциональных типах `T0` и `T1` -\n\n`````ts\n/**\n * Так компилятор начиная с v3.3 видит вызываемый тип\n */\nconst f: (p: A | (A \u0026 C) | (B \u0026 A) | (B \u0026 C)) =\u003e string | number;\n```\n\nКроме того, что уже известно на данный момент, также существует ещё один случай при котором новое поведение работать не будет. Таким случаем является ограничение на использование функциональных обобщены типов. Новое поведение не будет работать, если объединенный тип определяется более чем одним обобщенным вызываемым типом.\n\n`````ts\n/**\n * Тип A является обобщенным типом (generics type)\n */\ninterface A\u003cT\u003e {\n    a: number;\n}\ninterface B {\n    b: number;\n}\ninterface C {\n    c: number;\n}\n\n/**\n * сигнатура обоих типов (T0 и T1) имеют\n * объявления параметров типа (T)\n */\ntype T0 = \u003cT\u003e(p: A\u003cT\u003e | B) =\u003e number;\ntype T1 = \u003cT\u003e(p: A\u003cT\u003e | C) =\u003e string;\n\ndeclare const f: T0 | T1;\n\nf\u003cnumber\u003e({ a: 0 }); // Error, (error text is listed below)\n\n/**\n * Cannot invoke an expression whose type lacks a call\n * signature. Type 'T0 | T1' has no compatible call\n * signatures.ts(2349)\n */\n```\n\nКак уже было сказано, ошибка возникает из-за того, что оба типа `T0` и `T1` являются обобщенными. Но обобщенные типы в реальной практике обычное явление, при возникновении подобного случая единственных выход прибегнуть к механизму закрытия типозаполнителя.\n\n`````ts\ninterface A\u003cT\u003e {\n    a: number;\n}\ninterface B {\n    b: number;\n}\ninterface C {\n    c: number;\n}\n\n/**\n * Сигнатура только одного типа T0 является обобщенной.\n * В определении типа T1 тип A указан с закрытым параметром типа.\n */\ntype T0 = \u003cT\u003e(p: A\u003cT\u003e | B) =\u003e number;\ntype T1 = (p: A\u003cnumber\u003e | C) =\u003e string;\n\ndeclare const f: T0 | T1;\n\nf\u003cnumber\u003e({ a: 0 }); // Ok, const f: \u003cnumber\u003e(p: A\u003cnumber\u003e | (B \u0026 A\u003cnumber\u003e) | (B \u0026 C) | (A\u003cnumber\u003e \u0026 C)) =\u003e string | number\n```\n\nКроме того, новое поведение отразилось на методе принадлежащему классу `Array`, а именно `forEach`. До версии _v3.3_, в случаях когда операции выполнялись над объектом принадлежащем к объединенному типу определенного массивами принадлежащих к разным типам, итерировать с помощью метода `forEach` над ним можно было лишь после его уточнения.\n\n`````ts\ninterface Bird {\n    kind: 'bird';\n\n    uniqueBirdProp: number;\n}\ninterface Fish {\n    kind: 'fish';\n\n    uniqueFishProp: string;\n}\n\nfunction isBirdAll(animalAll: Bird[] | Fish[]): animalAll is Bird[] {\n    return animalAll[0].kind === 'bird';\n}\n\n/**\n * Параметр принадлежит к объединённому типу определяемого\n * типами массива принадлежащих к типам Bird и Fish\n */\nfunction f(animalAll: Bird[] | Fish[]): void {\n    /**\n     * Уточнение массива с помощью защитника типа\n     */\n    if (isBirdAll(animalAll)) {\n        animalAll.forEach((animal) =\u003e {\n            // param animal is of type Bird\n        });\n    } else {\n        animalAll.forEach((animal) =\u003e {\n            // param animal is of type Fish\n        });\n    }\n}\n```\n\nНачиная с версии _v3.3_ уточнение типа можно выполнять на уровне метода `forEach` -\n\n`````ts\ninterface Bird {\n   kind: \"bird\";\n\n   uniqueBirdProp: number;\n}\ninterface Fish {\n   kind: \"fish\";\n\n   uniqueFishProp: string;\n}\n\n\n\nfunction f( animalAll: Bird[] | Fish[] ): void {\n   animalAll.forEach( ( animal: Bird | Fish ) =\u003e {\n       /**\n        * Уточнение типа на уровне метода forEach\n        */\n       if( animal.kind === 'bird' ) {\n           // param animal is of type Bird\n       }else{\n           // param animal is of type Fish\n       }\n\n```\n","githubFileInfo":{"lastUpdate":1616326333000,"contributorAll":[{"name":"Bohdan Petrov","avatar":"https://avatars.githubusercontent.com/u/35348648?v=4","bio":"Front-end developer","githubUrl":"https://github.com/mindyourlifeguide"},{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Uluchshenie_povedeniya_dlya_tipov_Union_ukazannyh_v_kachestve_parametrov_funkcii","elementId":"Uluchshenie_povedeniya_dlya_tipov_Union_ukazannyh_v_kachestve_parametrov_funkcii","version":{"version":"3.3","dateRelease":"January 31, 2019","datePublication":"January 31, 2019"}}]},"contentNavData":{"key":"3.3","level":0,"index":0,"contentIndex":0,"title":"3.3","path":"3.3","elementId":"3.3","children":[{"key":"Повышение производительности сборки для команды --build --watch_0","level":1,"index":1,"contentIndex":1,"title":"Повышение производительности сборки для команды --build --watch","path":"Povyshenie_proizvoditelnosti_sborki_dlya_komandy_--build_--watch","elementId":"Povyshenie_proizvoditelnosti_sborki_dlya_komandy_--build_--watch"},{"key":"Улучшение поведения для типов Union указанных в качестве параметров функции_1","level":1,"index":2,"contentIndex":2,"title":"Улучшение поведения для типов Union указанных в качестве параметров функции","path":"Uluchshenie_povedeniya_dlya_tipov_Union_ukazannyh_v_kachestve_parametrov_funkcii","elementId":"Uluchshenie_povedeniya_dlya_tipov_Union_ukazannyh_v_kachestve_parametrov_funkcii"}]},"pageNav":{"isPrevPage":true,"isNextPage":true,"prevPage":{"title":"","path":""},"nextPage":{"title":"3.4","path":"3.4"}},"pageDescription":"Обзор нововведений и изменений для версии 3.3"},"__N_SSG":true},"page":"/what-is-new/[version]","query":{"version":"3.3"},"buildId":"RR0kZb73ocCXr1X-8JJkR","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>