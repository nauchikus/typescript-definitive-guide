<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><script async="" type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/be7e0732075170e4249d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/be7e0732075170e4249d.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-0e3c274fd8419109d37b.js" defer=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" defer=""></script><script src="/_next/static/chunks/main-bae6c3d363e548fddd65.js" defer=""></script><script src="/_next/static/chunks/pages/_app-7389b94ba72d4b11a409.js" defer=""></script><script src="/_next/static/chunks/698-debec62034f2b0a49149.js" defer=""></script><script src="/_next/static/chunks/950-89b787edb52e4b1eb040.js" defer=""></script><script src="/_next/static/chunks/222-403d02ae2b812f34e8e4.js" defer=""></script><script src="/_next/static/chunks/460-d0b4dd1b0673465da22c.js" defer=""></script><script src="/_next/static/chunks/450-3794f292ad18c90d4e6b.js" defer=""></script><script src="/_next/static/chunks/763-b007244d3307e1e9232d.js" defer=""></script><script src="/_next/static/chunks/211-767912ba0b0950a1ff12.js" defer=""></script><script src="/_next/static/chunks/649-01db143ae95f432c55f9.js" defer=""></script><script src="/_next/static/chunks/803-3a52e0ed898ec3d6f5af.js" defer=""></script><script src="/_next/static/chunks/pages/what-is-new/%5Bversion%5D-42f39e3bc8875c76ab03.js" defer=""></script><script src="/_next/static/HHRyWr2n18aXlZWOBD_KX/_buildManifest.js" defer=""></script><script src="/_next/static/HHRyWr2n18aXlZWOBD_KX/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="base-layout"><div></div><header class="app-header app-header-grid"><div class="app-header-grid-item__driver-toggle"><button class="app-driver-toggle-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"></path></svg></button></div><div class="app-header-grid-item__logo"><span role="img" tabindex="-1" class="anticon app-logo"><svg id="logo_app_svg__Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 119.45 44" width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><defs><style>.logo_app_svg__cls-2{fill:#1d1d1b}</style></defs><g id="logo_app_svg__logo"><path id="logo_app_svg__logo_t" d="M38.41 3v8.11H25.67v34.1h-9.5V11.08H3.43V3z" transform="translate(-3.43 -2)" fill="#3273b9"></path><path id="logo_app_svg__logo_g" class="logo_app_svg__cls-2" d="M63.7 10.29q-6.63 0-9.6 3.69c-2 2.45-3 5.82-3 10.08a20.23 20.23 0 00.73 5.64 12.6 12.6 0 002.19 4.36 10 10 0 003.66 2.83 12.18 12.18 0 005.12 1c1.06 0 2 0 2.71-.07a13.08 13.08 0 002-.24V22.9h9.51v20.91a37.27 37.27 0 01-5.48 1.43 48.07 48.07 0 01-9.33.76 24.32 24.32 0 01-8.62-1.46A18.13 18.13 0 0147 40.27a19 19 0 01-4.23-6.89 26.92 26.92 0 01-1.49-9.32 25 25 0 011.64-9.39 20.25 20.25 0 014.51-6.91 19.11 19.11 0 016.74-4.3A23.25 23.25 0 0162.42 2a34 34 0 015.4.39 34.4 34.4 0 014.18.92 18.52 18.52 0 012.87 1.07 18 18 0 011.61.85l-2.78 7.62a24.88 24.88 0 00-4.48-1.8 19 19 0 00-5.52-.76z" transform="translate(-3.43 -2)"></path><path id="logo_app_svg__logo_d" class="logo_app_svg__cls-2" d="M122.88 24.06a24.63 24.63 0 01-1.71 9.57 17.6 17.6 0 01-4.84 6.76 20.69 20.69 0 01-7.65 4 35.63 35.63 0 01-10.12 1.34q-2.55 0-6-.22a48 48 0 01-6.7-.88V3.52a56.55 56.55 0 016.85-.82q3.57-.21 6.13-.21a36.72 36.72 0 019.84 1.22 20.22 20.22 0 017.59 3.83 17.06 17.06 0 014.87 6.71 25.33 25.33 0 011.74 9.81zM95.39 37.47q.67.06 1.56.09t2.1 0q7.13 0 10.57-3.59t3.45-9.94q0-6.64-3.29-10.06t-10.43-3.38h-2a16.72 16.72 0 00-2 .16z" transform="translate(-3.43 -2)"></path></g></svg></span></div><div class="app-header-grid-item__search"><form class="search" autoComplete="off" action="#"><button class="search__submit-button-placeholder button-with-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon search__search-svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></button><input type="search" class="search__query-input" id="algolia-search" name="app-search-query" placeholder="search..." required=""/></form></div><div class="app-header-grid-item__secondary-bar"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="app-header-grid-item__primary-bar"><div class="dropdown app-nav__dropdown"><button class="dropdown__toggle app-nav__dropdown-toggle_adaptive"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></button><div class="dropdown__menu app-nav__dropdown-menu_adaptive"><div class="flat-panel"><div class="app-nav__link-bar app-nav__link-bar_adaptive"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="divide-full_x app-nav__divide_adaptive"></div><div class="app-nav__nav"><nav class="app-nav"><ul class="menu app-nav__menu_adaptive"><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/">Главная</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/book/chapters">Оглавление</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/what-is-new">Что нового?</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/pdf">Скачать Pdf</a></li></ul></nav></div></div></div></div></div></header><div class="layer slide-layer" toggle="false"><div class="slide-layer__driver"><div class="slide-layer__fixed-driver"><div class="driver"><div class="layer driver-content-nav"><ul class="ant-menu ant-menu-root ant-menu-inline ant-menu-light driver-content-nav__menu" role="menu" tabindex="0" data-menu-list="true"> /// TODO: [refactoring]<li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">Содержание</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.4#Analiz_potoka_dlya_rezultata_uslovnogo_vyrajeniya">Анализ потока для результата условного выражения</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.4#Tipy_symbol_i_literal_template_string_v_indeksnoi_signature">Типы symbol и literal template string в индексной сигнатуре</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.4#Izmenenie_tipa_oshibki_v_bloke_catch_i_flag_--useUnknownInCatchVariables">Изменение типа ошибки в блоке catch и флаг --useUnknownInCatchVariables</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.4#Tipy_neobyazatelnyh_svoistv_teper_bolee_tochnye">Типы необязательных свойств теперь более точные</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.4#Staticheskie_bloki_v_klassah">Статические блоки в классах</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.4#Modernizaciya_vyvoda_tsc_--help">Модернизация вывода tsc --help</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.4#Uluchshenie_proizvoditelnosti">Улучшение производительности</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.4#[KRITIChESKOE_IZMENENIE]_Izmenenie_povedeniya_konteksta_dlya_funkcii">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение поведения контекста для функций</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.4#[KRITIChESKOE_IZMENENIE]_Izmenenie_proverki_await_dlya_funkcii">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение проверки await для функций</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/what-is-new/4.4#[KRITIChESKOE_IZMENENIE]_Abstraktnye_polya_bolshe_ne_mogut_byt_inicializirovany">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Абстрактные поля больше не могут быть инициализированы</a></span></li></ul></li></ul><div style="display:none" aria-hidden="true"> /// TODO: [refactoring]</div></div></div></div></div><div class="slide-layer__first-empty"></div><div class="slide-layer__content"><div class="content-box"><div class="content-box__page-nav content-box__page-nav_left"><div class="page-nav__bar page-nav__bar_left"><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn"><span role="img" aria-label="left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></span></button></div></div><main id="content" class="content-box__html"><section id="4.4" class="content__section innovation-presenter"><div class="innovation-presenter__info-bar"><div class="innovation-presenter__info-bar__section innovation-presenter__info-bar__section_left"><span class="innovation-presenter__info-bar__section__label">Статус</span><span class="innovation-presenter__info-bar__label_version">release</span></div><div class="innovation-presenter__info-bar__section innovation-presenter__info-bar__section_right"><span class="innovation-presenter__info-bar__section__label">Дата публикации</span><time class="innovation-presenter__info-bar__label_last-update" dateTime="August 26, 2021">August 26, 2021</time></div></div><h1 class="innovation-presenter__title">4.4</h1><div class="innovation-presenter__share-bar"><button aria-label="vk" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#45668e"></circle><path d="M44.94,44.84h-0.2c-2.17-.36-3.66-1.92-4.92-3.37C39.1,40.66,38,38.81,36.7,39c-1.85.3-.93,3.52-1.71,4.9-0.62,1.11-3.29.91-5.12,0.71-5.79-.62-8.75-3.77-11.35-7.14A64.13,64.13,0,0,1,11.6,26a10.59,10.59,0,0,1-1.51-4.49C11,20.7,12.56,21,14.11,21c1.31,0,3.36-.29,4.32.2C19,21.46,19.57,23,20,24a37.18,37.18,0,0,0,3.31,5.82c0.56,0.81,1.41,2.35,2.41,2.14s1.06-2.63,1.1-4.18c0-1.77,0-4-.5-4.9S25,22,24.15,21.47c0.73-1.49,2.72-1.63,5.12-1.63,2,0,4.84-.23,5.62,1.12s0.25,3.85.2,5.71c-0.06,2.09-.41,4.25,1,5.21,1.09-.12,1.68-1.2,2.31-2A28,28,0,0,0,41.72,24c0.44-1,.91-2.65,1.71-3,1.21-.47,3.15-0.1,4.92-0.1,1.46,0,4.05-.41,4.52.61,0.39,0.85-.75,3-1.1,3.57a61.88,61.88,0,0,1-4.12,5.61c-0.58.78-1.78,2-1.71,3.27,0.05,0.94,1,1.67,1.71,2.35a33.12,33.12,0,0,1,3.92,4.18c0.47,0.62,1.5,2,1.4,2.76C52.66,45.81,46.88,44.24,44.94,44.84Z" fill="white"></path></svg></button><button aria-label="facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#3b5998"></circle><path d="M34.1,47V33.3h4.6l0.7-5.3h-5.3v-3.4c0-1.5,0.4-2.6,2.6-2.6l2.8,0v-4.8c-0.5-0.1-2.2-0.2-4.1-0.2 c-4.1,0-6.9,2.5-6.9,7V28H24v5.3h4.6V47H34.1z" fill="white"></path></svg></button><button aria-label="twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#00aced"></circle><path d="M48,22.1c-1.2,0.5-2.4,0.9-3.8,1c1.4-0.8,2.4-2.1,2.9-3.6c-1.3,0.8-2.7,1.3-4.2,1.6 C41.7,19.8,40,19,38.2,19c-3.6,0-6.6,2.9-6.6,6.6c0,0.5,0.1,1,0.2,1.5c-5.5-0.3-10.3-2.9-13.5-6.9c-0.6,1-0.9,2.1-0.9,3.3 c0,2.3,1.2,4.3,2.9,5.5c-1.1,0-2.1-0.3-3-0.8c0,0,0,0.1,0,0.1c0,3.2,2.3,5.8,5.3,6.4c-0.6,0.1-1.1,0.2-1.7,0.2c-0.4,0-0.8,0-1.2-0.1 c0.8,2.6,3.3,4.5,6.1,4.6c-2.2,1.8-5.1,2.8-8.2,2.8c-0.5,0-1.1,0-1.6-0.1c2.9,1.9,6.4,2.9,10.1,2.9c12.1,0,18.7-10,18.7-18.7 c0-0.3,0-0.6,0-0.8C46,24.5,47.1,23.4,48,22.1z" fill="white"></path></svg></button><button aria-label="telegram" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer;outline:none"><svg viewBox="0 0 64 64" width="32" height="32"><circle cx="32" cy="32" r="31" fill="#37aee2"></circle><path d="m45.90873,15.44335c-0.6901,-0.0281 -1.37668,0.14048 -1.96142,0.41265c-0.84989,0.32661 -8.63939,3.33986 -16.5237,6.39174c-3.9685,1.53296 -7.93349,3.06593 -10.98537,4.24067c-3.05012,1.1765 -5.34694,2.05098 -5.4681,2.09312c-0.80775,0.28096 -1.89996,0.63566 -2.82712,1.72788c-0.23354,0.27218 -0.46884,0.62161 -0.58825,1.10275c-0.11941,0.48114 -0.06673,1.09222 0.16682,1.5716c0.46533,0.96052 1.25376,1.35737 2.18443,1.71383c3.09051,0.99037 6.28638,1.93508 8.93263,2.8236c0.97632,3.44171 1.91401,6.89571 2.84116,10.34268c0.30554,0.69185 0.97105,0.94823 1.65764,0.95525l-0.00351,0.03512c0,0 0.53908,0.05268 1.06412,-0.07375c0.52679,-0.12292 1.18879,-0.42846 1.79109,-0.99212c0.662,-0.62161 2.45836,-2.38812 3.47683,-3.38552l7.6736,5.66477l0.06146,0.03512c0,0 0.84989,0.59703 2.09312,0.68132c0.62161,0.04214 1.4399,-0.07726 2.14229,-0.59176c0.70766,-0.51626 1.1765,-1.34683 1.396,-2.29506c0.65673,-2.86224 5.00979,-23.57745 5.75257,-27.00686l-0.02107,0.08077c0.51977,-1.93157 0.32837,-3.70159 -0.87096,-4.74991c-0.60054,-0.52152 -1.2924,-0.7498 -1.98425,-0.77965l0,0.00176zm-0.2072,3.29069c0.04741,0.0439 0.0439,0.0439 0.00351,0.04741c-0.01229,-0.00351 0.14048,0.2072 -0.15804,1.32576l-0.01229,0.04214l-0.00878,0.03863c-0.75858,3.50668 -5.15554,24.40802 -5.74203,26.96472c-0.08077,0.34417 -0.11414,0.31959 -0.09482,0.29852c-0.1756,-0.02634 -0.50045,-0.16506 -0.52679,-0.1756l-13.13468,-9.70175c4.4988,-4.33199 9.09945,-8.25307 13.744,-12.43229c0.8218,-0.41265 0.68483,-1.68573 -0.29852,-1.70681c-1.04305,0.24584 -1.92279,0.99564 -2.8798,1.47502c-5.49971,3.2626 -11.11882,6.13186 -16.55882,9.49279c-2.792,-0.97105 -5.57873,-1.77704 -8.15298,-2.57601c2.2336,-0.89555 4.00889,-1.55579 5.75608,-2.23009c3.05188,-1.1765 7.01687,-2.7042 10.98537,-4.24067c7.94051,-3.06944 15.92667,-6.16346 16.62028,-6.43037l0.05619,-0.02283l0.05268,-0.02283c0.19316,-0.0878 0.30378,-0.09658 0.35471,-0.10009c0,0 -0.01756,-0.05795 -0.00351,-0.04566l-0.00176,0zm-20.91715,22.0638l2.16687,1.60145c-0.93418,0.91311 -1.81743,1.77353 -2.45485,2.38812l0.28798,-3.98957" fill="white"></path></svg></button></div></section><section id="Analiz_potoka_dlya_rezultata_uslovnogo_vyrajeniya" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">9/21/2021</span></div></div></aside><h2 class="content__heading">Анализ потока для результата условного выражения</h2>
<p>ДЛя конкретизации типа очень часто приходится прибегать к такому механизму, как <code class="content__code_inline">защитники типа</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span>param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">unknown</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">typeof</span><span> param </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&quot;string&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:slategray">// компилятор понимает, что в этом блоке кода param принадлежит к типу string</span><span>
</span><span>        param</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toLocaleLowerCase</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Поскольку анализ потока управления понимает, к какому типу принадлежит идентификатор параметра в конкретном блоке кода, механизм прекрасно справляется со своей задачей, но все же у него существует один значительный недостаток - результат проверки нельзя вынести за пределы условного выражения.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span>param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">unknown</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> isString </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">typeof</span><span> param </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&quot;string&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span>isString</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        param</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toLocaleLowerCase</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ошибка! Компилятор не понимает, что param принадлежит к типу string</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Особенно этот досадный факт заметен при многократном использовании механизма защитника типа.
По этой причине, начиная с текущей версии, поведение анализа потока управления было переработано таким образом, чтобы механизм защитника типа полноценно работал с результатами выражений выполненных вне условных конструкций. Единственное условие заключается в том, что значение условного выражение должно быть неизменяемо, то есть ассоциировано с <code class="content__code_inline">const</code> или <code class="content__code_inline">readonly</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span>param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">unknown</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> isString </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">typeof</span><span> param </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&quot;string&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span>isString</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        param</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toLocaleLowerCase</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok - начиная с версии 4.4!</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Стоит заметить, что новый механизм справляется и с более сложными условиями, как например проверка существования значений множества параметров функции.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span>p0</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token nil" style="color:#07a">undefined</span><span class="token" style="color:#999">,</span><span> p1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token nil" style="color:#07a">undefined</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:slategray">// Выполняем проверку на существование значения обоих параметров</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> isParamsExists </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> p0 </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&amp;&amp;</span><span> p1</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span>isParamsExists</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        p0</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toLocaleLowerCase</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span>        p1</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">toLocaleLowerCase</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span>        </span><span class="token" style="color:slategray">// Ошибки не возникаетпоскольку помилятор понимает, что isParamsExists содержится результат подтверждающие наличие значения у обоих параметров</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Помимо этого, новый анализ работает <em>транзитивно</em>, то есть, компилятор будет &quot;распутывать&quot; цепочку выполненных проверок.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span>param</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#690">number</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> isString </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">typeof</span><span> param </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&quot;string&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> isNumber </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">typeof</span><span> param </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&quot;number&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">const</span><span> isStringOrNumber </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> isString </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">||</span><span> isNumber</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span>isStringOrNumber</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        param</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// string | number</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">else</span><span class="token" style="color:#999">{</span><span>
</span><span>        param</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// boolean</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Этот механизм отлично справляется и с <code class="content__code_inline">дескременантными объединениями</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Animal</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> 
</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#999">{</span><span>kind</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;bird&quot;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:#DD4A68">fly</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span class="token" style="color:#999">}</span><span>
</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#999">{</span><span>kind</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;fish&quot;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:#DD4A68">swim</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">move</span><span class="token" style="color:#999">(</span><span>animal</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Animal</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> isBird </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> animal</span><span class="token" style="color:#999">.</span><span class="token property-access">kind</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&quot;bird&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span>isBird</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        animal</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">fly</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">else</span><span class="token" style="color:#999">{</span><span>
</span><span>        animal</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">swim</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Относительно дискриминантных объединений этот механизм остается работать даже при использовании объектной деструктуризации.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Animal</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> 
</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#999">{</span><span>kind</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;bird&quot;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:#DD4A68">fly</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span class="token" style="color:#999">}</span><span>
</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#999">{</span><span>kind</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;fish&quot;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:#DD4A68">swim</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">move</span><span class="token" style="color:#999">(</span><span>animal</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Animal</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#999">{</span><span>kind</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> animal</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span>kind </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">===</span><span> </span><span class="token" style="color:#690">&quot;bird&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        animal</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">fly</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">else</span><span class="token" style="color:#999">{</span><span>
</span><span>        animal</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">swim</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Tipy_symbol_i_literal_template_string_v_indeksnoi_signature" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">9/21/2021</span></div></div></aside><h2 class="content__heading">Типы symbol и literal template string в индексной сигнатуре</h2>
<p>Начиная с текущей версии <em>TypeScript</em> позволяет указывать в <em>индексной сигнатуре</em> такие типы, как <code class="content__code_inline">symbol</code> и <code class="content__code_inline">literal template string</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// Пример для symbol</span><span>
</span>
<span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Colors</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">[</span><span>color</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">symbol</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> red </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Symbol</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&#x27;red&#x27;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">const</span><span> colors</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Colors</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>colors</span><span class="token" style="color:#999">[</span><span>red</span><span class="token" style="color:#999">]</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">255</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> redColorValue </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> colors</span><span class="token" style="color:#999">[</span><span>red</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// const redColorValue: number</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// пример для literal template string</span><span>
</span>
<span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Attrs</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    width</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span>    height</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#999">[</span><span>dataAttr</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">data-</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">${</span><span class="token template-string interpolation" style="color:#690">string</span><span class="token template-string interpolation interpolation-punctuation" style="color:#999">}</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<!-- -->
<span></span><span class="token" style="color:#07a">const</span><span> attrs</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Attrs</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    width</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">,</span><span>
</span><span>    height</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">100</span><span class="token" style="color:#999">,</span><span>
</span>
<span>    </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;data-color&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;#fff&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span>    </span><span class="token" style="color:#999">[</span><span class="token" style="color:#690">&quot;bibbody-bobbody&quot;</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&quot;vzhuh&quot;</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:slategray">// Error</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Помимо этого, для множественного объявления индексной сигнатуры был добавлен так называемый <em>синтаксический сахар</em> в лице типа <code class="content__code_inline">union</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// эта конструкция автоматически будети преобразована в...</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">[</span><span>field</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// ...эту конструкцию.</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T0</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">[</span><span>field</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">[</span><span>field</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">]</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Izmenenie_tipa_oshibki_v_bloke_catch_i_flag_--useUnknownInCatchVariables" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">9/21/2021</span></div></div></aside><h2 class="content__heading">Изменение типа ошибки в блоке catch и флаг --useUnknownInCatchVariables</h2>
<p>Поскольку с помощью <code class="content__code_inline">throw</code> может быть выброшено исключение любого типа, в ранних версиях <em>TypeScript</em> ошибка из блока <code class="content__code_inline">catch</code> принадлежала к типу <code class="content__code_inline">any</code>. Но так как тип <code class="content__code_inline">any</code> позволяет обращаться в коде к несуществующим членам объекта, это может привести к ошибкам вовремя выполнения.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// ранние версии </span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">throw</span><span> </span><span class="token" style="color:#905">5</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// выкидываем код исключения...</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token control-flow" style="color:#07a">try</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">catch</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:slategray">// error: any</span><span>
</span><span>    </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">log</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#999">.</span><span class="token property-access">message</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// ...но по ошибке обращаемся к свойству message определенного в объекте Error</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Поэтому, начиная с текущей версии, тип ошибки в блоке <code class="content__code_inline">catch</code> изменили с типа <code class="content__code_inline">any</code>, на тип <code class="content__code_inline">unknown</code>, а для сохранения старого поведения ввели новый флаг компилятора <code class="content__code_inline">--useUnknownInCatchVariables</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">throw</span><span> </span><span class="token" style="color:#905">5</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// выкидываем код исключения...</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token control-flow" style="color:#07a">try</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">catch</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:slategray">// error: unknown</span><span>
</span><span>    </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">log</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#999">.</span><span class="token property-access">message</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// ... Error поскольку у типа unknown нет свойства message</span><span>
</span>    
<span>    </span><span class="token" style="color:slategray">// требуется явное выяснение принадлежности к типу</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span>error </span><span class="token" style="color:#07a">instanceof</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Error</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">log</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#999">.</span><span class="token property-access">message</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok </span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Помимо того, что существует возможность вернуть тип <code class="content__code_inline">any</code> глобально при помощи флага <code class="content__code_inline">--useUnknownInCatchVariables</code> входящего в группировку <code class="content__code_inline">strict</code>, его также можно изменить в строго заданных местах, при помощи явного указания.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">throw</span><span> </span><span class="token" style="color:#905">5</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// выкидываем код исключения...</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token control-flow" style="color:#07a">try</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">catch</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">any</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">log</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#999">.</span><span class="token property-access">message</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// ... Ok на этапе компиляции, но ошибка возникнет во время выполнения!</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Tipy_neobyazatelnyh_svoistv_teper_bolee_tochnye" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">9/21/2021</span></div></div></aside><h2 class="content__heading">Типы необязательных свойств теперь более точные</h2>
<p>В <em>TypeScript</em> необязательное поле объекта расценивается, как тип объединение включающего тип <code class="content__code_inline">undefined</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// это тип рассматривается, как...</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// ...как этот тип</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token nil" style="color:#07a">undefined</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Это означает, что необязательному полю объекта, помимо значения принадлежащего к конкретному типу, можно также присвоить значение <code class="content__code_inline">undefined</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">let</span><span> o</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">5</span><span class="token" style="color:#999">,</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token nil" style="color:#07a">undefined</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Но поскольку значение <code class="content__code_inline">undefined</code> присвоенное полю объекта далеко не то же самое, что отсутствие члена вовсе, при котором также возвращается <code class="content__code_inline">undefined</code>, начиная с текущей версии, при активации нового флага <code class="content__code_inline">--exactOptionalPropertyTypes</code>, в подобных случаях будут возникать ошибки.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">let</span><span> o</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    a</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">5</span><span class="token" style="color:#999">,</span><span>
</span><span>    b</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token nil" style="color:#07a">undefined</span><span> </span><span class="token" style="color:slategray">// Error -&gt; Type &#x27;undefined&#x27; is not assignable to type &#x27;string&#x27;.ts(2322)</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Staticheskie_bloki_v_klassah" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">9/21/2021</span></div></div></aside><h2 class="content__heading">Статические блоки в классах</h2>
<p>Вслед за спецификацией <em>ECMAScript</em>, <em>TypeScript</em> реализует механизм обозначаемый, как <code class="content__code_inline">статические классовые блоки</code>, которые позволяют работать со статическими членами в момент определения самого класса.
Статические блоки объявляются при помощи ключевого слова <code class="content__code_inline">static</code> после которого следуют открывающая и закрывающая фигурная скобка <code class="content__code_inline">{}</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:slategray">// статический блок</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:slategray">// здесь можно выполнять обращение к статическим членам класса</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Operators</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> #isLock </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">get</span><span> </span><span class="token" style="color:#DD4A68">isLock</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token maybe-class-name">Operators</span><span class="token" style="color:#999">.</span><span class="token property-access">#isLock</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">readonly</span><span> </span><span class="token maybe-class-name">Plus</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Operators</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;+&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">readonly</span><span> </span><span class="token maybe-class-name">Minus</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Operators</span><span class="token" style="color:#999">(</span><span class="token" style="color:#690">&quot;-&quot;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>    </span><span class="token" style="color:slategray">// статический блок</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token maybe-class-name">Operators</span><span class="token" style="color:#999">.</span><span class="token property-access">#isLock</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">readonly</span><span> operator</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span class="token maybe-class-name">Operators</span><span class="token" style="color:#999">.</span><span class="token property-access">isLock</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token control-flow" style="color:#07a">throw</span><span> </span><span class="token" style="color:#690">&quot;creating instances is prohibited!&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Поскольку статический блок является обычным блоком кода, его объявление создает уникальную только для него лексическую область, а также позволяет объявлять внутри себя любые синтаксические конструкции, как например <code class="content__code_inline">const</code>, <code class="content__code_inline">if</code> или <code class="content__code_inline">try/catch</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">VALUE</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">8080</span><span class="token" style="color:#999">;</span><span>
</span>
<span>        </span><span class="token control-flow" style="color:#07a">if</span><span class="token" style="color:#999">(</span><span class="token doc-comment" style="color:slategray">/**some condition */</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span>    
<span>        </span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">else</span><span class="token" style="color:#999">{</span><span>
</span>    
<span>        </span><span class="token" style="color:#999">}</span><span>
</span>    
<span>        </span><span class="token control-flow" style="color:#07a">try</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token" style="color:slategray">// ...</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span class="token control-flow" style="color:#07a">catch</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token" style="color:slategray">// ...</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>К тому же, тело одного класса может включать произвольное количество статических блоков, которые будут выполняться в порядке объявления.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">log</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">log</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span>    </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">log</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">2</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * console output
</span><span class="token doc-comment" style="color:slategray"> * &gt; 0
</span><span class="token doc-comment" style="color:slategray"> * &gt; 1
</span><span class="token doc-comment" style="color:slategray"> * &gt; 2
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Modernizaciya_vyvoda_tsc_--help" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">9/21/2021</span></div></div></aside><h2 class="content__heading">Модернизация вывода tsc --help</h2>
<p>Вывод информации в консоль подвергся значительному улучшению. Теперь он стал более информативным и понятным.</p></section><section id="Uluchshenie_proizvoditelnosti" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">9/21/2021</span></div></div></aside><h2 class="content__heading">Улучшение производительности</h2>
<p>В текущей версии значительное ускорение получили такие механизмы, как - генерация деклараций <code class="content__code_inline">.d.ts</code>, нормализация путей, отображение путей, инкрементальные сборки <code class="content__code_inline">--incremental</code>, создание карты, а также быстрые сборки <code class="content__code_inline">--force</code>.
Кроме этого, появился механизм подсказок предназначенный для работы с <code class="content__code_inline">.js</code> файлами, подсказок по коду, а также отображение истинных путей при автоимпорте.</p></section><section id="[KRITIChESKOE_IZMENENIE]_Izmenenie_povedeniya_konteksta_dlya_funkcii" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">9/21/2021</span></div></div></aside><h2 class="content__heading">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение поведения контекста для функций</h2>
<p>До текущей версии, ключевое слово <code class="content__code_inline">this</code> внутри функций объявленных в литерале объекта, при компиляции в модули <code class="content__code_inline">CommonJs</code> или <code class="content__code_inline">AMD</code>, ссылалось на сам объект.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// раньше</span><span>
</span>
<span></span><span class="token" style="color:#07a">let</span><span> o </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">log</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span>o</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// o</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Начиная с текущей версии поведение измененно на то, что присуще <code class="content__code_inline">es</code> модулям.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// теперь</span><span>
</span>
<span></span><span class="token" style="color:#07a">let</span><span> o </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token console" style="color:#DD4A68">console</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">log</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span>o</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">f</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// f</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="[KRITIChESKOE_IZMENENIE]_Izmenenie_proverki_await_dlya_funkcii" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">9/21/2021</span></div></div></aside><h2 class="content__heading">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение проверки await для функций</h2>
<p>До текущей версии <em>TypeScript</em> всеми силами старался не допускать ошибок вызываемых вызовом асинхронных функций без ключевого слова <code class="content__code_inline">await</code>. Но механизм был реализован не полностью, поскольку работал только при сохранении результата вызова асинхронной функции в переменную.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// До теккущей версии</span><span>
</span>
<span></span><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">validate</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Promise</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">a</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Promise</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#690">string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> isExpressionValid </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">validate</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>    </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">     * [*] This condition will always return true since this &#x27;Promise&lt;boolean&gt;&#x27; is always defined.ts(2801)
</span><span class="token doc-comment" style="color:slategray">     */</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span>isExpressionValid</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:slategray">// [*]</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#690">&quot;true&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#690">&quot;false&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Однако при вызове асинхронной функции без указания ключевого слова <code class="content__code_inline">await</code> непосредственно в условном выражении ошибки не возникало.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">validate</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Promise</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#905">false</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">async</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#DD4A68">a</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Promise</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#690">string</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> isExpressionValid </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">validate</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>    </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">     * [*]
</span><span class="token doc-comment" style="color:slategray">     * Ok до текущей версии
</span><span class="token doc-comment" style="color:slategray">     * Начиная с текущей версии - 
</span><span class="token doc-comment" style="color:slategray">     * This condition will always return true since this &#x27;Promise&lt;boolean&gt;&#x27; is always defined.ts(2801)
</span><span class="token doc-comment" style="color:slategray">     */</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">if</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#DD4A68">validate</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:slategray">// [*]</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#690">&quot;true&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#690">&quot;false&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Поэтому начиная с текущей версии анализ относительно вызова асинхронных функций был существенно доработан.</p></section><section id="[KRITIChESKOE_IZMENENIE]_Abstraktnye_polya_bolshe_ne_mogut_byt_inicializirovany" class="content__section"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">9/21/2021</span></div></div></aside><h2 class="content__heading">[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Абстрактные поля больше не могут быть инициализированы</h2>
<p>Начиная с текущей версии поля класса модифицированные ключевым словом <code class="content__code_inline">abstract</code> не могут быть инициализированы.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">abstract</span><span> </span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">     * Ok раньше и
</span><span class="token doc-comment" style="color:slategray">     * Error теперь -
</span><span class="token doc-comment" style="color:slategray">     * Property &#x27;field&#x27; cannot have an initializer because it is marked abstract.(1267)
</span><span class="token doc-comment" style="color:slategray">     */</span><span>
</span><span>    </span><span class="token" style="color:#07a">abstract</span><span> field </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">5</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok раньше и Error начиная с этой версии</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Теперь, абстрактные поля ограничиваются одним лишь объявлением с указанием типа.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">abstract</span><span> </span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">abstract</span><span> field</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><aside class="content-box__page__content-bar_post"><nav class="post-content-bar__nav"><a href="4.3" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_prev"><div class="post-content-bar__nav__btn_padding-fix"><span role="img" aria-label="arrow-left" class="anticon anticon-arrow-left post-content-bar__nav__btn__icon_prev"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"></path></svg></span><span class="post-content-bar__nav__btn__label">4.3</span></div></a><a href="" disabled="" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_next"><div class="post-content-bar__nav__btn_padding-fix"><span class="post-content-bar__nav__btn__label"></span><span role="img" aria-label="arrow-right" class="anticon anticon-arrow-right post-content-bar__nav__btn__icon_next"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"></path></svg></span></div></a></nav></aside></main><div class="content-box__page-nav content-box__page-nav_right"><div class="page-nav__bar page-nav__bar_right"><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="up" class="anticon anticon-up"><svg viewBox="64 64 896 896" focusable="false" data-icon="up" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"></path></svg></span></button></span><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn page-nav__btn_next-page ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></button></span><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></button></span></div></div></div></div><div class="slide-layer__last-empty"></div></div><footer class="app-footer"><div class="app-footer__empty"></div><div class="app-footer_contacts app-footer__section"></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"innovationPage":{"key":"4.4_10","title":"4.4","path":"4.4","coverUrl":"https://github.com/nauchikus/typescript-definitive-guide/raw/master/what-is-new/4.4/metadata/cover.png","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"},"sections":[{"key":"4.4_7","title":"Анализ потока для результата условного выражения","tags":["Нововведение"],"markdown":"## Анализ потока для результата условного выражения\n\nДЛя конкретизации типа очень часто приходится прибегать к такому механизму, как `защитники типа`.\n\n`````ts\nfunction f(param: unknown) {\n    if(typeof param === \"string\"){\n        // компилятор понимает, что в этом блоке кода param принадлежит к типу string\n        param.toLocaleLowerCase();\n    }\n}\n`````\n\nПоскольку анализ потока управления понимает, к какому типу принадлежит идентификатор параметра в конкретном блоке кода, механизм прекрасно справляется со своей задачей, но все же у него существует один значительный недостаток - результат проверки нельзя вынести за пределы условного выражения.\n\n`````ts\nfunction f(param: unknown) {\n    const isString = typeof param === \"string\";\n\n    if(isString){\n        param.toLocaleLowerCase(); // Ошибка! Компилятор не понимает, что param принадлежит к типу string\n    }\n}\n`````\n\nОсобенно этот досадный факт заметен при многократном использовании механизма защитника типа.\nПо этой причине, начиная с текущей версии, поведение анализа потока управления было переработано таким образом, чтобы механизм защитника типа полноценно работал с результатами выражений выполненных вне условных конструкций. Единственное условие заключается в том, что значение условного выражение должно быть неизменяемо, то есть ассоциировано с `const` или `readonly`.\n\n`````ts\nfunction f(param: unknown) {\n    const isString = typeof param === \"string\";\n\n    if(isString){\n        param.toLocaleLowerCase(); // Ok - начиная с версии 4.4!\n    }\n}\n`````\n\nСтоит заметить, что новый механизм справляется и с более сложными условиями, как например проверка существования значений множества параметров функции.\n\n`````ts\nfunction f(p0: string | undefined, p1: string | undefined) {\n    // Выполняем проверку на существование значения обоих параметров\n    const isParamsExists = p0 \u0026\u0026 p1;\n\n    if(isParamsExists){\n        p0.toLocaleLowerCase(); // Ok\n        p1.toLocaleLowerCase(); // Ok\n        // Ошибки не возникаетпоскольку помилятор понимает, что isParamsExists содержится результат подтверждающие наличие значения у обоих параметров\n    }\n}\n`````\n\nПомимо этого, новый анализ работает _транзитивно_, то есть, компилятор будет \"распутывать\" цепочку выполненных проверок.\n\n`````ts\nfunction f(param: string | number | boolean) {\n    const isString = typeof param === \"string\";\n    const isNumber = typeof param === \"number\";\n\n    const isStringOrNumber = isString || isNumber;\n\n    if(isStringOrNumber){\n        param; // string | number\n    }else{\n        param; // boolean\n    }\n}\n`````\n\nЭтот механизм отлично справляется и с `дескременантными объединениями`.\n\n`````ts\ntype Animal = \n | {kind: \"bird\"; fly(): void;}\n | {kind: \"fish\"; swim(): void;}\n\nfunction move(animal: Animal){\n    const isBird = animal.kind === \"bird\";\n\n    if(isBird){\n        animal.fly();\n    }else{\n        animal.swim();\n    }\n}\n`````\n\nОтносительно дискриминантных объединений этот механизм остается работать даже при использовании объектной деструктуризации.\n\n`````ts\ntype Animal = \n | {kind: \"bird\"; fly(): void;}\n | {kind: \"fish\"; swim(): void;}\n\nfunction move(animal: Animal){\n    const {kind} = animal;\n\n    if(kind === \"bird\"){\n        animal.fly();\n    }else{\n        animal.swim();\n    }\n}\n`````\n","githubFileInfo":{"lastUpdate":1632215954000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Analiz_potoka_dlya_rezultata_uslovnogo_vyrajeniya","elementId":"Analiz_potoka_dlya_rezultata_uslovnogo_vyrajeniya","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"}},{"key":"4.4_1","title":"Типы symbol и literal template string в индексной сигнатуре","tags":["Нововведение"],"markdown":"## Типы symbol и literal template string в индексной сигнатуре\n\nНачиная с текущей версии _TypeScript_ позволяет указывать в _индексной сигнатуре_ такие типы, как `symbol` и `literal template string`.\n\n`````ts\n// Пример для symbol\n\ntype Colors = {\n    [color: symbol]: number;\n}\n\nconst red = Symbol('red');\n\n\nconst colors: Colors = {};\ncolors[red] = 255; // Ok\n\nconst redColorValue = colors[red]; // const redColorValue: number\n`````\n\n`````ts\n// пример для literal template string\n\ntype Attrs = {\n    width: number;\n    height: number;\n\n    [dataAttr: `data-${string}`]: string;\n}\n\n\n\nconst attrs: Attrs = {\n    width: 100,\n    height: 100,\n\n    [\"data-color\"]: \"#fff\", // Ok\n    [\"bibbody-bobbody\"]: \"vzhuh\", // Error\n};\n`````\n\nПомимо этого, для множественного объявления индексной сигнатуры был добавлен так называемый _синтаксический сахар_ в лице типа `union`.\n\n`````ts\n// эта конструкция автоматически будети преобразована в...\ntype T = {\n    [field: string | number]: boolean;\n}\n\n// ...эту конструкцию.\ntype T0 = {\n    [field: string]: boolean;\n    [field: number]: boolean;\n}\n`````","githubFileInfo":{"lastUpdate":1632215954000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Tipy_symbol_i_literal_template_string_v_indeksnoi_signature","elementId":"Tipy_symbol_i_literal_template_string_v_indeksnoi_signature","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"}},{"key":"4.4_3","title":"Изменение типа ошибки в блоке catch и флаг --useUnknownInCatchVariables","tags":["Адаптация"],"markdown":"## Изменение типа ошибки в блоке catch и флаг --useUnknownInCatchVariables\n\nПоскольку с помощью `throw` может быть выброшено исключение любого типа, в ранних версиях _TypeScript_ ошибка из блока `catch` принадлежала к типу `any`. Но так как тип `any` позволяет обращаться в коде к несуществующим членам объекта, это может привести к ошибкам вовремя выполнения.\n\n`````ts\n// ранние версии \n\nfunction f(){\n    throw 5; // выкидываем код исключения...\n}\n\ntry {\n    f();\n}catch(error){ // error: any\n    console.log(error.message); // ...но по ошибке обращаемся к свойству message определенного в объекте Error\n}\n`````\n\nПоэтому, начиная с текущей версии, тип ошибки в блоке `catch` изменили с типа `any`, на тип `unknown`, а для сохранения старого поведения ввели новый флаг компилятора `--useUnknownInCatchVariables`.\n\n`````ts\nfunction f(){\n    throw 5; // выкидываем код исключения...\n}\n\ntry {\n    f();\n}catch(error){ // error: unknown\n    console.log(error.message); // ... Error поскольку у типа unknown нет свойства message\n    \n    // требуется явное выяснение принадлежности к типу\n    if(error instanceof Error){\n        console.log(error.message); // Ok \n    }\n}\n`````\n\nПомимо того, что существует возможность вернуть тип `any` глобально при помощи флага `--useUnknownInCatchVariables` входящего в группировку `strict`, его также можно изменить в строго заданных местах, при помощи явного указания.\n\n`````ts\nfunction f(){\n    throw 5; // выкидываем код исключения...\n}\n\ntry {\n    f();\n}catch(error: any){\n    console.log(error.message); // ... Ok на этапе компиляции, но ошибка возникнет во время выполнения!\n}\n`````","githubFileInfo":{"lastUpdate":1632215954000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Izmenenie_tipa_oshibki_v_bloke_catch_i_flag_--useUnknownInCatchVariables","elementId":"Izmenenie_tipa_oshibki_v_bloke_catch_i_flag_--useUnknownInCatchVariables","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"}},{"key":"4.4_2","title":"Типы необязательных свойств теперь более точные","tags":["Улучшение"],"markdown":"## Типы необязательных свойств теперь более точные\n\nВ _TypeScript_ необязательное поле объекта расценивается, как тип объединение включающего тип `undefined`.\n\n`````ts\n// это тип рассматривается, как...\ntype T = {\n    a: number;\n    b?: string;\n}\n\n// ...как этот тип\ntype T = {\n    a: number;\n    b: string | undefined;\n}\n`````\n\nЭто означает, что необязательному полю объекта, помимо значения принадлежащего к конкретному типу, можно также присвоить значение `undefined`.\n\n`````ts\ntype T = {\n    a: number;\n    b?: string;\n}\n\nlet o: T = {\n    a: 5,\n    b: undefined // Ok\n};\n`````\n\nНо поскольку значение `undefined` присвоенное полю объекта далеко не то же самое, что отсутствие члена вовсе, при котором также возвращается `undefined`, начиная с текущей версии, при активации нового флага `--exactOptionalPropertyTypes`, в подобных случаях будут возникать ошибки.\n\n`````ts\ntype T = {\n    a: number;\n    b?: string;\n}\n\nlet o: T = {\n    a: 5,\n    b: undefined // Error -\u003e Type 'undefined' is not assignable to type 'string'.ts(2322)\n};\n`````","githubFileInfo":{"lastUpdate":1632215954000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Tipy_neobyazatelnyh_svoistv_teper_bolee_tochnye","elementId":"Tipy_neobyazatelnyh_svoistv_teper_bolee_tochnye","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"}},{"key":"4.4_5","title":"Статические блоки в классах","tags":["Улучшение"],"markdown":"## Статические блоки в классах\n\nВслед за спецификацией _ECMAScript_, _TypeScript_ реализует механизм обозначаемый, как `статические классовые блоки`, которые позволяют работать со статическими членами в момент определения самого класса.\nСтатические блоки объявляются при помощи ключевого слова `static` после которого следуют открывающая и закрывающая фигурная скобка `{}`.\n\n`````ts\nclass T {\n    // статический блок\n    static {\n        // здесь можно выполнять обращение к статическим членам класса\n    }\n}\n`````\n\n`````ts\nclass Operators {\n    static #isLock = false;\n\n    static get isLock(){\n        return Operators.#isLock;\n    }\n\n    static readonly Plus = new Operators(\"+\");\n    static readonly Minus = new Operators(\"-\");\n\n\n    // статический блок\n    static {\n        Operators.#isLock = true;\n    }\n\n\n    constructor(readonly operator: string){\n        if(Operators.isLock){\n            throw \"creating instances is prohibited!\";\n        }\n    }\n\n}\n`````\n\nПоскольку статический блок является обычным блоком кода, его объявление создает уникальную только для него лексическую область, а также позволяет объявлять внутри себя любые синтаксические конструкции, как например `const`, `if` или `try/catch`.\n\n`````ts\nclass T {\n    static {\n        const VALUE = 8080;\n\n        if(/**some condition */){\n    \n        }else{\n    \n        }\n    \n        try {\n            // ...\n        }catch(error){\n            // ...\n        }\n    }\n}\n`````\n\nК тому же, тело одного класса может включать произвольное количество статических блоков, которые будут выполняться в порядке объявления.\n\n`````ts\nclass T {\n    static {\n        console.log(0);\n    }\n    static {\n        console.log(1);\n    }\n    static {\n        console.log(2);\n    }\n}\n\n/**\n * console output\n * \u003e 0\n * \u003e 1\n * \u003e 2\n */\n`````","githubFileInfo":{"lastUpdate":1632215954000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Staticheskie_bloki_v_klassah","elementId":"Staticheskie_bloki_v_klassah","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"}},{"key":"4.4_9","title":"Модернизация вывода tsc --help","tags":["Улучшение"],"markdown":"## Модернизация вывода tsc --help\n\nВывод информации в консоль подвергся значительному улучшению. Теперь он стал более информативным и понятным.\n\n","githubFileInfo":{"lastUpdate":1632215954000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Modernizaciya_vyvoda_tsc_--help","elementId":"Modernizaciya_vyvoda_tsc_--help","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"}},{"key":"4.4_4","title":"Улучшение производительности","tags":["Улучшение"],"markdown":"## Улучшение производительности\n\nВ текущей версии значительное ускорение получили такие механизмы, как - генерация деклараций `.d.ts`, нормализация путей, отображение путей, инкрементальные сборки `--incremental`, создание карты, а также быстрые сборки `--force`.\nКроме этого, появился механизм подсказок предназначенный для работы с `.js` файлами, подсказок по коду, а также отображение истинных путей при автоимпорте.","githubFileInfo":{"lastUpdate":1632215954000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"Uluchshenie_proizvoditelnosti","elementId":"Uluchshenie_proizvoditelnosti","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"}},{"key":"4.4_0","title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение поведения контекста для функций","tags":["Критическое изменение"],"markdown":"## [КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение поведения контекста для функций\n\nДо текущей версии, ключевое слово `this` внутри функций объявленных в литерале объекта, при компиляции в модули `CommonJs` или `AMD`, ссылалось на сам объект.\n\n`````ts\n// раньше\n\nlet o = {\n    f(){\n        console.log(this);\n    }\n}\n\no.f(); // o\n`````\n\nНачиная с текущей версии поведение измененно на то, что присуще `es` модулям.\n\n`````ts\n// теперь\n\nlet o = {\n    f(){\n        console.log(this);\n    }\n}\n\no.f(); // f\n`````","githubFileInfo":{"lastUpdate":1632215954000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"[KRITIChESKOE_IZMENENIE]_Izmenenie_povedeniya_konteksta_dlya_funkcii","elementId":"[KRITIChESKOE_IZMENENIE]_Izmenenie_povedeniya_konteksta_dlya_funkcii","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"}},{"key":"4.4_6","title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение проверки await для функций","tags":["Критическое изменение"],"markdown":"## [КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение проверки await для функций\n\nДо текущей версии _TypeScript_ всеми силами старался не допускать ошибок вызываемых вызовом асинхронных функций без ключевого слова `await`. Но механизм был реализован не полностью, поскольку работал только при сохранении результата вызова асинхронной функции в переменную.\n\n`````ts\n// До теккущей версии\n\nasync function validate(): Promise\u003cboolean\u003e {\n    return false;\n}\n\nasync function a(): Promise\u003cstring\u003e {\n    const isExpressionValid = validate();\n\n\n    /**\n     * [*] This condition will always return true since this 'Promise\u003cboolean\u003e' is always defined.ts(2801)\n     */\n    if (isExpressionValid) { // [*]\n        return \"true\";\n    }\n\n\n    return \"false\";\n}\n`````\n\nОднако при вызове асинхронной функции без указания ключевого слова `await` непосредственно в условном выражении ошибки не возникало.\n\n`````ts\nasync function validate(): Promise\u003cboolean\u003e {\n    return false;\n}\n\nasync function a(): Promise\u003cstring\u003e {\n    const isExpressionValid = validate();\n\n\n    /**\n     * [*]\n     * Ok до текущей версии\n     * Начиная с текущей версии - \n     * This condition will always return true since this 'Promise\u003cboolean\u003e' is always defined.ts(2801)\n     */\n    if (validate()) { // [*]\n        return \"true\";\n    }\n\n\n    return \"false\";\n}\n`````\n\nПоэтому начиная с текущей версии анализ относительно вызова асинхронных функций был существенно доработан.\n","githubFileInfo":{"lastUpdate":1632215954000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"[KRITIChESKOE_IZMENENIE]_Izmenenie_proverki_await_dlya_funkcii","elementId":"[KRITIChESKOE_IZMENENIE]_Izmenenie_proverki_await_dlya_funkcii","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"}},{"key":"4.4_8","title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Абстрактные поля больше не могут быть инициализированы","tags":["Критическое изменение"],"markdown":"## [КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Абстрактные поля больше не могут быть инициализированы\n\nНачиная с текущей версии поля класса модифицированные ключевым словом `abstract` не могут быть инициализированы.\n\n`````ts\nabstract class T {\n    /**\n     * Ok раньше и\n     * Error теперь -\n     * Property 'field' cannot have an initializer because it is marked abstract.(1267)\n     */\n    abstract field = 5; // Ok раньше и Error начиная с этой версии\n}\n`````\nТеперь, абстрактные поля ограничиваются одним лишь объявлением с указанием типа.\n\n`````ts\nabstract class T {\n    abstract field: number; // Ok\n}\n`````\n","githubFileInfo":{"lastUpdate":1632215954000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"path":"[KRITIChESKOE_IZMENENIE]_Abstraktnye_polya_bolshe_ne_mogut_byt_inicializirovany","elementId":"[KRITIChESKOE_IZMENENIE]_Abstraktnye_polya_bolshe_ne_mogut_byt_inicializirovany","version":{"version":"4.4","dateRelease":"August 26, 2021","datePublication":"Sep 21, 2021"}}]},"contentNavData":{"key":"4.4","level":0,"index":0,"contentIndex":0,"title":"4.4","path":"4.4","elementId":"4.4","children":[{"key":"Анализ потока для результата условного выражения_0","level":1,"index":1,"contentIndex":1,"title":"Анализ потока для результата условного выражения","path":"Analiz_potoka_dlya_rezultata_uslovnogo_vyrajeniya","elementId":"Analiz_potoka_dlya_rezultata_uslovnogo_vyrajeniya"},{"key":"Типы symbol и literal template string в индексной сигнатуре_1","level":1,"index":2,"contentIndex":2,"title":"Типы symbol и literal template string в индексной сигнатуре","path":"Tipy_symbol_i_literal_template_string_v_indeksnoi_signature","elementId":"Tipy_symbol_i_literal_template_string_v_indeksnoi_signature"},{"key":"Изменение типа ошибки в блоке catch и флаг --useUnknownInCatchVariables_2","level":1,"index":3,"contentIndex":3,"title":"Изменение типа ошибки в блоке catch и флаг --useUnknownInCatchVariables","path":"Izmenenie_tipa_oshibki_v_bloke_catch_i_flag_--useUnknownInCatchVariables","elementId":"Izmenenie_tipa_oshibki_v_bloke_catch_i_flag_--useUnknownInCatchVariables"},{"key":"Типы необязательных свойств теперь более точные_3","level":1,"index":4,"contentIndex":4,"title":"Типы необязательных свойств теперь более точные","path":"Tipy_neobyazatelnyh_svoistv_teper_bolee_tochnye","elementId":"Tipy_neobyazatelnyh_svoistv_teper_bolee_tochnye"},{"key":"Статические блоки в классах_4","level":1,"index":5,"contentIndex":5,"title":"Статические блоки в классах","path":"Staticheskie_bloki_v_klassah","elementId":"Staticheskie_bloki_v_klassah"},{"key":"Модернизация вывода tsc --help_5","level":1,"index":6,"contentIndex":6,"title":"Модернизация вывода tsc --help","path":"Modernizaciya_vyvoda_tsc_--help","elementId":"Modernizaciya_vyvoda_tsc_--help"},{"key":"Улучшение производительности_6","level":1,"index":7,"contentIndex":7,"title":"Улучшение производительности","path":"Uluchshenie_proizvoditelnosti","elementId":"Uluchshenie_proizvoditelnosti"},{"key":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение поведения контекста для функций_7","level":1,"index":8,"contentIndex":8,"title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение поведения контекста для функций","path":"[KRITIChESKOE_IZMENENIE]_Izmenenie_povedeniya_konteksta_dlya_funkcii","elementId":"[KRITIChESKOE_IZMENENIE]_Izmenenie_povedeniya_konteksta_dlya_funkcii"},{"key":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение проверки await для функций_8","level":1,"index":9,"contentIndex":9,"title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Изменение проверки await для функций","path":"[KRITIChESKOE_IZMENENIE]_Izmenenie_proverki_await_dlya_funkcii","elementId":"[KRITIChESKOE_IZMENENIE]_Izmenenie_proverki_await_dlya_funkcii"},{"key":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Абстрактные поля больше не могут быть инициализированы_9","level":1,"index":10,"contentIndex":10,"title":"[КРИТИЧЕСКОЕ ИЗМЕНЕНИЕ] Абстрактные поля больше не могут быть инициализированы","path":"[KRITIChESKOE_IZMENENIE]_Abstraktnye_polya_bolshe_ne_mogut_byt_inicializirovany","elementId":"[KRITIChESKOE_IZMENENIE]_Abstraktnye_polya_bolshe_ne_mogut_byt_inicializirovany"}]},"pageNav":{"isPrevPage":true,"isNextPage":false,"prevPage":{"title":"4.3","path":"4.3"},"nextPage":{"title":"","path":""}}},"__N_SSG":true},"page":"/what-is-new/[version]","query":{"version":"4.4"},"buildId":"HHRyWr2n18aXlZWOBD_KX","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>