<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="og:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="og:description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="nauchikus"/><meta name="twitter:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="twitter:description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><script async="" type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><title>TDG-подробное руководство по языку TypeScript</title><meta name="description" content="Классовые компоненты"/><meta name="og:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="og:description" content="Классовые компоненты"/><meta name="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="nauchikus"/><meta name="twitter:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="twitter:description" content="Классовые компоненты"/><meta name="next-head-count" content="7"/><link rel="preload" href="/_next/static/css/48b3a72d7930fb66ae91.css" as="style"/><link rel="stylesheet" href="/_next/static/css/48b3a72d7930fb66ae91.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-0e3c274fd8419109d37b.js" defer=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" defer=""></script><script src="/_next/static/chunks/main-7096870a72703e216a95.js" defer=""></script><script src="/_next/static/chunks/pages/_app-cc0eb0c7583520f375a7.js" defer=""></script><script src="/_next/static/chunks/452-2343a28788c03f958a4e.js" defer=""></script><script src="/_next/static/chunks/950-86a83352b01b7466f89f.js" defer=""></script><script src="/_next/static/chunks/222-f79b6bb9bf6211af52b8.js" defer=""></script><script src="/_next/static/chunks/460-cf93e771b3da01004124.js" defer=""></script><script src="/_next/static/chunks/763-b007244d3307e1e9232d.js" defer=""></script><script src="/_next/static/chunks/211-d4969ecab0eef9742617.js" defer=""></script><script src="/_next/static/chunks/292-c1729ae84d688b6cecb9.js" defer=""></script><script src="/_next/static/chunks/pages/book/chapters/%5BchapterId%5D-4d0f190399df2fda59ad.js" defer=""></script><script src="/_next/static/JajVSXSx_2DvzUlQKUhlU/_buildManifest.js" defer=""></script><script src="/_next/static/JajVSXSx_2DvzUlQKUhlU/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="base-layout"><div></div><header class="app-header app-header-grid"><div class="app-header-grid-item__driver-toggle"><button class="app-driver-toggle-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"></path></svg></button></div><div class="app-header-grid-item__logo"><span role="img" tabindex="-1" class="anticon app-logo"><svg id="logo_app_svg__Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 118.08 43.32" width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><defs><style>.logo_app_svg__cls-2{fill:#1d1d1b}</style></defs><path d="M38.56 3.3v8H26v33.6h-9.34V11.28H4.12v-8z" transform="translate(-4.12 -2.34)" fill="#3273b9"></path><path class="logo_app_svg__cls-2" d="M81 24.06a24.31 24.31 0 01-1.68 9.42 17.45 17.45 0 01-4.77 6.66 20.38 20.38 0 01-7.52 4 35 35 0 01-10 1.32q-2.53 0-5.88-.21a48 48 0 01-6.61-.87V3.84A55.14 55.14 0 0151.3 3c2.34-.14 4.36-.21 6-.21A36.41 36.41 0 0167 4a19.87 19.87 0 017.5 3.8 16.88 16.88 0 014.79 6.6A25 25 0 0181 24.06zm-27 13.2q.64.06 1.53.09h2.06q7 0 10.41-3.54t3.39-9.78q0-6.54-3.23-9.9T57.81 10.8h-2a18.29 18.29 0 00-1.91.15zM109.05 10.5q-6.54 0-9.45 3.63t-2.91 9.93a19.58 19.58 0 00.73 5.55 12 12 0 002.15 4.29 9.73 9.73 0 003.6 2.79 12 12 0 005 1q1.56 0 2.67-.06a12.66 12.66 0 002-.24V22.92h9.36V43.5a35.26 35.26 0 01-5.4 1.41 47.42 47.42 0 01-9.18.75 23.76 23.76 0 01-8.48-1.44A17.79 17.79 0 0192.61 40a18.75 18.75 0 01-4.17-6.78A26.63 26.63 0 0187 24.06a24.58 24.58 0 011.62-9.24A19.9 19.9 0 0193 8a18.67 18.67 0 016.64-4.23 22.75 22.75 0 018.12-1.44 32.88 32.88 0 015.31.39 33.5 33.5 0 014.08.9 18.93 18.93 0 012.82 1q1.11.54 1.59.84l-2.7 7.5a24.4 24.4 0 00-4.41-1.77 18.76 18.76 0 00-5.4-.69z" transform="translate(-4.12 -2.34)"></path></svg></span></div><div class="app-header-grid-item__search"><form class="search" autoComplete="off" action="#"><button class="search__submit-button-placeholder button-with-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon search__search-svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></button><input type="search" class="search__query-input" id="algolia-search" name="app-search-query" placeholder="search..." required=""/></form></div><div class="app-header-grid-item__secondary-bar"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://t.me/nauchikus" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://github.com/nauchikus/typescript-definitive-guide" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="app-header-grid-item__primary-bar"><div class="dropdown app-nav__dropdown"><button class="dropdown__toggle app-nav__dropdown-toggle_adaptive"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></button><div class="dropdown__menu app-nav__dropdown-menu_adaptive"><div class="flat-panel"><div class="app-nav__link-bar app-nav__link-bar_adaptive"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://t.me/nauchikus" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://github.com/nauchikus/typescript-definitive-guide" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="divide-full_x app-nav__divide_adaptive"></div><div class="app-nav__nav"><nav class="app-nav"><ul class="menu app-nav__menu_adaptive"><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/">Главная</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/book/chapters/">Оглавление</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/what-is-new/">Что нового?</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/pdf/">Скачать Pdf</a></li></ul></nav></div></div></div></div></div></header><div class="layer slide-layer" toggle="false"><div class="slide-layer__driver"><div class="slide-layer__fixed-driver"><div class="driver"><div class="layer driver-content-nav"><ul class="ant-menu ant-menu-root ant-menu-inline ant-menu-light driver-content-nav__menu" role="menu" tabindex="0" data-menu-list="true"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">Содержание</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/book/chapters/Klassovye_komponenty/#Proizvodnye_ot_Component%3CP,S,SS%3E">Производные от Component&lt;P, S, SS&gt;</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/book/chapters/Klassovye_komponenty/#Proizvodnye_ot_PureComponent%3CProps,State,Snapshot%3E">Производные от PureComponent&lt;Props, State, Snapshot&gt;</a></span></li></ul></li></ul><div style="display:none" aria-hidden="true"></div></div></div></div></div><div class="slide-layer__first-empty"></div><div class="slide-layer__content"><div class="content-box"><div class="content-box__page-nav content-box__page-nav_left"><div class="page-nav__bar page-nav__bar_left"><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn"><span role="img" aria-label="left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></span></button></div></div><main id="content" class="content-box__html"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/6/2021</span></div></div></aside><section id="Klassovye_komponenty" class="content__section"><h1 class="content__heading">Классовые компоненты</h1>
<p>Помимо компонентов на основе функций, <em>React</em> позволяет определять компоненты на основе классов, которые, как в случае реализации <em>ловушки для ошибок</em> просто не заменимы. Кроме этого, с ними необходимо познакомиться, так как они являются частью <em>React</em>. Именно поэтому текущая глава полностью посвящена старым добрым классовым компонентам.</p></section><section id="Proizvodnye_ot_Component&lt;P,S,SS&gt;" class="content__section"><h2 class="content__heading">Производные от Component&lt;P, S, SS&gt;</h2>
<p>Пользовательские компоненты построенные на основе классов обязаны расширять базовый обобщенный класс <code class="content__code_inline">Component&lt;Props, State, Snapshot&gt;</code> имеющего три необязательных параметра типа.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Первым делом стоит обратить внимание на первую строку, а именно импорт пространства имен <em>React</em>. Не зависимо используете вы его напрямую или нет, оно обязательно должно быть импортировано, в противном случаи компилятор напомнит об этом с помощью ошибки.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] Забыт импорт пространства
</span><span class="token doc-comment" style="color:slategray"> * имен React в следствии чего в
</span><span class="token doc-comment" style="color:slategray"> * точке [1] возникнет ошибка - 
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * &#x27;React&#x27; refers to a UMD global,
</span><span class="token doc-comment" style="color:slategray"> * but the current file is a module.
</span><span class="token doc-comment" style="color:slategray"> * Consider adding an import instead.ts(2686)
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// [0]</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// [1]</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Кроме того, в нашем примере у метода <code class="content__code_inline">render</code> отсутствует аннотация возвращаемого типа, что на практике даже приветствуется. Но с образовательной точки зрения её указание не принесет никакого вреда.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactNode</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactNode</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>При переопределении производным классом метода <code class="content__code_inline">render</code> в качестве типа возвращаемого значения необходимо указывать тип совместимый с указанным в базовом классе, то есть с типом <code class="content__code_inline">ReactNode</code> поведение и нюансы которого были подробно рассмотрены в главе посвященной функциональным компонентам.</p>
<p>Как говорилось ранее, тип от которого должны наследоваться пользовательские классовые компоненты является обобщенным и имеет три необязательных параметра типа, что и иллюстрирует наш минималистический пример.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] отсутствует передача аргументов типа
</span><span class="token doc-comment" style="color:slategray"> * определенных как Component&lt;Props, State, Snapshot&gt;
</span><span class="token doc-comment" style="color:slategray"> *, что указывает на их необязательность.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token doc-comment" style="color:slategray">/** [0] */</span><span> </span><span class="token" style="color:#999">{</span><span>
</span>    
<span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>В реальных проектах подобное встречается редко, поэтому следующим шагом разберем логику определения типов описывающих пользовательский компонент.</p>
<p>Начнем по порядку, а именно с <code class="content__code_inline">Props</code>. Несмотря на то, что <em>пропсы</em> делятся на обязательные и необязательные, все они по мере необходимости передаются в качестве аргументов конструктора при создании его экземпляра и доступны по ссылке <code class="content__code_inline">this.props</code> (обозначим их как <em>общие пропсы</em>). Тем не менее за инициализацию необязательных пропсов ответственен сам классовый компонент для чего и предусмотренно статическое поле <code class="content__code_inline">defaultProps</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Аннотации в ожидании указания
</span><span class="token doc-comment" style="color:slategray"> * типа.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">readonly</span><span> defaultProps </span><span class="token doc-comment" style="color:slategray">/** [0] */</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span>props </span><span class="token doc-comment" style="color:slategray">/** [1] */</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">super</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Тот факт, что аннотация <code class="content__code_inline">defaultProps</code> предполагает тип представляющий лишь ассоциированное с этим полем значение вынуждает разделить декларацию общих пропсов на два типа <code class="content__code_inline">DefaultProps</code> и <code class="content__code_inline">Props</code>. Ввиду того, что тип <code class="content__code_inline">Props</code> представляет не только обязательные пропсы, но и необязательные, он должен расширять (<code class="content__code_inline">extends</code>) тип <code class="content__code_inline">DefaultProps</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">DefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">DefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">readonly</span><span> defaultProps </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">super</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Не будет лишним упомянуть, что в реальных проектах интерфейс <code class="content__code_inline">Props</code>, помимо <code class="content__code_inline">DefaultProps</code>, очень часто расширяет множество других интерфейсов. В их число входят типы, предоставляемые библиотеками <em>ui</em>, <em>hoc обертками</em> и обычными библиотеками, как например <em>react-router</em> и его тип <code class="content__code_inline">RouteComponentProps&lt;T&gt;</code>.</p>
<p>Поскольку в описании базового класса поле (<code class="content__code_inline">this.props</code>) принадлежит к типу определенного в качестве первого параметра типа, то есть <code class="content__code_inline">Component&lt;Props&gt;</code>, то <code class="content__code_inline">Props</code> необходимо указать в аннотации не только первого параметра конструктора, но и в качестве первого аргумента базового типа. Иначе <code class="content__code_inline">this.props</code> так и останется принадлежать к простому объектному типу <code class="content__code_inline">{}</code> заданному по умолчанию.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">DefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">DefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    duration</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Если не передавать Props в качестве
</span><span class="token doc-comment" style="color:slategray"> * аргумента типа в точке [0], то в точке
</span><span class="token doc-comment" style="color:slategray"> * [1] возникнет ошибка -&gt;
</span><span class="token doc-comment" style="color:slategray"> * Property &#x27;message&#x27; does not exist on type
</span><span class="token doc-comment" style="color:slategray"> * &#x27;Readonly&lt;</span><span class="token doc-comment" style="color:#999">{</span><span class="token doc-comment" style="color:#999">}</span><span class="token doc-comment" style="color:slategray">&gt; &amp; Readonly&lt;</span><span class="token doc-comment" style="color:#999">{</span><span class="token doc-comment" style="color:slategray"> children?: ReactNode; </span><span class="token doc-comment" style="color:#999">}</span><span class="token doc-comment" style="color:slategray">&gt;&#x27;
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#DD4A68"> </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">readonly</span><span> defaultProps </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">Done!</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">super</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>        props</span><span class="token" style="color:#999">.</span><span class="token property-access">message</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">props</span><span class="token" style="color:#999">.</span><span class="token property-access">message</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok [1]</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Как было сказано в теме посвященной функциональным компонентам, что если взять за правило именовать типы пропсов как <code class="content__code_inline">DefaultProps</code> и <code class="content__code_inline">Props</code>, то при необходимости в их импорте непременно возникнет коллизия из-за одинаковых имен. Поэтому принято добавлять к названиям названия самих компонентов <code class="content__code_inline">*DefaultProps</code> и <code class="content__code_inline">*Props</code>. Но поскольку эти типы повсеместно указываются в аннотациях расположенных в теле классового компонента, то подобные имена попросту усложняют понимание кода. Поэтому для исчерпывающих имен необходимо создавать более компактные псевдонимы типа <code class="content__code_inline">type</code>.</p>
<p>Также стоит сразу сказать, что все три типа выступающих в качестве аргументов базового типа нуждаются в более компактных идентификаторах определяемых с помощью псевдонимов. Но, кроме того, все они описывают объекты, мутация которых не предполагается. Простыми словами типы <code class="content__code_inline">Props</code>, <code class="content__code_inline">State</code> и <code class="content__code_inline">Snapshot</code> используются исключительно в аннотациях <code class="content__code_inline">readonly</code> полей класса, параметрах его методов и возвращаемых ими значениях. Поскольку секрет здорового приложения кроется в типобезопасности, всю упомянутую троицу необходимо сделать неизменяемой. Для этого существует специальный тип <code class="content__code_inline">Readonly&lt;T&gt;</code>. Но так как преобразование типов в каждой отдельной аннотации приведет к чрезмерному увеличению кода, необходимо проделать это единожды в определении их псевдонимов.</p>
<p>Посмотрим как новая информация преобразит наш основной пример.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactNode</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Имена интерфейсов получили префикс
</span><span class="token doc-comment" style="color:slategray"> * в виде названия компонента.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerDefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerProps</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerDefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    duration</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Для конкретных типов преобразованных
</span><span class="token doc-comment" style="color:slategray"> * в типы только для чтения
</span><span class="token doc-comment" style="color:slategray"> * определен псевдоним.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">DefaultProps</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerDefaultProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">readonly</span><span> defaultProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">DefaultProps</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">Done!</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">super</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Добавлен экспорт не только самого
</span><span class="token doc-comment" style="color:slategray"> * компонента, но и типа представляющего
</span><span class="token doc-comment" style="color:slategray"> * его основные пропсы.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token exports" style="color:#999">{</span><span class="token exports maybe-class-name">TimerProps</span><span class="token exports" style="color:#999">}</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// экспортируем типа *Props</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Также стоит упомянуть, что пропсы всех компонентов по умолчанию имеют определение необязательного (объявленного с модификатором <code class="content__code_inline">?:</code>) поля <code class="content__code_inline">children</code> принадлежащего к оговоренному ранее типу <code class="content__code_inline">ReactNode</code>. Простыми словами можно вообще не передавать аргументы базовому типу и компилятор не выдаст ошибку при обращении к полю <code class="content__code_inline">this.props.children</code>;</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Label</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>                    </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>h1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">props</span><span class="token" style="color:#999">.</span><span class="token property-access">children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>h1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] несмотря на то, что базовому
</span><span class="token doc-comment" style="color:slategray"> * типу не были установлены аргумента типа
</span><span class="token doc-comment" style="color:slategray"> * обращение к свойству children не вызывает
</span><span class="token doc-comment" style="color:slategray"> * ошибки поскольку данное свойство определенно
</span><span class="token doc-comment" style="color:slategray"> * в базовом типе.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;label&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// string as children -&gt; Ok [1]</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">1000</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// number as children -&gt; Ok [2]</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// undefined as children -&gt; Ok [3]</span><span>
</span>
<span> </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">  * При создании экземпляров компонента Label
</span><span class="token doc-comment" style="color:slategray">  * допустимо указывать в качестве children
</span><span class="token doc-comment" style="color:slategray">  * как строку [1], так и числа [2] и кроме
</span><span class="token doc-comment" style="color:slategray">  * того не указывать значения вовсе [3]
</span><span class="token doc-comment" style="color:slategray">  */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>В остальном <code class="content__code_inline">children</code> имеют, то же поведение и недостатки подробно описанные в главе посвященной функциональным компонентам. Поэтому оставим их и приступим к рассмотрению второго параметра базового типа <code class="content__code_inline">Component</code>, а именно к типу представляющего состояние компонента <code class="content__code_inline">Component&lt;Props, State&gt;</code>.</p>
<p>Несмотря на то, что состояние является закрытым от внешнего мира, тип представляющий его также принято называть с префиксом в роли которого выступает название самого компонента. Причина кроется не только в соблюдении общего стиля кода относительно именования типов пропсов. На практике могут возникнуть коллизии имен при создании вложенных классовых компонентов, что является обычным делом при создании <em>hoc</em>. Поэтому для типа описывающего состояние компонента так же необходимо определить ещё и псевдоним и не забыть передать его в качестве второго аргумента базового типа и указать в аннотации поля <code class="content__code_inline">state</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactNode</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerDefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerProps</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerDefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    duration</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// определение State</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerState</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    time</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">DefaultProps</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerDefaultProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// создание псевдонима для типа </span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] передача псевдонима State
</span><span class="token doc-comment" style="color:slategray"> * в качестве второго аргумента
</span><span class="token doc-comment" style="color:slategray"> * базового типа.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#DD4A68"> </span><span class="token doc-comment" style="color:slategray">/** [0] */</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span> 
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">readonly</span><span> defaultProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">DefaultProps</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">DOne!</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:slategray">// определение поля state</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">readonly</span><span> state</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        time</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">super</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token exports" style="color:#999">{</span><span class="token exports maybe-class-name">TimerProps</span><span class="token exports" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Пора обратить внимание на момент связанный с объявлением <code class="content__code_inline">defaultProps</code> и <code class="content__code_inline">state</code>, которым необходимо указывать (или не указывать вовсе) модификатор доступа <code class="content__code_inline">public</code>, так как к ним должен быть доступ извне. Кроме того, не будет лишним добавить этим полям модификатор <code class="content__code_inline">readonly</code>, который поможет избежать случайных изменений.</p>
<p>Говоря о состоянии нельзя обойти стороной такой метод как <code class="content__code_inline">setState</code> необходимый для его изменения, о котором известно, что в качестве аргумента он может принимать как непосредственно объект представляющий новое состояние, так и функцию возвращающую его. Но поскольку первый случай ничего, что нас могло бы заинтересовать, из себя не представляет, рассмотрен будет лишь второй вариант с функцией. Поэтому продолжим наш основной пример и внесем в него изменения касающиеся изменения состояния. Создадим скрытый метод <code class="content__code_inline">reset</code> который будет сбрасывать значение пройденного времени.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerState</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    time</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span> 
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">readonly</span><span> defaultProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">DefaultProps</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">DOne!</span><span class="token template-string template-punctuation" style="color:#690">`</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">readonly</span><span> state</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        time</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">super</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:slategray">// определение скрытого метода reset</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">reset</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">         * Вызываем метод setState с функцией
</span><span class="token doc-comment" style="color:slategray">         * асинхронного изменения состояния
</span><span class="token doc-comment" style="color:slategray">         * в качестве первого аргумента.
</span><span class="token doc-comment" style="color:slategray">         */</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">setState</span><span class="token" style="color:#999">(</span><span> </span><span class="token" style="color:#999">(</span><span>prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">,</span><span> props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span>time</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// возвращаем новое состояние</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Из того кода, что был добавлен в наш пример стоит обратить внимание на несколько моментов. Прежде всего это использование псевдонимов <code class="content__code_inline">Props</code> и <code class="content__code_inline">State</code> в аннотациях параметров функции переданной в метод <code class="content__code_inline">setState</code>. Обозначим её как <code class="content__code_inline">updater</code>. Как было сказано ранее, типы описывающие состояние и пропсы используются повсеместно в коде компонента. Кроме того, стоит сказать, что описание сигнатуры функции <code class="content__code_inline">updater</code> подобным образом излишне и имеет место быт лишь в образовательных целях. Достаточно просто определить необходимые параметры и вывод типов самостоятельно определит их принадлежность.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span> 
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">reset</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">         * Вывод типов в состоянии определить
</span><span class="token doc-comment" style="color:slategray">         * принадлежность параметров, поэтому
</span><span class="token doc-comment" style="color:slategray">         * самостоятельное аннотирование излишне.
</span><span class="token doc-comment" style="color:slategray">         * 
</span><span class="token doc-comment" style="color:slategray">         * (parameter) prevState: Readonly&lt;TimerState&gt;
</span><span class="token doc-comment" style="color:slategray">         * (parameter) props: Readonly&lt;TimerProps&gt;
</span><span class="token doc-comment" style="color:slategray">         */</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">setState</span><span class="token" style="color:#999">(</span><span> </span><span class="token" style="color:#999">(</span><span>prevState</span><span class="token" style="color:#999">,</span><span> props</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span>time</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>В добавок к этому стоит возложить определение возвращаемого значения из функции <code class="content__code_inline">updater</code> на вывод типов, поскольку это не просто излишне, но и в большинстве случаев может являться причиной избыточного кода. Все дело в том, что когда состояние содержит множество полей, обновление которых не производится одновременно, при указании возвращаемого типа как <code class="content__code_inline">State</code> будет невозможно частичное обновление, поскольку лишь часть типа <code class="content__code_inline">State</code> не совместимо с целым <code class="content__code_inline">State</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#999">{</span><span> </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span>  yesCount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span>  noCount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Counter</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">,</span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>
</span><span>  state </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    yesCount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">,</span><span>
</span><span>    noCount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token" style="color:#905">0</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span>
<span>  </span><span class="token function-variable" style="color:#DD4A68">buttonA_clickHandler</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:slategray">// инкрементируем yesCount</span><span>
</span><span>    </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">setState</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span>prevState</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span>yesCount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> prevState</span><span class="token" style="color:#999">.</span><span class="token property-access">yesCount</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**1 */</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token function-variable" style="color:#DD4A68">buttonB_clickHandler</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>      </span><span class="token" style="color:slategray">// инкрементируем noCount</span><span>
</span><span>    </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">setState</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span>prevState</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span>noCount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> prevState</span><span class="token" style="color:#999">.</span><span class="token property-access">noCount</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>  </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>          </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token maybe-class-name">Yes</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">state</span><span class="token" style="color:#999">.</span><span class="token property-access">yesCount</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>          </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token maybe-class-name">No</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">state</span><span class="token" style="color:#999">.</span><span class="token property-access">noCount</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>          </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>button onClick</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">buttonA_clickHandler</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>yes</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">++</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>button</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>          </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>button onClick</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">buttonB_clickHandler</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>no</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">++</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>button</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>      </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] описание состояния с двумя полями.
</span><span class="token doc-comment" style="color:slategray"> * [1] Error -&gt; поскольку </span><span class="token doc-comment" style="color:#999">{</span><span class="token doc-comment" style="color:slategray">yesCount: number</span><span class="token doc-comment" style="color:#999">}</span><span class="token doc-comment" style="color:slategray"> не совместим
</span><span class="token doc-comment" style="color:slategray"> * с </span><span class="token doc-comment" style="color:#999">{</span><span class="token doc-comment" style="color:slategray">yesCount: Number; noCount: number</span><span class="token doc-comment" style="color:#999">}</span><span class="token doc-comment" style="color:slategray">
</span><span class="token doc-comment" style="color:slategray"> * [2] Error -&gt; поскольку </span><span class="token doc-comment" style="color:#999">{</span><span class="token doc-comment" style="color:slategray">noCount: number</span><span class="token doc-comment" style="color:#999">}</span><span class="token doc-comment" style="color:slategray"> не совместим
</span><span class="token doc-comment" style="color:slategray"> * с </span><span class="token doc-comment" style="color:#999">{</span><span class="token doc-comment" style="color:slategray">yesCount: Number; noCount: number</span><span class="token doc-comment" style="color:#999">}</span><span class="token doc-comment" style="color:slategray">
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>В случае когда функция <code class="content__code_inline">updater</code> выполняет частичное обновление состояния и при этом тип возвращаемого значения указан явно, необходимо воспользоваться механизмом распространения (<code class="content__code_inline">spread</code>) дополнив отсутствующую часть в новом состоянии старым.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Counter</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">,</span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token function-variable" style="color:#DD4A68">buttonA_clickHandler</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">setState</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span>prevState</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span>      </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>prevState</span><span class="token" style="color:#999">,</span><span> yesCount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> prevState</span><span class="token" style="color:#999">.</span><span class="token property-access">yesCount</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token function-variable" style="color:#DD4A68">buttonB_clickHandler</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">setState</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span>prevState</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                    </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span class="token spread" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">...</span><span>prevState</span><span class="token" style="color:#999">,</span><span> noCount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> prevState</span><span class="token" style="color:#999">.</span><span class="token property-access">noCount</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>  </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] В обоих случаях ошибки не возникает
</span><span class="token doc-comment" style="color:slategray"> * поскольку недостающая часть состояния
</span><span class="token doc-comment" style="color:slategray"> * дополняется из предыдущего состояния,
</span><span class="token doc-comment" style="color:slategray"> *, что делает тип возвращаемого объекта
</span><span class="token doc-comment" style="color:slategray"> * совместимым с типом State.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Несмотря на то, что механизм распространения помогает обойти трудности связанные с совместимостью типов, лучшим вариантом будет вообще не указывать возвращаемый функцией <code class="content__code_inline">updater</code> тип, а возложить эту обязанность на вывод типов.</p>
<p>И последнее о чем ещё не упомянули, что метод <code class="content__code_inline">setState</code>, в качестве второго параметра принимает функцию обратного вызова, декларация которой очень проста и будет рассмотрена в самом конце данной главы, когда весь код будет собран в одном месте.</p>
<p>И на этом рассмотрение состояния завершено, поэтому можно приступить к рассмотрению третьего и последнего параметра базового типа <code class="content__code_inline">Component&lt;Props, State, Snapshot&gt;</code>.</p>
<p>Принципы применяемые для описания типа представляющего <code class="content__code_inline">Snapshot</code> ничем не отличаются от описания <code class="content__code_inline">Props</code> и <code class="content__code_inline">State</code>, поэтому пояснения будут опущены.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactNode</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerDefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerProps</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerDefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    duration</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerState</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    time</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:slategray">// определение Snapshot</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerSnapshot</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">DefaultProps</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerDefaultProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Snapshot</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerSnapshot</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// создание псевдонима для типа </span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] передача псевдонима Snapshot
</span><span class="token doc-comment" style="color:slategray"> * в качестве третьего аргумента
</span><span class="token doc-comment" style="color:slategray"> * базового типа.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">Snapshot</span><span class="token" style="color:#DD4A68"> </span><span class="token doc-comment" style="color:slategray">/** [0] */</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span> 
</span><span>    </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">     * Поскольку Snapshot используется
</span><span class="token doc-comment" style="color:slategray">     * в тех конструкциях очередь до которых
</span><span class="token doc-comment" style="color:slategray">     * ещё не дошла, тело класса будет опущено.
</span><span class="token doc-comment" style="color:slategray">     */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token exports" style="color:#999">{</span><span class="token exports maybe-class-name">TimerProps</span><span class="token exports" style="color:#999">}</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Ничего особенного на, что стоило бы обратить внимание нет. Поэтому без лишних комментариев продолжим знакомство с внутренним устройством компонента — его жизненного цикла.</p>
<p>Погружение в типизированный жизненный цикл классовых компонентов необходимо начать с его разделения на две части — <em>актуальный жизненный цикл</em> и <em>устаревший жизненный цикл</em>, который будет исключён из рассмотрения. Поскольку в аннотации методов жизненного цикла не содержится ничего, что было бы непонятно к этому моменту, пояснение каждого отдельного случая будет опущено. Обратить внимание стоит лишь на импорт впервые встречающегося типа <code class="content__code_inline">ErrorInfo</code> необходимость в котором появляется при определении необязательно метода <code class="content__code_inline">componentDidCatch</code>. Кроме того, не будет лишнем напомнить, что в строгом, рекомендуемом режиме, при котором все элементы без аннотации неявно принадлежат к типу <code class="content__code_inline">any</code>, аннотация сигнатур методов является обязательной. И по этому случаю ещё раз стоит упомянуть о пользе коротких псевдонимов заменяющих огромные идентификаторы типов <code class="content__code_inline">*Props</code>, <code class="content__code_inline">*State</code> и <code class="content__code_inline">*Snapshot</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactNode</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ErrorInfo</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// необходимость в импорте типа ErrorInfo</span><span>
</span>
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">Snapshot</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    getDerivedStateFromProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token" style="color:#999">(</span><span>nextProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">,</span><span> prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token maybe-class-name">Partial</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>    getDerivedStateFromError</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">any</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token maybe-class-name">Partial</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span>    
<span>    componentDidMount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span>
</span><span>    shouldComponentUpdate</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>nextProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">,</span><span> nextState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">,</span><span> nextContext</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">any</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">;</span><span>
</span><span>    componentWillUnmount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span>    componentDidCatch</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Error</span><span class="token" style="color:#999">,</span><span> errorInfo</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ErrorInfo</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span>    getSnapshotBeforeUpdate</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>prevProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">,</span><span> prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Snapshot</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>    componentDidUpdate</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>prevProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">,</span><span> prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">,</span><span> snapshot</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Snapshot</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Вдобавок необходимо заметить, что код иллюстрирующий жизненный цикл компонента взят из декларации, устанавливаемой из репозитория <code class="content__code_inline">@types/react</code>, и именно поэтому она изобилует излишними преобразованиями в <code class="content__code_inline">Readonly&lt;T&gt;</code> тип. Но как было отмечено ранее, в этом нет нужны поскольку все типы составляющие троицу аргументов базового типа уже прошли преобразование при определении представляющих их псевдонимов. Учитывая этот факт предыдущий код будет выглядеть следующим образом.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Более компактная запись
</span><span class="token doc-comment" style="color:slategray"> * без изменения поведения.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">Snapshot</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    getDerivedStateFromProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token" style="color:#999">(</span><span>nextProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">,</span><span> prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token maybe-class-name">Partial</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>    getDerivedStateFromError</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">any</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token maybe-class-name">Partial</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span>    
<span>    componentDidMount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span>
</span><span>    shouldComponentUpdate</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>nextProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">,</span><span> nextState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span class="token" style="color:#999">,</span><span> nextContext</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">any</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">;</span><span>
</span><span>    componentWillUnmount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span>    componentDidCatch</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Error</span><span class="token" style="color:#999">,</span><span> errorInfo</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ErrorInfo</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span>    getSnapshotBeforeUpdate</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>prevProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">,</span><span> prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Snapshot</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>    componentDidUpdate</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>prevProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">,</span><span> prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span class="token" style="color:#999">,</span><span> snapshot</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Snapshot</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Следующий в очереди на рассмотрение механизм, получение ссылок на нативные <em>dom элементы</em> и <em>React компоненты</em>, обозначаемый как <em>рефы</em> (<em>refs</em>).</p>
<p>Предположим, что существует форма, которую по событию <code class="content__code_inline">submit</code> необходимо очистить при помощи нативного метода <code class="content__code_inline">reset</code>, доступного лишь через нативный <em>dom элемент</em>, ссылку на который можно получить с помощью механизма рефов, применение которого возможно осуществить двумя способами. Первый способ заключается в создании объекта реф с помощью статического метода <code class="content__code_inline">React.createRef()</code>, а второй в самостоятельном сохранении ссылки на нативный <em>dom элемент</em> с помощью функции обратного вызова.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * задача заключается в
</span><span class="token doc-comment" style="color:slategray"> * получении ссылки на
</span><span class="token doc-comment" style="color:slategray"> * нативный dom елемент формы [0]. 
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">CheckList</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>            </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Начнем по порядку. Первым делом необходимо определить поле (в нашем случае это <code class="content__code_inline">formRef</code>) необходимое для сохранения объекта реф и желательно, что бы оно было закрытое (<code class="content__code_inline">private</code>) и только для чтения (<code class="content__code_inline">readonly</code>). В примере поле <code class="content__code_inline">formRef</code> определен вместе с аннотацией в которой указан импортированный тип <code class="content__code_inline">RefObject&lt;T&gt;</code>, где параметр типа принимает тип нативного <em>dom элемента</em>, в нашем случае <code class="content__code_inline">HTMLFormElement</code>. Но в конкретном примере аннотация излишня поскольку мы указали выводу типов принадлежность нативного <em>dom элемента</em> передав его в качестве аргумента типа функции <code class="content__code_inline">React.createRef&lt;T&gt;()</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">RefObject</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">CheckList</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                                    </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>                                   </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> formRef</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">RefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#999">.</span><span class="token generic-function" style="color:#DD4A68">createRef</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic maybe-class-name" style="color:#DD4A68">HTMLFormElement</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт типа RefObject&lt;T&gt;
</span><span class="token doc-comment" style="color:slategray"> * который в аннотации [1] поля
</span><span class="token doc-comment" style="color:slategray"> * formRef является излишним,
</span><span class="token doc-comment" style="color:slategray"> * так как тип нативного dom элемента
</span><span class="token doc-comment" style="color:slategray"> * был уточнен с помощь передачи его
</span><span class="token doc-comment" style="color:slategray"> * в качестве аргумента типа функции [2]
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>На следующим шаге устанавливаем объект реф <em>react элементу</em> <code class="content__code_inline">&lt;form&gt;</code> и определяем закрытый метод <code class="content__code_inline">reset</code> в котором происходит вызов метода <code class="content__code_inline">reset</code> нативной формы. Не будет лишним обратить внимание, что вызов непосредственно метода <code class="content__code_inline">reset</code> осуществляется при помощи <em>оператора опциональной последовательности</em> (<code class="content__code_inline">?.</code>). Сделано это по причине возможного отсутствия ссылки на нативный элемент.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">RefObject</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">CheckList</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> formRef</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">RefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#999">.</span><span class="token generic-function" style="color:#DD4A68">createRef</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic maybe-class-name" style="color:#DD4A68">HTMLFormElement</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token doc-comment" style="color:slategray">/**[4] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">resetForm</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>                        </span><span class="token doc-comment" style="color:slategray">/**[5] */</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">formRef</span><span class="token" style="color:#999">.</span><span class="token property-access">current</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?.</span><span class="token method property-access" style="color:#DD4A68">reset</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>                        </span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">formRef</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [3] установка рефа react элементу.
</span><span class="token doc-comment" style="color:slategray"> * [4] определение закрытого метода.
</span><span class="token doc-comment" style="color:slategray"> * [5] необходимость применения оператора
</span><span class="token doc-comment" style="color:slategray"> * опциональной последовательности по причине
</span><span class="token doc-comment" style="color:slategray"> * возможного отсутствия ссылки на нативный элемент.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Второй способ получения ссылки на нативный элемент заключается в определении функции принимающей в качестве единственного параметра нативный <em>dom элемент</em>, сохранение ссылки на который перекладывается на разработчика.</p>
<p>Для иллюстрации сказанного повторим предыдущий пример. Первым делом импортируем обобщенный тип <code class="content__code_inline">RefCallback&lt;T&gt;</code> описывающий функцию и принимающий в качестве аргумента типа тип нативного <em>dom элемента</em>, который будет передан в функцию в качестве единственного аргумента. Затем определим поле <code class="content__code_inline">formNativeElement</code> с типом <code class="content__code_inline">union</code>, множество которого включат не только тип нативного элемента, но и <code class="content__code_inline">null</code>. Это необходимо поскольку при инициализации требуется установить значение принадлежащие к типу <code class="content__code_inline">null</code>. Это необходимо при активном флаге <code class="content__code_inline">--strictPropertyInitialization</code> входящим в группировку определяющую рекомендуемый строгий режим компилятора.</p>
<p>Следующим шагом происходит определение закрытого только для чтения поля <code class="content__code_inline">formRefCallback</code> которому в качестве значения присвоена стрелочная функция. Единственный параметр данной функции лишен аннотации тпа, поскольку вывод типов определит его как принадлежащего к переданному в качестве аргумента типа <code class="content__code_inline">RefCallback&lt;T&gt;</code>. В теле данной функции происходит присваивание её параметра полю <code class="content__code_inline">formNativeElement</code> определенному на предыдущем шаге.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                            </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">RefCallback</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">CheckList</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>               </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>     </span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> formNativeElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">HTMLFormElement</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>                        </span><span class="token doc-comment" style="color:slategray">/**[4] */</span><span>                    </span><span class="token doc-comment" style="color:slategray">/**[5] */</span><span>      </span><span class="token doc-comment" style="color:slategray">/**[6] */</span><span>                       </span><span class="token doc-comment" style="color:slategray">/**[7] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> formRefCallback</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">RefCallback</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> element </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">formNativeElement</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> element</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт типа RefCallback&lt;T&gt; который в качестве аргумента
</span><span class="token doc-comment" style="color:slategray"> * типа ожидает тип нативного элемента.
</span><span class="token doc-comment" style="color:slategray"> * [1] определение поля formNativeElement
</span><span class="token doc-comment" style="color:slategray"> * и присвоение ему значения null [3], что приводит
</span><span class="token doc-comment" style="color:slategray"> * к необходимости объединенного типа включающего
</span><span class="token doc-comment" style="color:slategray"> * тип null [2]. [4] определение поля formRefCallback
</span><span class="token doc-comment" style="color:slategray"> * значением которого служит стрелочная функция принимающая в
</span><span class="token doc-comment" style="color:slategray"> * качестве единственного параметра нативный элемент [6] который затем
</span><span class="token doc-comment" style="color:slategray"> * присваивается полю formNativeElement [7]. Тип этого параметра
</span><span class="token doc-comment" style="color:slategray"> * будет принадлежать к типу переданному в качестве аргумента типа RefCallback&lt;T&gt; [5]
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Стоит заметить, что, то же самое можно реализовать и без помощи типа импортированного <code class="content__code_inline">RefCallback&lt;T&gt;</code>. Для этого лишь потребуется самостоятельно добавить аннотацию типа для параметра функции обратного вызова.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">CheckList</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> formNativeElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">HTMLFormElement</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> </span><span class="token function-variable" style="color:#DD4A68">formRefCallback</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>element</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">formNativeElement</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> element</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] определение поля formNativeElement
</span><span class="token doc-comment" style="color:slategray"> * и присвоение ему значения null [2], что приводит
</span><span class="token doc-comment" style="color:slategray"> * к необходимости объединенного типа включающего
</span><span class="token doc-comment" style="color:slategray"> * тип null [1]. [3] определение поля formRefCallback
</span><span class="token doc-comment" style="color:slategray"> * значением которого служит стрелочная функция в качестве
</span><span class="token doc-comment" style="color:slategray"> * аргумента которая ожидает нативный элемент [4] который
</span><span class="token doc-comment" style="color:slategray"> * затем присваивается полю formNativeElement [5]
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Выбор того или иного способа зависит лишь от предпочтений самого разработчика.</p>
<p>Продолжим доведение примера до финального состояния и установим созданную в первом случае функцию обратного вызова <em>react элементу</em> <code class="content__code_inline">&lt;form&gt;</code> в качестве реф. Также определим уже известный метод <code class="content__code_inline">reset</code> в теле которого будет происходить вызов метода <code class="content__code_inline">reset</code> у нативного <em>dom элемента</em> ссылка на который будет сохранена в поле класса <code class="content__code_inline">formNativeElement</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">RefCallback</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">CheckList</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> formNativeElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">HTMLFormElement</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> formRefCallback</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">RefCallback</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> element </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">formNativeElement</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> element</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>    </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">reset</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>                </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">formNativeElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?.</span><span class="token method property-access" style="color:#DD4A68">reset</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>                            </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">formRefCallback</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] устанавливаем callback в качестве значения реф
</span><span class="token doc-comment" style="color:slategray"> * после чего определяем метод reset [1] в теле которого
</span><span class="token doc-comment" style="color:slategray"> * при помощи оператора опциональной последовательности
</span><span class="token doc-comment" style="color:slategray"> * вызываем метод reset у нативного dom элемента сохранённого
</span><span class="token doc-comment" style="color:slategray"> * в поле formNativeElement [2]
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>И раз уж тема дошла до рассмотрения рефов, то необходимо рассмотреть механизм получения с их помощью ссылки на классовый компонент.</p>
<p>Первым делом определим классовый компонент <code class="content__code_inline">Slider</code> реализующий два открытых метода предназначенных для перелистывания контента <code class="content__code_inline">prev</code> и <code class="content__code_inline">next</code>. Далее определим компонент <code class="content__code_inline">App</code> в теле которого определим рефу при помощи функции <code class="content__code_inline">createRef</code>, которой (рефе) в качестве аргумента типа передадим тип классового компонента <code class="content__code_inline">Slider</code>. Таким образом вывод типа определит рефу <code class="content__code_inline">sliderRef</code>, как принадлежащую к типу <code class="content__code_inline">RefObject&lt;Slider&gt;</code>. После этого в методе рендер создадим экземпляр компонента <code class="content__code_inline">Slider</code> и два <em>react элемента</em> <code class="content__code_inline">&lt;button&gt;</code>, в обработчиках событий <code class="content__code_inline">click</code> которых происходит взаимодействие с компонентом <code class="content__code_inline">Slider</code> при помощи ссылки на него доступной через ассоциированную непосредственно с ним рефу.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> createRef</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Slider</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token function-variable" style="color:#DD4A68">prev</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token function-variable" style="color:#DD4A68">next</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span>    
<span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">App</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                     </span><span class="token doc-comment" style="color:slategray">/**[2]                 [3]*/</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> sliderRef </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token generic-function" style="color:#DD4A68">createRef</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic maybe-class-name" style="color:#DD4A68">Slider</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>                </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>button onClick</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">sliderRef</span><span class="token" style="color:#999">.</span><span class="token property-access">current</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?.</span><span class="token method property-access" style="color:#DD4A68">prev</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>prev</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>button</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token doc-comment" style="color:slategray">/**[4] */</span><span class="token" style="color:#999">}</span><span>
</span><span>                </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Slider</span><span> ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">sliderRef</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token doc-comment" style="color:slategray">/**[5] */</span><span class="token" style="color:#999">}</span><span>
</span><span>                </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>button onClick</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">sliderRef</span><span class="token" style="color:#999">.</span><span class="token property-access">current</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?.</span><span class="token method property-access" style="color:#DD4A68">next</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>next</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>button</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token doc-comment" style="color:slategray">/**[6] */</span><span class="token" style="color:#999">}</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] псевдо компонент Slider реализует
</span><span class="token doc-comment" style="color:slategray"> * два доступных метода перелистывания контента
</span><span class="token doc-comment" style="color:slategray"> * назад [0] и вперед [1]. Псевдо компонент App
</span><span class="token doc-comment" style="color:slategray"> * определяет рефу с помощью универсальной функции
</span><span class="token doc-comment" style="color:slategray"> * createRef в качестве аргумента типа которой был
</span><span class="token doc-comment" style="color:slategray"> * установлен тип компонента Slider. В методе render
</span><span class="token doc-comment" style="color:slategray"> * происходит определение двух пользовательских кнопок
</span><span class="token doc-comment" style="color:slategray"> * выполняющих перелистывание по событию click, в обработчиках
</span><span class="token doc-comment" style="color:slategray"> * событий которых происходит вызов доступных методов prev [4]
</span><span class="token doc-comment" style="color:slategray"> * и next [6] через рефу ассоциированную непосредственно с компонентом [5]
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>На этом рассмотрение работы с механизмом рефов в типизированном стиле завершено. Но до завершения знакомства с работой классового компонента в основе которого лежит <code class="content__code_inline">Component&lt;Props, State, Snapshot&gt;</code> осталась ещё одна тема, а именно работа с <em>React событиями</em>. Кроме того, её освещение будет являться альтернативным решением задачи получения доступа к нативному элементу. Простыми словами реализуем вызов метода <code class="content__code_inline">reset</code> у нативного <em>dom элемента</em> ссылку на который будет получена из объекта события <code class="content__code_inline">submit</code>. Но поскольку данная тема была подробна рассмотрена в главе посвященной функциональным компонентам, здесь подробно будут освещены только моменты присущие исключительно классовым компонентам.</p>
<p>Первым делом возвратим предыдущий пример в первоначальное состояние и добавим кнопку для отправки формы.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>                </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>button type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#690">&quot;submit&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>button</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Далее нам потребуется определить закрытое поле только для чтения в качестве значения которого будет присвоена стрелочная функция способная сохранить контекст текущего экземпляра. В качестве типа данного поля укажем импортированный из пространства имен <em>React</em> ранее рассмотренный обобщенный тип <code class="content__code_inline">ReactEventHandler&lt;T&gt;</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>
</span><span>                              </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactEventHandler</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                            </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>                         </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>     </span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> form_submitHandler</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactEventHandler</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> event </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span>
<span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>                                    </span><span class="token doc-comment" style="color:slategray">/**[4] */</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form onSubmit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">form_submitHandler</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>                </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>button type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#690">&quot;submit&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>button</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт типа ReactEventHandler&lt;T&gt;
</span><span class="token doc-comment" style="color:slategray"> * представляющего слушателя события.
</span><span class="token doc-comment" style="color:slategray"> * [1]  Определение закрытого неизменяемого
</span><span class="token doc-comment" style="color:slategray"> * поля принадлежащего к функциональному 
</span><span class="token doc-comment" style="color:slategray"> * типу ReactEventHandler&lt;T&gt;. [2] тип нативного
</span><span class="token doc-comment" style="color:slategray"> * dom элемента определенного стандартной
</span><span class="token doc-comment" style="color:slategray"> * библиотекой. [3] единственный параметр
</span><span class="token doc-comment" style="color:slategray"> * функции не нуждается в аннотации поскольку
</span><span class="token doc-comment" style="color:slategray"> * вывод типа опирается на ReactEventHandler&lt;T&gt;.
</span><span class="token doc-comment" style="color:slategray"> * [4] установка слушателя.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Для завершения примера осталось всего-навсего написать логику слушателя события <code class="content__code_inline">submit</code>, которая также повторяет пример из главы посвященной функциональным компонентам и поэтому подробных комментариев не будет.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> form_submitHandler</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactEventHandler</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">FormEvent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> event </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        event</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">preventDefault</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// [0]</span><span>
</span><span>        </span><span class="token" style="color:#07a">let</span><span> form </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> event</span><span class="token" style="color:#999">.</span><span class="token property-access">target</span><span> </span><span class="token module" style="color:#07a">as</span><span> </span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// [1]</span><span>
</span><span>        form</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">reset</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// [2]</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] для предотвращения отправки формы
</span><span class="token doc-comment" style="color:slategray"> * и перезагрузки страницы прерываем стандартное
</span><span class="token doc-comment" style="color:slategray"> * поведение. [1] поскольку доступ к форме можно
</span><span class="token doc-comment" style="color:slategray"> * получить через ссылку свойства target принадлежащего
</span><span class="token doc-comment" style="color:slategray"> * к типу EventTarget, появляется необходимость в
</span><span class="token doc-comment" style="color:slategray"> * приведении к типу HTMLFormElement с при помощи оператора as.
</span><span class="token doc-comment" style="color:slategray"> * [2] вызываем метод reset.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Данный способ типизирования слушателей событий является предпочтительным поскольку при таком подходе аннотация включает только два типа и, кроме того, стрелочная функция уберегает от неминуемой потери контекста. Случаи требующие определения слушателя как метода класса требуют другого подхода. Отличие заключается в том, что в аннотировании типа нуждается непосредственно параметр слушателя. Но поскольку <em>React</em> делегирует все нативные события, необходимо импортировать тип соответствующего события из его пространства имен. Для событий связанных с формами в <em>React</em> определен обобщенный тип <code class="content__code_inline">FormEvent&lt;T&gt;</code> ожидающий в качестве аргумента типа тип нативного элемента. И поскольку слушатель ничего не возвращает, то тип возвращаемого значения, явное указание которого излишне, определяется как <code class="content__code_inline">void</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                            </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">FormEvent</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>                          </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>        </span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">form_submitHandler</span><span class="token" style="color:#999">(</span><span>event</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FormEvent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импортируем тип FormEvent&lt;T&gt; после 
</span><span class="token doc-comment" style="color:slategray"> * чего определяем метод form_submitHandler
</span><span class="token doc-comment" style="color:slategray"> * тип единственного параметра которого определен
</span><span class="token doc-comment" style="color:slategray"> * как FormEvent&lt;HTMLFormElement&gt;, а возвращаемое
</span><span class="token doc-comment" style="color:slategray"> * значение [3] которое указанно лишь для того, что бы
</span><span class="token doc-comment" style="color:slategray"> * напомнить об отсутствии необходимости в его явном указании.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Поскольку установка слушателя представляемого методом класса приведет к неминуемой потери контекста, прибегать к подобному объявлению стоит только при условии, что их тело лишено логики предполагающей обращение к членам через ссылку экземпляра <code class="content__code_inline">this</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">form_submitHandler</span><span class="token" style="color:#999">(</span><span>event</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FormEvent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">         * Здесь нельзя обращаться к this
</span><span class="token doc-comment" style="color:slategray">         * поскольку контекст на текущий экземпляр
</span><span class="token doc-comment" style="color:slategray">         * был утерян.
</span><span class="token doc-comment" style="color:slategray">         */</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form onSubmit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">form_submitHandler</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Контекст можно было бы сохранить прибегнув к методу <code class="content__code_inline">bind</code> или делегированию события непосредственно с помощью стрелочной функции определенной в месте установки слушателя, но зачем? Для <code class="content__code_inline">bind</code> потребуется определения дополнительного поля.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:slategray">// дополнительное поле</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token function-variable" style="color:#DD4A68">form_submitHandlerBinded</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span>event</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FormEvent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">super</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>        
<span>        </span><span class="token" style="color:slategray">// лишняя инициализация</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">form_submitHandlerBinded</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">form_submitHandler</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">bind</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span>    </span><span class="token" style="color:#DD4A68">form_submitHandler</span><span class="token" style="color:#999">(</span><span>event</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FormEvent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">         * Теперь здесь можно обращаться к this
</span><span class="token doc-comment" style="color:slategray">         */</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>            </span><span class="token" style="color:slategray">// в качестве слушателя установлена функция связанная с помощью bind</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form onSubmit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">form_submitHandlerBinded</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Стрелочная функция будет пересоздаваться каждую отрисовку.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">form_submitHandler</span><span class="token" style="color:#999">(</span><span>event</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FormEvent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">         * Теперь здесь можно обращаться к this
</span><span class="token doc-comment" style="color:slategray">         */</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>            </span><span class="token" style="color:slategray">// пересоздание функции каждую отрисовку</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form onSubmit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>event </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">form_submitHandler</span><span class="token" style="color:#999">(</span><span>event</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Кроме того, оба случая затрудняют понимание кода. Поэтому необходимо повторить, что использовать метод класса в качестве слушателя события стоит только при отсутствии необходимости в обращении через ссылку <code class="content__code_inline">this</code>. При возникновении именно такого случая не будет лишним уточнения способа выбора типа события. В приведенном примере это был <code class="content__code_inline">FormEvent&lt;T&gt;</code>, поскольку работа производилась с формой. Для других событий появится необходимость в других соответствующих типа, узнать которые можно с помощью подсказок вашей <em>ide</em>. Для чего всего-лишь необходимо навести курсор на определение слушателя события.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Clicker</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>                </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div onClick</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] при наведении курсором
</span><span class="token doc-comment" style="color:slategray"> * на определение слушателя onClick
</span><span class="token doc-comment" style="color:slategray"> * ide подсказывает тип как MouseEvent&lt;HTMLDivElement&gt;
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Также не забываем об упомянутом ранее базовом для всех событийных <em>React</em> типов обобщенном типе <code class="content__code_inline">SyntheticEvent&lt;T&gt;</code>, который в качестве аргумента ожидает тип представляющий нативный элемент.</p>
<p>На этом тему посвященную созданию классового компонента расширяющего <code class="content__code_inline">Component&lt;Props, State, Snapshot&gt;</code> можно заканчивать и переходить к следующей теме. Единственное, что точно не будет лишним, так это собрать весь пройденный материал в одном месте.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">Component</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactNode</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactEventHandler</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">RefObject</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">SyntheticEvent</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ErrorInfo</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">GreeterDefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:slategray">// для декларации свойств по умолчанию</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">GreeterProps</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">GreeterDefaultProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    children</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactNode</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token maybe-class-name">ReactNode</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// указываем, что children могут принадлежать к единичному типу или множеству составляющего тип ReactNode</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:slategray">// для декларации обязательных свойств + экспорт интерфейса</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">GreeterState</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:slategray">// для декларации состояния</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">GreeterSnapshot</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:slategray">// для декларации снимка</span><span>
</span>
<span></span><span class="token" style="color:slategray">// создаем псевдонимы для readonly типов представляющих...</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">DefaultProps</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">GreeterDefaultProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// ... статическое поле defaultProps</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">GreeterProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// ... поле props</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">GreeterState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// ... поле state</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Snapshot</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">GreeterSnapshot</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// ... параметр snapshot определенный в нескольких методах жизненного цикла</span><span>
</span>
<!-- -->
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Greeter</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Component</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">Snapshot</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">static</span><span> </span><span class="token" style="color:#07a">readonly</span><span> defaultProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">DefaultProps</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// модификатор readonly от случайного изменения статического поля defaultProps которое должно иметь модификатор доступа public</span><span>
</span>
<!-- -->
<span>    </span><span class="token" style="color:slategray">// необязательные методы класса (статические методы)</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">static</span><span> getDerivedStateFromProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span class="token" style="color:#999">(</span><span>nextProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">,</span><span> prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token maybe-class-name">Partial</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">static</span><span> getDerivedStateFromError</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">any</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token maybe-class-name">Partial</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">State</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#07a">readonly</span><span> state</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// модификатор readonly от случайного изменения поля state которое должно иметь модификатор доступа public</span><span>
</span>
<!-- -->
<span>    </span><span class="token doc-comment" style="color:slategray">/** два различных способа получения ссылки на нативный dom элемент */</span><span>
</span><span>    </span><span class="token" style="color:slategray">// [0] при помощи контейнера</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> formRef</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">RefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">createRef</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// создание объекта RefObject, с помощью которого будет получена ссылка на dom элемент</span><span>
</span>    
<span>    </span><span class="token" style="color:slategray">// [1] при помощи callback</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> textRef</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">HTMLSpanElement</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// поле, в которое будет сохранена ссылка на DOM-элемент</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> </span><span class="token function-variable" style="color:#DD4A68">textRefCallback</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>element</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">HTMLSpanElement</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">textRef</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> element</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// определение функции обратного вызова для установления ссылки на DOM-элемент</span><span>
</span>
<!-- -->
<!-- -->
<span>    </span><span class="token" style="color:#DD4A68">constructor</span><span> </span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:#07a">super</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->    
<span>    </span><span class="token" style="color:slategray">// методы жизненного цикла</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> componentDidMount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> shouldComponentUpdate</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>nextProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">,</span><span> nextState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span class="token" style="color:#999">,</span><span> nextContext</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">any</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">boolean</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> componentWillUnmount</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> componentDidCatch</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>error</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Error</span><span class="token" style="color:#999">,</span><span> errorInfo</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ErrorInfo</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> getSnapshotBeforeUpdate</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>prevProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">,</span><span> prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Snapshot</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#07a">public</span><span> componentDidUpdate</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#999">(</span><span>prevProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">,</span><span> prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span class="token" style="color:#999">,</span><span> snapshot</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Snapshot</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>    </span><span class="token doc-comment" style="color:slategray">/** два варианта определения слушателя событий */</span><span>
</span><span>    </span><span class="token" style="color:slategray">// слушатель событий определенный как поле</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#07a">readonly</span><span> form_submitHandler</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactEventHandler</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> event </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token" style="color:slategray">// изменение состояния</span><span>
</span><span>        </span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">setState</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span>prevState</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">State</span><span class="token" style="color:#999">,</span><span> prevProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>        </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:slategray">// слушатель событий определенный как метод</span><span>
</span><span>    </span><span class="token" style="color:#07a">private</span><span> </span><span class="token" style="color:#DD4A68">submitButton_clickHandler</span><span class="token" style="color:#999">(</span><span>event</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">SyntheticEvent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLButtonElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token" style="color:#999">{</span><span>
</span>
<span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<span>    </span><span class="token" style="color:#07a">public</span><span> </span><span class="token" style="color:#DD4A68">render</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactNode</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">formRef</span><span class="token" style="color:#999">}</span><span> onSubmit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">form_submitHandler</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>                </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>span ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">textRefCallback</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token maybe-class-name">Send</span><span> form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>                </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>button type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#690">&quot;submit&quot;</span><span> onClick</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">this</span><span class="token" style="color:#999">.</span><span class="token property-access">submitButton_clickHandler</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>yes</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>button</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div></section><section id="Proizvodnye_ot_PureComponent&lt;Props,State,Snapshot&gt;" class="content__section"><h2 class="content__heading">Производные от PureComponent&lt;Props, State, Snapshot&gt;</h2>
<p>Помимо того, что пользовательские компоненты могут быть производными от универсального класс <code class="content__code_inline">Component&lt;Props, State, Snapshot&gt;</code>, они также могут использовать в качестве базового класса универсальный класс <code class="content__code_inline">PureComponent&lt;Props, State, Snapshot&gt;</code>. Но поскольку все, что было сказано относительно <code class="content__code_inline">Component</code> в ста процентах случаев верно и для <code class="content__code_inline">PureComponent</code>, который также ничего нового не привносит, то данная глава будет ограничена лишь кодом иллюстрирующим определение пользовательского компонента.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">PureComponent</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[*] */</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">class</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Greeter</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">PureComponent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">State</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">Snapshot</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token doc-comment" style="color:slategray">/**[*] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [*] здесь предполагается логика
</span><span class="token doc-comment" style="color:slategray"> * рассмотренная в главе, посвященной
</span><span class="token doc-comment" style="color:slategray"> * производным от Component&lt;P, S, SS&gt;
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Тем кто только начал своё знакомство с классовыми компонентами с данной главы необходимо вернутся на шаг назад или даже более разумно в самое начало, поскольку именно там объясняется, что для полного понимания необходимо ознакомиться со всем материалом относящимся к <em>React</em>.</p></section><aside class="content-box__page__content-bar_post"><nav class="post-content-bar__nav"><a href="Funkcionalnye_komponenty" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_prev"><div class="post-content-bar__nav__btn_padding-fix"><span role="img" aria-label="arrow-left" class="anticon anticon-arrow-left post-content-bar__nav__btn__icon_prev"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"></path></svg></span><span class="post-content-bar__nav__btn__label">Функциональные компоненты</span></div></a><a href="Universalnye_komponenty" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_next"><div class="post-content-bar__nav__btn_padding-fix"><span class="post-content-bar__nav__btn__label">Универсальные компоненты</span><span role="img" aria-label="arrow-right" class="anticon anticon-arrow-right post-content-bar__nav__btn__icon_next"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"></path></svg></span></div></a></nav></aside></main><div class="content-box__page-nav content-box__page-nav_right"><div class="page-nav__bar page-nav__bar_right"><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="up" class="anticon anticon-up"><svg viewBox="64 64 896 896" focusable="false" data-icon="up" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"></path></svg></span></button></span><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn page-nav__btn_next-page"><span role="img" aria-label="right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></button><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></button></span></div></div></div></div><div class="slide-layer__last-empty"></div></div><footer class="app-footer"><div class="app-footer__empty"></div><div class="app-footer_contacts app-footer__section"></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"urlResolver":{"image":"https://raw.githubusercontent.com/nauchikus/typescript-definitive-guide/master/book/ru/chapters/052.(React) Классовые компоненты/images/"},"sectionInfoAll":[{"key":"Классовые компоненты","elementId":"Klassovye_komponenty","markdown":"# Классовые компоненты\n\nПомимо компонентов на основе функций, _React_ позволяет определять компоненты на основе классов, которые, как в случае реализации _ловушки для ошибок_ просто не заменимы. Кроме этого, с ними необходимо познакомиться, так как они являются частью _React_. Именно поэтому текущая глава полностью посвящена старым добрым классовым компонентам."},{"key":"Классовые компоненты_0","elementId":"Proizvodnye_ot_Component\u003cP,S,SS\u003e","markdown":"## Производные от Component\u003cP, S, SS\u003e\n\nПользовательские компоненты построенные на основе классов обязаны расширять базовый обобщенный класс `Component\u003cProps, State, Snapshot\u003e` имеющего три необязательных параметра типа.\n\n`````ts\nimport React, {Component} from \"react\";\n\n\nclass Timer extends Component {\n    render(){\n        return null;\n    }\n}\n\nexport default Timer;\n`````\n\nПервым делом стоит обратить внимание на первую строку, а именно импорт пространства имен _React_. Не зависимо используете вы его напрямую или нет, оно обязательно должно быть импортировано, в противном случаи компилятор напомнит об этом с помощью ошибки.\n\n`````ts\n/**\n * [0] Забыт импорт пространства\n * имен React в следствии чего в\n * точке [1] возникнет ошибка - \n * \n * 'React' refers to a UMD global,\n * but the current file is a module.\n * Consider adding an import instead.ts(2686)\n */\n\nimport {Component} from \"react\"; // [0]\n\n\nclass Timer extends Component {\n    render(){\n        return null; // [1]\n    }\n}\n\nexport default Timer;\n`````\n\nКроме того, в нашем примере у метода `render` отсутствует аннотация возвращаемого типа, что на практике даже приветствуется. Но с образовательной точки зрения её указание не принесет никакого вреда.\n\n`````ts\nimport React, {Component, ReactNode} from \"react\";\n\n\nclass Timer extends Component {\n    render(): ReactNode {\n        return null;\n    }\n}\n\nexport default Timer;\n`````\n\nПри переопределении производным классом метода `render` в качестве типа возвращаемого значения необходимо указывать тип совместимый с указанным в базовом классе, то есть с типом `ReactNode` поведение и нюансы которого были подробно рассмотрены в главе посвященной функциональным компонентам.\n\nКак говорилось ранее, тип от которого должны наследоваться пользовательские классовые компоненты является обобщенным и имеет три необязательных параметра типа, что и иллюстрирует наш минималистический пример.\n\n`````ts\n/**\n * [0] отсутствует передача аргументов типа\n * определенных как Component\u003cProps, State, Snapshot\u003e\n *, что указывает на их необязательность.\n */\nclass Timer extends Component /** [0] */ {\n    \n}\n`````\n\nВ реальных проектах подобное встречается редко, поэтому следующим шагом разберем логику определения типов описывающих пользовательский компонент. \n\nНачнем по порядку, а именно с `Props`. Несмотря на то, что _пропсы_ делятся на обязательные и необязательные, все они по мере необходимости передаются в качестве аргументов конструктора при создании его экземпляра и доступны по ссылке `this.props` (обозначим их как _общие пропсы_). Тем не менее за инициализацию необязательных пропсов ответственен сам классовый компонент для чего и предусмотренно статическое поле `defaultProps`.\n\n`````ts\n/**\n * Аннотации в ожидании указания\n * типа.\n */\nclass Timer extends Component {\n    public static readonly defaultProps /** [0] */ = {};\n\n    constructor(props /** [1] */){\n        super(props);\n    }\n}\n`````\n\nТот факт, что аннотация `defaultProps` предполагает тип представляющий лишь ассоциированное с этим полем значение вынуждает разделить декларацию общих пропсов на два типа `DefaultProps` и `Props`. Ввиду того, что тип `Props` представляет не только обязательные пропсы, но и необязательные, он должен расширять (`extends`) тип `DefaultProps`.\n \n`````ts\ninterface DefaultProps {}\ninterface Props extends DefaultProps {}\n\n\nclass Timer extends Component {\n    public static readonly defaultProps = {};\n\n    constructor(props: Props){\n        super(props);\n    }\n}\n`````\n\nНе будет лишним упомянуть, что в реальных проектах интерфейс `Props`, помимо `DefaultProps`, очень часто расширяет множество других интерфейсов. В их число входят типы, предоставляемые библиотеками _ui_, _hoc обертками_ и обычными библиотеками, как например _react-router_ и его тип `RouteComponentProps\u003cT\u003e`.\n\nПоскольку в описании базового класса поле (`this.props`) принадлежит к типу определенного в качестве первого параметра типа, то есть `Component\u003cProps\u003e`, то `Props` необходимо указать в аннотации не только первого параметра конструктора, но и в качестве первого аргумента базового типа. Иначе `this.props` так и останется принадлежать к простому объектному типу `{}` заданному по умолчанию.\n\n`````ts\ninterface DefaultProps {\n    message: string;\n}\ninterface Props extends DefaultProps {\n    duration: number;\n}\n\n/**\n * Если не передавать Props в качестве\n * аргумента типа в точке [0], то в точке\n * [1] возникнет ошибка -\u003e\n * Property 'message' does not exist on type\n * 'Readonly\u003c{}\u003e \u0026 Readonly\u003c{ children?: ReactNode; }\u003e'\n */\nclass Timer extends Component\u003cProps /**[0] */\u003e {\n    public static readonly defaultProps = {\n        message: `Done!`\n    };\n\n    constructor(props: Props){\n        super(props);\n\n        props.message; // Ok\n        this.props.message; // Ok [1]\n    }\n}\n`````\n\nКак было сказано в теме посвященной функциональным компонентам, что если взять за правило именовать типы пропсов как `DefaultProps` и `Props`, то при необходимости в их импорте непременно возникнет коллизия из-за одинаковых имен. Поэтому принято добавлять к названиям названия самих компонентов `*DefaultProps` и `*Props`. Но поскольку эти типы повсеместно указываются в аннотациях расположенных в теле классового компонента, то подобные имена попросту усложняют понимание кода. Поэтому для исчерпывающих имен необходимо создавать более компактные псевдонимы типа `type`.\n\nТакже стоит сразу сказать, что все три типа выступающих в качестве аргументов базового типа нуждаются в более компактных идентификаторах определяемых с помощью псевдонимов. Но, кроме того, все они описывают объекты, мутация которых не предполагается. Простыми словами типы `Props`, `State` и `Snapshot` используются исключительно в аннотациях `readonly` полей класса, параметрах его методов и возвращаемых ими значениях. Поскольку секрет здорового приложения кроется в типобезопасности, всю упомянутую троицу необходимо сделать неизменяемой. Для этого существует специальный тип `Readonly\u003cT\u003e`. Но так как преобразование типов в каждой отдельной аннотации приведет к чрезмерному увеличению кода, необходимо проделать это единожды в определении их псевдонимов.\n\nПосмотрим как новая информация преобразит наш основной пример.\n\n`````ts\nimport React, {Component, ReactNode} from \"react\";\n\n/**\n * Имена интерфейсов получили префикс\n * в виде названия компонента.\n */\ninterface TimerDefaultProps {\n    message: string;\n}\ninterface TimerProps extends TimerDefaultProps {\n    duration: number;\n}\n\n/**\n * Для конкретных типов преобразованных\n * в типы только для чтения\n * определен псевдоним.\n */\ntype DefaultProps = Readonly\u003cTimerDefaultProps\u003e;\ntype Props = Readonly\u003cTimerProps\u003e;\n\nclass Timer extends Component\u003cProps\u003e {\n    public static readonly defaultProps: DefaultProps = {\n        message: `Done!`\n    };\n\n    constructor(props: Props){\n        super(props);\n    }\n}\n\n/**\n * Добавлен экспорт не только самого\n * компонента, но и типа представляющего\n * его основные пропсы.\n */\nexport default Timer;\nexport {TimerProps}; // экспортируем типа *Props\n`````\n\nТакже стоит упомянуть, что пропсы всех компонентов по умолчанию имеют определение необязательного (объявленного с модификатором `?:`) поля `children` принадлежащего к оговоренному ранее типу `ReactNode`. Простыми словами можно вообще не передавать аргументы базовому типу и компилятор не выдаст ошибку при обращении к полю `this.props.children`;\n\n`````ts\nclass Label extends Component {\n    render(){\n        return (\n                    /**[0] */\n            \u003ch1\u003e{this.props.children}\u003c/h1\u003e\n        );\n    }\n}\n\n/**\n * [0] несмотря на то, что базовому\n * типу не были установлены аргумента типа\n * обращение к свойству children не вызывает\n * ошибки поскольку данное свойство определенно\n * в базовом типе.\n */\n\n\u003cLabel\u003e{\"label\"}\u003c/Label\u003e; // string as children -\u003e Ok [1]\n\u003cLabel\u003e{1000}\u003c/Label\u003e; // number as children -\u003e Ok [2]\n\u003cLabel\u003e\u003c/Label\u003e; // undefined as children -\u003e Ok [3]\n\n /**\n  * При создании экземпляров компонента Label\n  * допустимо указывать в качестве children\n  * как строку [1], так и числа [2] и кроме\n  * того не указывать значения вовсе [3]\n  */\n`````\n\nВ остальном `children` имеют, то же поведение и недостатки подробно описанные в главе посвященной функциональным компонентам. Поэтому оставим их и приступим к рассмотрению второго параметра базового типа `Component`, а именно к типу представляющего состояние компонента `Component\u003cProps, State\u003e`.\n\nНесмотря на то, что состояние является закрытым от внешнего мира, тип представляющий его также принято называть с префиксом в роли которого выступает название самого компонента. Причина кроется не только в соблюдении общего стиля кода относительно именования типов пропсов. На практике могут возникнуть коллизии имен при создании вложенных классовых компонентов, что является обычным делом при создании _hoc_. Поэтому для типа описывающего состояние компонента так же необходимо определить ещё и псевдоним и не забыть передать его в качестве второго аргумента базового типа и указать в аннотации поля `state`.\n\n\n`````ts\nimport React, {Component, ReactNode} from \"react\";\n\ninterface TimerDefaultProps {\n    message: string;\n}\ninterface TimerProps extends TimerDefaultProps {\n    duration: number;\n}\n\n// определение State\ninterface TimerState {\n    time: number;\n}\n\ntype DefaultProps = Readonly\u003cTimerDefaultProps\u003e;\ntype Props = Readonly\u003cTimerProps\u003e;\ntype State = Readonly\u003cTimerState\u003e; // создание псевдонима для типа \n\n/**\n * [0] передача псевдонима State\n * в качестве второго аргумента\n * базового типа.\n */\nclass Timer extends Component\u003cProps, State /** [0] */\u003e { \n    public static readonly defaultProps: DefaultProps = {\n        message: `DOne!`\n    };\n\n    // определение поля state\n    public readonly state: State = {\n        time: 0\n    };\n\n    constructor(props: Props){\n        super(props);\n    }\n}\n\nexport default Timer;\nexport {TimerProps};\n`````\n\nПора обратить внимание на момент связанный с объявлением `defaultProps` и `state`, которым необходимо указывать (или не указывать вовсе) модификатор доступа `public`, так как к ним должен быть доступ извне. Кроме того, не будет лишним добавить этим полям модификатор `readonly`, который поможет избежать случайных изменений.\n\nГоворя о состоянии нельзя обойти стороной такой метод как `setState` необходимый для его изменения, о котором известно, что в качестве аргумента он может принимать как непосредственно объект представляющий новое состояние, так и функцию возвращающую его. Но поскольку первый случай ничего, что нас могло бы заинтересовать, из себя не представляет, рассмотрен будет лишь второй вариант с функцией. Поэтому продолжим наш основной пример и внесем в него изменения касающиеся изменения состояния. Создадим скрытый метод `reset` который будет сбрасывать значение пройденного времени.\n\n`````ts\ninterface TimerState {\n    time: number;\n}\n\ntype State = Readonly\u003cTimerState\u003e;\n\n\nclass Timer extends Component\u003cProps, State\u003e { \n    public static readonly defaultProps: DefaultProps = {\n        message: `DOne!`\n    };\n\n    public readonly state: State = {\n        time: 0\n    };\n\n    constructor(props: Props){\n        super(props);\n    }\n\n    // определение скрытого метода reset\n    private reset(){\n        /**\n         * Вызываем метод setState с функцией\n         * асинхронного изменения состояния\n         * в качестве первого аргумента.\n         */\n        this.setState( (prevState: Readonly\u003cState\u003e, props: Readonly\u003cProps\u003e) =\u003e {\n            return {time: 0}; // возвращаем новое состояние\n        } )\n    }\n}\n`````\n\nИз того кода, что был добавлен в наш пример стоит обратить внимание на несколько моментов. Прежде всего это использование псевдонимов `Props` и `State` в аннотациях параметров функции переданной в метод `setState`. Обозначим её как `updater`. Как было сказано ранее, типы описывающие состояние и пропсы используются повсеместно в коде компонента. Кроме того, стоит сказать, что описание сигнатуры функции `updater` подобным образом излишне и имеет место быт лишь в образовательных целях. Достаточно просто определить необходимые параметры и вывод типов самостоятельно определит их принадлежность.\n\n`````ts\nclass Timer extends Component\u003cProps, State\u003e { \n    private reset(){\n        /**\n         * Вывод типов в состоянии определить\n         * принадлежность параметров, поэтому\n         * самостоятельное аннотирование излишне.\n         * \n         * (parameter) prevState: Readonly\u003cTimerState\u003e\n         * (parameter) props: Readonly\u003cTimerProps\u003e\n         */\n        this.setState( (prevState, props) =\u003e {\n            return {time: 0};\n        } )\n    }\n}\n`````\n\nВ добавок к этому стоит возложить определение возвращаемого значения из функции `updater` на вывод типов, поскольку это не просто излишне, но и в большинстве случаев может являться причиной избыточного кода. Все дело в том, что когда состояние содержит множество полей, обновление которых не производится одновременно, при указании возвращаемого типа как `State` будет невозможно частичное обновление, поскольку лишь часть типа `State` не совместимо с целым `State`.\n\n`````ts\ninterface Props{}\ninterface State{ /**[0] */\n  yesCount: number;\n  noCount: number;\n}\nclass Counter extends Component\u003cProps,State\u003e{\n  state = {\n    yesCount:0,\n    noCount:0\n  }\n\n  buttonA_clickHandler = () =\u003e {\n      // инкрементируем yesCount\n    this.setState((prevState): State =\u003e {\n      return {yesCount: prevState.yesCount + 1}; /**1 */\n    });\n  };\n  buttonB_clickHandler = () =\u003e {\n      // инкрементируем noCount\n    this.setState((prevState): State =\u003e {\n        return {noCount: prevState.noCount + 1}; /**[2] */\n    });\n  };\n\n\n  render(){\n    return (\n      \u003cdiv\u003e\n          \u003cp\u003eYes: {this.state.yesCount}\u003c/p\u003e\n          \u003cp\u003eNo: {this.state.noCount}\u003c/p\u003e\n          \u003cbutton onClick={this.buttonA_clickHandler}\u003eyes++\u003c/button\u003e\n          \u003cbutton onClick={this.buttonB_clickHandler}\u003eno++\u003c/button\u003e\n      \u003c/div\u003e\n    );\n  }\n}\n\n/**\n * [0] описание состояния с двумя полями.\n * [1] Error -\u003e поскольку {yesCount: number} не совместим\n * с {yesCount: Number; noCount: number}\n * [2] Error -\u003e поскольку {noCount: number} не совместим\n * с {yesCount: Number; noCount: number}\n */\n`````\nВ случае когда функция `updater` выполняет частичное обновление состояния и при этом тип возвращаемого значения указан явно, необходимо воспользоваться механизмом распространения (`spread`) дополнив отсутствующую часть в новом состоянии старым.\n\n`````ts\nclass Counter extends Component\u003cProps,State\u003e{\n  buttonA_clickHandler = () =\u003e {\n    this.setState((prevState): State =\u003e {\n                /**[0] */\n      return {...prevState, yesCount: prevState.yesCount + 1};\n    });\n  };\n  buttonB_clickHandler = () =\u003e {\n    this.setState((prevState): State =\u003e {\n                    /**[1] */\n        return {...prevState, noCount: prevState.noCount + 1};\n    });\n  };\n}\n\n/**\n * [0] В обоих случаях ошибки не возникает\n * поскольку недостающая часть состояния\n * дополняется из предыдущего состояния,\n *, что делает тип возвращаемого объекта\n * совместимым с типом State.\n */\n `````\nНесмотря на то, что механизм распространения помогает обойти трудности связанные с совместимостью типов, лучшим вариантом будет вообще не указывать возвращаемый функцией `updater` тип, а возложить эту обязанность на вывод типов.\n\nИ последнее о чем ещё не упомянули, что метод `setState`, в качестве второго параметра принимает функцию обратного вызова, декларация которой очень проста и будет рассмотрена в самом конце данной главы, когда весь код будет собран в одном месте.\n\nИ на этом рассмотрение состояния завершено, поэтому можно приступить к рассмотрению третьего и последнего параметра базового типа `Component\u003cProps, State, Snapshot\u003e`.\n\nПринципы применяемые для описания типа представляющего `Snapshot` ничем не отличаются от описания `Props` и `State`, поэтому пояснения будут опущены.\n\n`````ts\nimport React, {Component, ReactNode} from \"react\";\n\ninterface TimerDefaultProps {\n    message: string;\n}\ninterface TimerProps extends TimerDefaultProps {\n    duration: number;\n}\n\ninterface TimerState {\n    time: number;\n}\n\n// определение Snapshot\ninterface TimerSnapshot {}\n\n\ntype DefaultProps = Readonly\u003cTimerDefaultProps\u003e;\ntype Props = Readonly\u003cTimerProps\u003e;\ntype State = Readonly\u003cTimerState\u003e;\ntype Snapshot = Readonly\u003cTimerSnapshot\u003e; // создание псевдонима для типа \n\n/**\n * [0] передача псевдонима Snapshot\n * в качестве третьего аргумента\n * базового типа.\n */\nclass Timer extends Component\u003cProps, State, Snapshot /** [0] */\u003e { \n    /**\n     * Поскольку Snapshot используется\n     * в тех конструкциях очередь до которых\n     * ещё не дошла, тело класса будет опущено.\n     */\n}\n\nexport default Timer;\nexport {TimerProps};\n`````\n\nНичего особенного на, что стоило бы обратить внимание нет. Поэтому без лишних комментариев продолжим знакомство с внутренним устройством компонента — его жизненного цикла.\n\nПогружение в типизированный жизненный цикл классовых компонентов необходимо начать с его разделения на две части — _актуальный жизненный цикл_ и _устаревший жизненный цикл_, который будет исключён из рассмотрения. Поскольку в аннотации методов жизненного цикла не содержится ничего, что было бы непонятно к этому моменту, пояснение каждого отдельного случая будет опущено. Обратить внимание стоит лишь на импорт впервые встречающегося типа `ErrorInfo` необходимость в котором появляется при определении необязательно метода `componentDidCatch`. Кроме того, не будет лишнем напомнить, что в строгом, рекомендуемом режиме, при котором все элементы без аннотации неявно принадлежат к типу `any`, аннотация сигнатур методов является обязательной. И по этому случаю ещё раз стоит упомянуть о пользе коротких псевдонимов заменяющих огромные идентификаторы типов `*Props`, `*State` и `*Snapshot`.\n\n`````ts\nimport React, {Component, ReactNode, ErrorInfo} from \"react\"; // необходимость в импорте типа ErrorInfo\n\nclass Timer extends Component\u003cProps, State, Snapshot\u003e {\n    getDerivedStateFromProps?:(nextProps: Readonly\u003cProps\u003e, prevState: State) =\u003e Partial\u003cState\u003e | null;\n    getDerivedStateFromError?: (error: any) =\u003e Partial\u003cState\u003e | null;\n    \n    componentDidMount?(): void\n    shouldComponentUpdate?(nextProps: Readonly\u003cProps\u003e, nextState: Readonly\u003cState\u003e, nextContext: any): boolean;\n    componentWillUnmount?(): void;\n    componentDidCatch?(error: Error, errorInfo: ErrorInfo): void;\n    getSnapshotBeforeUpdate?(prevProps: Readonly\u003cProps\u003e, prevState: Readonly\u003cState\u003e): Snapshot | null;\n    componentDidUpdate?(prevProps: Readonly\u003cProps\u003e, prevState: Readonly\u003cState\u003e, snapshot?: Snapshot): void;\n\n}\n`````\n\nВдобавок необходимо заметить, что код иллюстрирующий жизненный цикл компонента взят из декларации, устанавливаемой из репозитория `@types/react`, и именно поэтому она изобилует излишними преобразованиями в `Readonly\u003cT\u003e` тип. Но как было отмечено ранее, в этом нет нужны поскольку все типы составляющие троицу аргументов базового типа уже прошли преобразование при определении представляющих их псевдонимов. Учитывая этот факт предыдущий код будет выглядеть следующим образом.\n\n`````ts\n/**\n * Более компактная запись\n * без изменения поведения.\n */\nclass Timer extends Component\u003cProps, State, Snapshot\u003e {\n    getDerivedStateFromProps?:(nextProps: Props, prevState: State) =\u003e Partial\u003cState\u003e | null;\n    getDerivedStateFromError?: (error: any) =\u003e Partial\u003cState\u003e | null;\n    \n    componentDidMount?(): void\n    shouldComponentUpdate?(nextProps: Props, nextState: State, nextContext: any): boolean;\n    componentWillUnmount?(): void;\n    componentDidCatch?(error: Error, errorInfo: ErrorInfo): void;\n    getSnapshotBeforeUpdate?(prevProps: Props, prevState: State): Snapshot | null;\n    componentDidUpdate?(prevProps: Props, prevState: State, snapshot?: Snapshot): void;\n\n}\n`````\n\nСледующий в очереди на рассмотрение механизм, получение ссылок на нативные _dom элементы_ и _React компоненты_, обозначаемый как _рефы_ (_refs_). \n\nПредположим, что существует форма, которую по событию `submit` необходимо очистить при помощи нативного метода `reset`, доступного лишь через нативный _dom элемент_, ссылку на который можно получить с помощью механизма рефов, применение которого возможно осуществить двумя способами. Первый способ заключается в создании объекта реф с помощью статического метода `React.createRef()`, а второй в самостоятельном сохранении ссылки на нативный _dom элемент_ с помощью функции обратного вызова.\n\n`````ts\n/**\n * задача заключается в\n * получении ссылки на\n * нативный dom елемент формы [0]. \n */\nclass CheckList extends Component {\n    render(){\n        return (\n            /**[0] */\n            \u003cform\u003e\u003c/form\u003e\n        );\n    }\n}\n`````\n\nНачнем по порядку. Первым делом необходимо определить поле (в нашем случае это `formRef`) необходимое для сохранения объекта реф и желательно, что бы оно было закрытое (`private`) и только для чтения (`readonly`). В примере поле `formRef` определен вместе с аннотацией в которой указан импортированный тип `RefObject\u003cT\u003e`, где параметр типа принимает тип нативного _dom элемента_, в нашем случае `HTMLFormElement`. Но в конкретном примере аннотация излишня поскольку мы указали выводу типов принадлежность нативного _dom элемента_ передав его в качестве аргумента типа функции `React.createRef\u003cT\u003e()`.\n\n`````ts\nimport React, {Component, RefObject} from \"react\";\n\nclass CheckList extends Component {\n                                    /**[1] */                                   /**[2] */\n    private readonly formRef: RefObject\u003cHTMLFormElement\u003e = React.createRef\u003cHTMLFormElement\u003e();\n\n}\n\n/**\n * [0] импорт типа RefObject\u003cT\u003e\n * который в аннотации [1] поля\n * formRef является излишним,\n * так как тип нативного dom элемента\n * был уточнен с помощь передачи его\n * в качестве аргумента типа функции [2]\n */\n`````\n\nНа следующим шаге устанавливаем объект реф _react элементу_ `\u003cform\u003e` и определяем закрытый метод `reset` в котором происходит вызов метода `reset` нативной формы. Не будет лишним обратить внимание, что вызов непосредственно метода `reset` осуществляется при помощи _оператора опциональной последовательности_ (`?.`). Сделано это по причине возможного отсутствия ссылки на нативный элемент.\n\n`````ts\nimport React, {Component, RefObject} from \"react\";\n\n\nclass CheckList extends Component {\n    private readonly formRef: RefObject\u003cHTMLFormElement\u003e = React.createRef\u003cHTMLFormElement\u003e();\n\n    /**[4] */\n    private resetForm(){\n                        /**[5] */\n        this.formRef.current?.reset();\n    }\n\n    render(){\n        return (\n                        /**[3] */\n            \u003cform ref={this.formRef}\u003e\u003c/form\u003e\n        );\n    }\n}\n\n/**\n * [3] установка рефа react элементу.\n * [4] определение закрытого метода.\n * [5] необходимость применения оператора\n * опциональной последовательности по причине\n * возможного отсутствия ссылки на нативный элемент.\n */\n`````\n\nВторой способ получения ссылки на нативный элемент заключается в определении функции принимающей в качестве единственного параметра нативный _dom элемент_, сохранение ссылки на который перекладывается на разработчика.\n\nДля иллюстрации сказанного повторим предыдущий пример. Первым делом импортируем обобщенный тип `RefCallback\u003cT\u003e` описывающий функцию и принимающий в качестве аргумента типа тип нативного _dom элемента_, который будет передан в функцию в качестве единственного аргумента. Затем определим поле `formNativeElement` с типом `union`, множество которого включат не только тип нативного элемента, но и `null`. Это необходимо поскольку при инициализации требуется установить значение принадлежащие к типу `null`. Это необходимо при активном флаге `--strictPropertyInitialization` входящим в группировку определяющую рекомендуемый строгий режим компилятора.\n\nСледующим шагом происходит определение закрытого только для чтения поля `formRefCallback` которому в качестве значения присвоена стрелочная функция. Единственный параметр данной функции лишен аннотации тпа, поскольку вывод типов определит его как принадлежащего к переданному в качестве аргумента типа `RefCallback\u003cT\u003e`. В теле данной функции происходит присваивание её параметра полю `formNativeElement` определенному на предыдущем шаге.\n\n`````ts\n                            /**[0] */\nimport React, {Component, RefCallback} from \"react\";\n\n\nclass CheckList extends Component {\n                /**[1] */               /**[2] */     /**[3] */\n    private formNativeElement: HTMLFormElement | null = null;\n                        /**[4] */                    /**[5] */      /**[6] */                       /**[7] */\n    private readonly formRefCallback: RefCallback\u003cHTMLFormElement\u003e = element =\u003e this.formNativeElement = element;\n\n}\n\n/**\n * [0] импорт типа RefCallback\u003cT\u003e который в качестве аргумента\n * типа ожидает тип нативного элемента.\n * [1] определение поля formNativeElement\n * и присвоение ему значения null [3], что приводит\n * к необходимости объединенного типа включающего\n * тип null [2]. [4] определение поля formRefCallback\n * значением которого служит стрелочная функция принимающая в\n * качестве единственного параметра нативный элемент [6] который затем\n * присваивается полю formNativeElement [7]. Тип этого параметра\n * будет принадлежать к типу переданному в качестве аргумента типа RefCallback\u003cT\u003e [5]\n * \n */\n`````\n\nСтоит заметить, что, то же самое можно реализовать и без помощи типа импортированного `RefCallback\u003cT\u003e`. Для этого лишь потребуется самостоятельно добавить аннотацию типа для параметра функции обратного вызова.\n\n`````ts\nimport React, {Component} from \"react\";\n\n\nclass CheckList extends Component {\n    private formNativeElement: HTMLFormElement | null = null;\n    private readonly formRefCallback = (element: HTMLFormElement) =\u003e this.formNativeElement = element;\n\n}\n\n/**\n * [0] определение поля formNativeElement\n * и присвоение ему значения null [2], что приводит\n * к необходимости объединенного типа включающего\n * тип null [1]. [3] определение поля formRefCallback\n * значением которого служит стрелочная функция в качестве\n * аргумента которая ожидает нативный элемент [4] который\n * затем присваивается полю formNativeElement [5]\n * \n */\n`````\n\nВыбор того или иного способа зависит лишь от предпочтений самого разработчика.\n\nПродолжим доведение примера до финального состояния и установим созданную в первом случае функцию обратного вызова _react элементу_ `\u003cform\u003e` в качестве реф. Также определим уже известный метод `reset` в теле которого будет происходить вызов метода `reset` у нативного _dom элемента_ ссылка на который будет сохранена в поле класса `formNativeElement`.\n\n`````ts\nimport React, {Component, RefCallback} from \"react\";\n\n\nclass CheckList extends Component {\n    private formNativeElement: HTMLFormElement | null = null;\n    private readonly formRefCallback: RefCallback\u003cHTMLFormElement\u003e = element =\u003e this.formNativeElement = element;\n\n\n    /**[1] */\n    private reset(){\n                /**[2] */\n        this.formNativeElement?.reset();\n    }\n\n\n    render(){\n        return (\n                            /**[0] */\n            \u003cform ref={this.formRefCallback}\u003e\u003c/form\u003e\n        );\n    }\n}\n\n/**\n * [0] устанавливаем callback в качестве значения реф\n * после чего определяем метод reset [1] в теле которого\n * при помощи оператора опциональной последовательности\n * вызываем метод reset у нативного dom элемента сохранённого\n * в поле formNativeElement [2]\n * \n */\n`````\n\nИ раз уж тема дошла до рассмотрения рефов, то необходимо рассмотреть механизм получения с их помощью ссылки на классовый компонент.\n\nПервым делом определим классовый компонент `Slider` реализующий два открытых метода предназначенных для перелистывания контента `prev` и `next`. Далее определим компонент `App` в теле которого определим рефу при помощи функции `createRef`, которой (рефе) в качестве аргумента типа передадим тип классового компонента `Slider`. Таким образом вывод типа определит рефу `sliderRef`, как принадлежащую к типу `RefObject\u003cSlider\u003e`. После этого в методе рендер создадим экземпляр компонента `Slider` и два _react элемента_ `\u003cbutton\u003e`, в обработчиках событий `click` которых происходит взаимодействие с компонентом `Slider` при помощи ссылки на него доступной через ассоциированную непосредственно с ним рефу.\n\n\n`````ts\nimport React, {Component, createRef} from \"react\";\n\n\nclass Slider extends Component{\n    public prev = () =\u003e {}; /**[0] */\n    public next = () =\u003e {}; /**[1] */\n    \n}\n\nclass App extends Component {\n                     /**[2]                 [3]*/\n    private readonly sliderRef = createRef\u003cSlider\u003e();\n\n\n    render(){\n        return (\n            \u003c\u003e\n                \u003cbutton onClick={() =\u003e this.sliderRef.current?.prev()}\u003eprev\u003c/button\u003e { /**[4] */}\n                \u003cSlider ref={this.sliderRef} /\u003e { /**[5] */}\n                \u003cbutton onClick={() =\u003e this.sliderRef.current?.next()}\u003enext\u003c/button\u003e { /**[6] */}\n            \u003c/\u003e\n        )\n    }\n}\n\n/**\n * [0] псевдо компонент Slider реализует\n * два доступных метода перелистывания контента\n * назад [0] и вперед [1]. Псевдо компонент App\n * определяет рефу с помощью универсальной функции\n * createRef в качестве аргумента типа которой был\n * установлен тип компонента Slider. В методе render\n * происходит определение двух пользовательских кнопок\n * выполняющих перелистывание по событию click, в обработчиках\n * событий которых происходит вызов доступных методов prev [4]\n * и next [6] через рефу ассоциированную непосредственно с компонентом [5]\n */\n`````\n\n\nНа этом рассмотрение работы с механизмом рефов в типизированном стиле завершено. Но до завершения знакомства с работой классового компонента в основе которого лежит `Component\u003cProps, State, Snapshot\u003e` осталась ещё одна тема, а именно работа с _React событиями_. Кроме того, её освещение будет являться альтернативным решением задачи получения доступа к нативному элементу. Простыми словами реализуем вызов метода `reset` у нативного _dom элемента_ ссылку на который будет получена из объекта события `submit`. Но поскольку данная тема была подробна рассмотрена в главе посвященной функциональным компонентам, здесь подробно будут освещены только моменты присущие исключительно классовым компонентам.\n\nПервым делом возвратим предыдущий пример в первоначальное состояние и добавим кнопку для отправки формы.\n\n`````ts\nimport React, {Component} from \"react\";\n\nclass Form extends Component {\n    render(){\n        return (\n            \u003cform\u003e\n                \u003cbutton type=\"submit\"\u003e\u003c/button\u003e\n            \u003c/form\u003e\n        );\n    }\n}\n`````\nДалее нам потребуется определить закрытое поле только для чтения в качестве значения которого будет присвоена стрелочная функция способная сохранить контекст текущего экземпляра. В качестве типа данного поля укажем импортированный из пространства имен _React_ ранее рассмотренный обобщенный тип `ReactEventHandler\u003cT\u003e`. \n\n`````ts\n\n                              /**[0] */\nimport React, {Component, ReactEventHandler} from \"react\";\n\nclass Form extends Component {\n                            /**[1] */                         /**[2] */     /**[3] */\n    private readonly form_submitHandler: ReactEventHandler\u003cHTMLFormElement\u003e = event =\u003e {\n\n    }\n\n    render(){\n        return (\n                                    /**[4] */\n            \u003cform onSubmit={this.form_submitHandler}\u003e\n                \u003cbutton type=\"submit\"\u003e\u003c/button\u003e\n            \u003c/form\u003e\n        );\n    }\n}\n\n/**\n * [0] импорт типа ReactEventHandler\u003cT\u003e\n * представляющего слушателя события.\n * [1]  Определение закрытого неизменяемого\n * поля принадлежащего к функциональному \n * типу ReactEventHandler\u003cT\u003e. [2] тип нативного\n * dom элемента определенного стандартной\n * библиотекой. [3] единственный параметр\n * функции не нуждается в аннотации поскольку\n * вывод типа опирается на ReactEventHandler\u003cT\u003e.\n * [4] установка слушателя.\n */\n`````\n\nДля завершения примера осталось всего-навсего написать логику слушателя события `submit`, которая также повторяет пример из главы посвященной функциональным компонентам и поэтому подробных комментариев не будет.\n\n`````ts\nclass Form extends Component {\n    private readonly form_submitHandler: ReactEventHandler\u003cFormEvent\u003cHTMLFormElement\u003e\u003e = event =\u003e {\n        event.preventDefault(); // [0]\n        let form = event.target as HTMLFormElement; // [1]\n        form.reset(); // [2]\n    }\n}\n\n/**\n * [0] для предотвращения отправки формы\n * и перезагрузки страницы прерываем стандартное\n * поведение. [1] поскольку доступ к форме можно\n * получить через ссылку свойства target принадлежащего\n * к типу EventTarget, появляется необходимость в\n * приведении к типу HTMLFormElement с при помощи оператора as.\n * [2] вызываем метод reset.\n */\n`````\n\nДанный способ типизирования слушателей событий является предпочтительным поскольку при таком подходе аннотация включает только два типа и, кроме того, стрелочная функция уберегает от неминуемой потери контекста. Случаи требующие определения слушателя как метода класса требуют другого подхода. Отличие заключается в том, что в аннотировании типа нуждается непосредственно параметр слушателя. Но поскольку _React_ делегирует все нативные события, необходимо импортировать тип соответствующего события из его пространства имен. Для событий связанных с формами в _React_ определен обобщенный тип `FormEvent\u003cT\u003e` ожидающий в качестве аргумента типа тип нативного элемента. И поскольку слушатель ничего не возвращает, то тип возвращаемого значения, явное указание которого излишне, определяется как `void`.\n\n\n`````ts\n                            /**[0] */\nimport React, {Component, FormEvent} from \"react\";\n\nclass Form extends Component {\n    /**[1] */                          /**[2] */        /**[3] */\n    form_submitHandler(event: FormEvent\u003cHTMLFormElement\u003e): void {\n    }\n}\n\n/**\n * [0] импортируем тип FormEvent\u003cT\u003e после \n * чего определяем метод form_submitHandler\n * тип единственного параметра которого определен\n * как FormEvent\u003cHTMLFormElement\u003e, а возвращаемое\n * значение [3] которое указанно лишь для того, что бы\n * напомнить об отсутствии необходимости в его явном указании.\n */\n`````\n\nПоскольку установка слушателя представляемого методом класса приведет к неминуемой потери контекста, прибегать к подобному объявлению стоит только при условии, что их тело лишено логики предполагающей обращение к членам через ссылку экземпляра `this`.\n\n`````ts\nclass Form extends Component {\n    form_submitHandler(event: FormEvent\u003cHTMLFormElement\u003e): void {\n        /**\n         * Здесь нельзя обращаться к this\n         * поскольку контекст на текущий экземпляр\n         * был утерян.\n         */\n    }\n\n    render(){\n        return (\n            \u003cform onSubmit={this.form_submitHandler}\u003e\u003c/form\u003e\n        );\n    }\n\n}\n`````\n\nКонтекст можно было бы сохранить прибегнув к методу `bind` или делегированию события непосредственно с помощью стрелочной функции определенной в месте установки слушателя, но зачем? Для `bind` потребуется определения дополнительного поля.\n\n`````ts\nclass Form extends Component {\n    // дополнительное поле\n    private form_submitHandlerBinded: (event: FormEvent\u003cHTMLFormElement\u003e) =\u003e void;\n\n    constructor(props:Props){\n        super(props);\n        \n        // лишняя инициализация\n        this.form_submitHandlerBinded = this.form_submitHandler.bind(this);\n    }\n\n\n    form_submitHandler(event: FormEvent\u003cHTMLFormElement\u003e): void {\n        /**\n         * Теперь здесь можно обращаться к this\n         */\n    }\n\n    render(){\n        return (\n            // в качестве слушателя установлена функция связанная с помощью bind\n            \u003cform onSubmit={this.form_submitHandlerBinded}\u003e\u003c/form\u003e\n        );\n    }\n\n}\n`````\n\nСтрелочная функция будет пересоздаваться каждую отрисовку.\n\n`````ts\nclass Form extends Component {\n    form_submitHandler(event: FormEvent\u003cHTMLFormElement\u003e): void {\n        /**\n         * Теперь здесь можно обращаться к this\n         */\n    }\n\n    render(){\n        return (\n            // пересоздание функции каждую отрисовку\n            \u003cform onSubmit={event =\u003e this.form_submitHandler(event)}\u003e\u003c/form\u003e\n        );\n    }\n\n}\n`````\n\nКроме того, оба случая затрудняют понимание кода. Поэтому необходимо повторить, что использовать метод класса в качестве слушателя события стоит только при отсутствии необходимости в обращении через ссылку `this`. При возникновении именно такого случая не будет лишним уточнения способа выбора типа события. В приведенном примере это был `FormEvent\u003cT\u003e`, поскольку работа производилась с формой. Для других событий появится необходимость в других соответствующих типа, узнать которые можно с помощью подсказок вашей _ide_. Для чего всего-лишь необходимо навести курсор на определение слушателя события.\n\n`````ts\nclass Clicker extends Component {\n    render(){\n        return (\n                /**[0] */\n            \u003cdiv onClick={}\u003e\u003c/div\u003e\n        )\n    }\n\n}\n\n/**\n * [0] при наведении курсором\n * на определение слушателя onClick\n * ide подсказывает тип как MouseEvent\u003cHTMLDivElement\u003e\n */\n`````\n\nТакже не забываем об упомянутом ранее базовом для всех событийных _React_ типов обобщенном типе `SyntheticEvent\u003cT\u003e`, который в качестве аргумента ожидает тип представляющий нативный элемент.\n\nНа этом тему посвященную созданию классового компонента расширяющего `Component\u003cProps, State, Snapshot\u003e` можно заканчивать и переходить к следующей теме. Единственное, что точно не будет лишним, так это собрать весь пройденный материал в одном месте.\n\n`````ts\nimport React, {Component, ReactNode, ReactEventHandler, RefObject, SyntheticEvent, ErrorInfo} from \"react\";\n\ninterface GreeterDefaultProps {} // для декларации свойств по умолчанию\nexport interface GreeterProps extends GreeterDefaultProps {\n    children: ReactNode | ReactNode[]; // указываем, что children могут принадлежать к единичному типу или множеству составляющего тип ReactNode\n} // для декларации обязательных свойств + экспорт интерфейса\ninterface GreeterState {} // для декларации состояния\ninterface GreeterSnapshot {} // для декларации снимка\n\n// создаем псевдонимы для readonly типов представляющих...\ntype DefaultProps = Readonly\u003cGreeterDefaultProps\u003e; // ... статическое поле defaultProps\ntype Props = Readonly\u003cGreeterProps\u003e; // ... поле props\ntype State = Readonly\u003cGreeterState\u003e; // ... поле state\ntype Snapshot = Readonly\u003cGreeterSnapshot\u003e; // ... параметр snapshot определенный в нескольких методах жизненного цикла\n\n\nexport default class Greeter extends Component\u003cProps, State, Snapshot\u003e {\n    public static readonly defaultProps: DefaultProps = {}; // модификатор readonly от случайного изменения статического поля defaultProps которое должно иметь модификатор доступа public\n\n\n    // необязательные методы класса (статические методы)\n    public static getDerivedStateFromProps?:(nextProps: Props, prevState: State) =\u003e Partial\u003cState\u003e | null;\n    public static getDerivedStateFromError?: (error: any) =\u003e Partial\u003cState\u003e | null;\n\n\n    public readonly state: State = {}; // модификатор readonly от случайного изменения поля state которое должно иметь модификатор доступа public\n\n\n    /** два различных способа получения ссылки на нативный dom элемент */\n    // [0] при помощи контейнера\n    private readonly formRef: RefObject\u003cHTMLFormElement\u003e = React.createRef(); // создание объекта RefObject, с помощью которого будет получена ссылка на dom элемент\n    \n    // [1] при помощи callback\n    private textRef: HTMLSpanElement | null = null; // поле, в которое будет сохранена ссылка на DOM-элемент\n    private readonly textRefCallback = (element: HTMLSpanElement) =\u003e this.textRef = element; // определение функции обратного вызова для установления ссылки на DOM-элемент\n\n\n\n    constructor (props: Props) {\n        super(props);\n    }\n\n    \n    // методы жизненного цикла\n    public componentDidMount?(): void\n    public shouldComponentUpdate?(nextProps: Props, nextState: State, nextContext: any): boolean;\n    public componentWillUnmount?(): void;\n    public componentDidCatch?(error: Error, errorInfo: ErrorInfo): void;\n    public getSnapshotBeforeUpdate?(prevProps: Props, prevState: State): Snapshot | null;\n    public componentDidUpdate?(prevProps: Props, prevState: State, snapshot?: Snapshot): void;\n\n\n    /** два варианта определения слушателя событий */\n    // слушатель событий определенный как поле\n    private readonly form_submitHandler: ReactEventHandler\u003cHTMLFormElement\u003e = event =\u003e {\n        // изменение состояния\n        this.setState((prevState: State, prevProps: Props) =\u003e {\n            return {};\n        });\n    };\n    // слушатель событий определенный как метод\n    private submitButton_clickHandler(event: SyntheticEvent\u003cHTMLButtonElement\u003e): void {\n\n    }\n\n    public render(): ReactNode {\n        return (\n            \u003cform ref={this.formRef} onSubmit={this.form_submitHandler}\u003e\n                \u003cspan ref={this.textRefCallback}\u003eSend form?\u003c/span\u003e\n                \u003cbutton type=\"submit\" onClick={this.submitButton_clickHandler}\u003eyes\u003c/button\u003e\n            \u003c/form\u003e\n        );\n    }\n}\n`````"},{"key":"Классовые компоненты_1","elementId":"Proizvodnye_ot_PureComponent\u003cProps,State,Snapshot\u003e","markdown":"## Производные от PureComponent\u003cProps, State, Snapshot\u003e\n\nПомимо того, что пользовательские компоненты могут быть производными от универсального класс `Component\u003cProps, State, Snapshot\u003e`, они также могут использовать в качестве базового класса универсальный класс `PureComponent\u003cProps, State, Snapshot\u003e`. Но поскольку все, что было сказано относительно `Component` в ста процентах случаев верно и для `PureComponent`, который также ничего нового не привносит, то данная глава будет ограничена лишь кодом иллюстрирующим определение пользовательского компонента.\n\n`````ts\nimport React, { PureComponent } from \"react\";\n\n/**[*] */\n\nexport default class Greeter extends PureComponent\u003cProps, State, Snapshot\u003e {\n    /**[*] */\n}\n\n/**\n * [*] здесь предполагается логика\n * рассмотренная в главе, посвященной\n * производным от Component\u003cP, S, SS\u003e\n */\n`````\n\nТем кто только начал своё знакомство с классовыми компонентами с данной главы необходимо вернутся на шаг назад или даже более разумно в самое начало, поскольку именно там объясняется, что для полного понимания необходимо ознакомиться со всем материалом относящимся к _React_."}],"githubFileInfo":{"lastUpdate":1617711223000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"pageNav":{"isPrevPage":true,"isNextPage":true,"prevPage":{"title":"Функциональные компоненты","path":"Funkcionalnye_komponenty"},"nextPage":{"title":"Универсальные компоненты","path":"Universalnye_komponenty"}},"contentNavData":{"key":"Классовые компоненты","level":0,"index":52,"contentIndex":0,"section":"React","title":"Классовые компоненты","path":"Klassovye_komponenty","elementId":"Klassovye_komponenty","children":[{"key":"Классовые компоненты_0","index":0,"contentIndex":1,"level":1,"section":"React","title":"Производные от Component\u003cP, S, SS\u003e","path":"Proizvodnye_ot_Component\u003cP,S,SS\u003e","elementId":"Proizvodnye_ot_Component\u003cP,S,SS\u003e"},{"key":"Классовые компоненты_1","index":1,"contentIndex":2,"level":1,"section":"React","title":"Производные от PureComponent\u003cProps, State, Snapshot\u003e","path":"Proizvodnye_ot_PureComponent\u003cProps,State,Snapshot\u003e","elementId":"Proizvodnye_ot_PureComponent\u003cProps,State,Snapshot\u003e"}]},"pageDescription":"Классовые компоненты"},"__N_SSG":true},"page":"/book/chapters/[chapterId]","query":{"chapterId":"Klassovye_komponenty"},"buildId":"JajVSXSx_2DvzUlQKUhlU","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>