<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="og:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="og:description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="nauchikus"/><meta name="twitter:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="twitter:description" content="Подробная документация и книга в одном по языку TypeScript."/><meta name="yandex-verification" content="d7555ce264b8a099"/><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=no"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><title>TDG-подробное руководство по языку TypeScript</title><meta name="description" content="Функциональные компоненты"/><meta name="og:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="og:description" content="Функциональные компоненты"/><meta name="og:type" content="website"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="nauchikus"/><meta name="twitter:title" content="TDG-подробное руководство по языку TypeScript"/><meta name="twitter:description" content="Функциональные компоненты"/><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/48b3a72d7930fb66ae91.css" as="style"/><link rel="stylesheet" href="/_next/static/css/48b3a72d7930fb66ae91.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/_next/static/chunks/webpack-0e3c274fd8419109d37b.js" defer=""></script><script src="/_next/static/chunks/framework-2f612445bd50b211f15a.js" defer=""></script><script src="/_next/static/chunks/main-7096870a72703e216a95.js" defer=""></script><script src="/_next/static/chunks/pages/_app-cf52effae52c8422f0c7.js" defer=""></script><script src="/_next/static/chunks/452-2343a28788c03f958a4e.js" defer=""></script><script src="/_next/static/chunks/950-86a83352b01b7466f89f.js" defer=""></script><script src="/_next/static/chunks/222-f79b6bb9bf6211af52b8.js" defer=""></script><script src="/_next/static/chunks/460-cf93e771b3da01004124.js" defer=""></script><script src="/_next/static/chunks/763-b007244d3307e1e9232d.js" defer=""></script><script src="/_next/static/chunks/211-d4969ecab0eef9742617.js" defer=""></script><script src="/_next/static/chunks/292-3e1eee2566aad78935fc.js" defer=""></script><script src="/_next/static/chunks/pages/book/chapters/%5BchapterId%5D-4d0f190399df2fda59ad.js" defer=""></script><script src="/_next/static/XWDQAoRNB_TZzeFVmm_Vh/_buildManifest.js" defer=""></script><script src="/_next/static/XWDQAoRNB_TZzeFVmm_Vh/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="base-layout"><div></div><header class="app-header app-header-grid"><div class="app-header-grid-item__driver-toggle"><button class="app-driver-toggle-btn"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"></path></svg></button></div><div class="app-header-grid-item__logo"><span role="img" tabindex="-1" class="anticon app-logo"><svg id="logo_app_svg__Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 118.08 43.32" width="1em" height="1em" fill="currentColor" aria-hidden="true" focusable="false" class=""><defs><style>.logo_app_svg__cls-2{fill:#1d1d1b}</style></defs><path d="M38.56 3.3v8H26v33.6h-9.34V11.28H4.12v-8z" transform="translate(-4.12 -2.34)" fill="#3273b9"></path><path class="logo_app_svg__cls-2" d="M81 24.06a24.31 24.31 0 01-1.68 9.42 17.45 17.45 0 01-4.77 6.66 20.38 20.38 0 01-7.52 4 35 35 0 01-10 1.32q-2.53 0-5.88-.21a48 48 0 01-6.61-.87V3.84A55.14 55.14 0 0151.3 3c2.34-.14 4.36-.21 6-.21A36.41 36.41 0 0167 4a19.87 19.87 0 017.5 3.8 16.88 16.88 0 014.79 6.6A25 25 0 0181 24.06zm-27 13.2q.64.06 1.53.09h2.06q7 0 10.41-3.54t3.39-9.78q0-6.54-3.23-9.9T57.81 10.8h-2a18.29 18.29 0 00-1.91.15zM109.05 10.5q-6.54 0-9.45 3.63t-2.91 9.93a19.58 19.58 0 00.73 5.55 12 12 0 002.15 4.29 9.73 9.73 0 003.6 2.79 12 12 0 005 1q1.56 0 2.67-.06a12.66 12.66 0 002-.24V22.92h9.36V43.5a35.26 35.26 0 01-5.4 1.41 47.42 47.42 0 01-9.18.75 23.76 23.76 0 01-8.48-1.44A17.79 17.79 0 0192.61 40a18.75 18.75 0 01-4.17-6.78A26.63 26.63 0 0187 24.06a24.58 24.58 0 011.62-9.24A19.9 19.9 0 0193 8a18.67 18.67 0 016.64-4.23 22.75 22.75 0 018.12-1.44 32.88 32.88 0 015.31.39 33.5 33.5 0 014.08.9 18.93 18.93 0 012.82 1q1.11.54 1.59.84l-2.7 7.5a24.4 24.4 0 00-4.41-1.77 18.76 18.76 0 00-5.4-.69z" transform="translate(-4.12 -2.34)"></path></svg></span></div><div class="app-header-grid-item__search"><form class="search" autoComplete="off" action="#"><button class="search__submit-button-placeholder button-with-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon search__search-svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg></button><input type="search" class="search__query-input" id="algolia-search" name="app-search-query" placeholder="search..." required=""/></form></div><div class="app-header-grid-item__secondary-bar"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://t.me/nauchikus" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://github.com/nauchikus/typescript-definitive-guide" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="app-header-grid-item__primary-bar"><div class="dropdown app-nav__dropdown"><button class="dropdown__toggle app-nav__dropdown-toggle_adaptive"><svg xmlns="http://www.w3.org/2000/svg" height="24" width="24" class="svg-icon"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"></path></svg></button><div class="dropdown__menu app-nav__dropdown-menu_adaptive"><div class="flat-panel"><div class="app-nav__link-bar app-nav__link-bar_adaptive"><nav class="app-link-bar"><ul class="menu app-link-bar__menu"><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://t.me/nauchikus" title="Следить за выходом новых версий в Telegram" target="_blank"><svg width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414" class="svg-icon"><path d="M18.384 22.779a1.19 1.19 0 001.107.145 1.16 1.16 0 00.724-.84C21.084 18 23.192 7.663 23.983 3.948a.78.78 0 00-.26-.758.8.8 0 00-.797-.14C18.733 4.602 5.82 9.447.542 11.4a.827.827 0 00-.542.799c.012.354.25.661.593.764 2.367.708 5.474 1.693 5.474 1.693s1.452 4.385 2.209 6.615c.095.28.314.5.603.576a.866.866 0 00.811-.207l3.096-2.923s3.572 2.619 5.598 4.062zm-11.01-8.677l1.679 5.538.373-3.507 10.185-9.186a.277.277 0 00.033-.377.284.284 0 00-.376-.064L7.374 14.102z"></path></svg></a></li><li><a class="link svg-link-btn app-link-bar__icon-btn" href="https://github.com/nauchikus/typescript-definitive-guide" title="Посетить Github" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="svg-icon app-link-bar__github-svg-icon"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></li></ul></nav></div><div class="divide-full_x app-nav__divide_adaptive"></div><div class="app-nav__nav"><nav class="app-nav"><ul class="menu app-nav__menu_adaptive"><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/">Главная</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/book/chapters/">Оглавление</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/what-is-new/">Что нового?</a></li><li class="menu-item app-nav__menu-item_adaptive"><a class="link" href="/pdf/">Скачать Pdf</a></li></ul></nav></div></div></div></div></div></header><div class="layer slide-layer" toggle="false"><div class="slide-layer__driver"><div class="slide-layer__fixed-driver"><div class="driver"><div class="layer driver-content-nav"><ul class="ant-menu ant-menu-root ant-menu-inline ant-menu-light driver-content-nav__menu" role="menu" tabindex="0" data-menu-list="true"><li class="ant-menu-submenu ant-menu-submenu-inline ant-menu-submenu-open" role="none"><div role="menuitem" style="padding-left:24px" class="ant-menu-submenu-title" tabindex="-1" aria-expanded="true" aria-haspopup="true"><span class="ant-menu-title-content">Содержание</span><i class="ant-menu-submenu-arrow"></i></div><ul class="ant-menu ant-menu-sub ant-menu-inline" data-menu-list="true"><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/book/chapters/Funkcionalnye_komponenty/#Opredelenie_komponenta_kak_Function_Declaration">Определение компонента как Function Declaration</a></span></li><li role="menuitem" tabindex="-1" style="padding-left:48px" class="ant-menu-item ant-menu-item-only-child"><span class="ant-menu-title-content"><a href="/book/chapters/Funkcionalnye_komponenty/#Opredelenie_komponenta_kak_Function_Expression">Определение компонента как Function Expression</a></span></li></ul></li></ul><div style="display:none" aria-hidden="true"></div></div></div></div></div><div class="slide-layer__first-empty"></div><div class="slide-layer__content"><div class="content-box"><div class="content-box__page-nav content-box__page-nav_left"><div class="page-nav__bar page-nav__bar_left"><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn"><span role="img" aria-label="left" class="anticon anticon-left"><svg viewBox="64 64 896 896" focusable="false" data-icon="left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"></path></svg></span></button></div></div><main id="content" class="content-box__html"><aside><div class="github-file-info-bar"><div class="github-file-info-bar__section github-file-info-bar__section_contributors"><span class="github-file-info-bar__label">Контрибьютеры</span><div class="ant-avatar-group"><a href="https://github.com/nauchikus" target="_blank" class="ant-btn ant-btn-circle github-file-info-bar__avatar-btn"><span class="ant-avatar ant-avatar-circle ant-avatar-image"><img src="https://avatars.githubusercontent.com/u/31518738?v=4"/></span></a></div></div><div class="github-file-info-bar__section github-file-info-bar__section_update-info"><span class="github-file-info-bar__label">Обновлено</span><span class="github-file-info-bar__label_date">4/6/2021</span></div></div></aside><section id="Funkcionalnye_komponenty" class="content__section"><h1 class="content__heading">Функциональные компоненты</h1>
<p>Поскольку создавать <em>React</em> приложения рекомендуется на основе функциональных компонентов, то именно с них и начнется наше погружение в типизированные <code class="content__code_inline">.tsx</code> конструкции.</p>
<p>Всем известно, что <em>React</em> компоненты, обозначаемые как <em>функциональные</em>, являются обычными функциями. И как все функции в <em>JavaScript</em>, они также могут быть определены двумя способами — в виде обычной функции (<em>Function Declaration</em>) и в виде функционального выражения (<em>Function Expression</em>), таящего один неочевидный нюанс, который подробно будет рассмотрен по ходу знакомства с ним.</p></section><section id="Opredelenie_komponenta_kak_Function_Declaration" class="content__section"><h2 class="content__heading">Определение компонента как Function Declaration</h2>
<p>Факт, что функциональный компонент, является обычной функцией, предполагает необходимость в типизировании её сигнатуры или точнее её параметров, так как указание типа возвращаемого значения не просто можно, а даже рекомендуется опустить, возложив эту работу на вывод типов.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>      </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span> 
</span><span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span class="token" style="color:#999">(</span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span class="token" style="color:#999">)</span><span> </span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token maybe-class-name">Is</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [1] функциональный компонент
</span><span class="token doc-comment" style="color:slategray"> * определенный как Function Declaration.
</span><span class="token doc-comment" style="color:slategray"> * [2] отсутствующие параметры.
</span><span class="token doc-comment" style="color:slategray"> * [3] отсутствие явного указания типа
</span><span class="token doc-comment" style="color:slategray"> * возвращаемого типа.
</span><span class="token doc-comment" style="color:slategray"> * [0] все компоненты обязаны импортировать
</span><span class="token doc-comment" style="color:slategray"> * пространство имен React.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Также необходимо всегда помнить, что независимо от того используется пространство имен <code class="content__code_inline">React</code> непосредственно или нет, модули определяющие <em>React</em> компоненты обязаны его импортировать. В противном случае компилятор напомнит об этом с помощью ошибки.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Error -&gt;
</span><span class="token doc-comment" style="color:slategray"> * &#x27;React&#x27; refers to a UMD global, but the current file is a module.
</span><span class="token doc-comment" style="color:slategray"> * Consider adding an import instead.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Message</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#905">I</span><span> ❤️ </span><span class="token maybe-class-name">TypeScript</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
</code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Ok -&gt; добавлен импорт пространства имен React
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Message</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#905">I</span><span> ❤️ </span><span class="token maybe-class-name">TypeScript</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>При определении первого параметра функционального компонента <code class="content__code_inline">props</code> появляется потребность в типе описывающем их.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span>  duration</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span>                                            </span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span>
</span><span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>duration</span><span class="token" style="color:#999">,</span><span> message </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">Done!</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] определения типа интерфейса
</span><span class="token doc-comment" style="color:slategray"> * который будет указан в аннотации
</span><span class="token doc-comment" style="color:slategray"> * первого параметра функционального
</span><span class="token doc-comment" style="color:slategray"> * компонента [3] и чье описание 
</span><span class="token doc-comment" style="color:slategray"> * включает необязательное поле message [1]
</span><span class="token doc-comment" style="color:slategray"> *  и обязательного duration [2] 
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Поскольку идеология <em>React</em> подразумевает <em>прокидывание пропсов</em> из одного компонента в другой, то компоненту выступающему в роли провайдера помимо своих пропсов, необходимо описывать пропсы своих детей. В случаях, когда в проброске нуждаются только несколько значений принадлежащих к типам из системы типов <em>TypeScript</em>, декларирование их в пропсах провайдера не будет выглядеть удручающе.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// file Informer.tsx</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] описание пропсов компонента Informer
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Informer</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>message</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>h1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>message</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>h1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<!-- -->
<span></span><span class="token" style="color:slategray">// file InformerDecorator.tsx</span><span>
</span>
<span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">Informer</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;./Informer&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    decor</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span>    message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] описание пропсов компонента InformerDecorator
</span><span class="token doc-comment" style="color:slategray"> * [1] значение предназначаемое непосредственно текущему компоненту
</span><span class="token doc-comment" style="color:slategray"> * [2] значение предназначаемое компоненту Informer
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">InformerDecorator</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>decor</span><span class="token" style="color:#999">,</span><span> message</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Props</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Informer</span><span> message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>message </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> decor</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Но если пробрасываемые пропсы представлены множеством значений, к тому же, частично или полностью принадлежат к пользовательским типам, то более целесообразно включить в описание типа пропсов компонента-провайдера, тип, описывающий пропсы компонента, которому они предназначаются. Поэтому тип описывающий пропсы желательно всегда экспортировать. Для того, что бы избежать коллизий именования типов представляющих пропсы, их идентификаторы необходимо конкретизировать, то есть давать более уникальные имена. Поэтому принято имени <code class="content__code_inline">Props</code> добавлять префикс идентичный названию самого компонента.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// file Informer.tsx</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>           </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">InformerProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] экспорт типа
</span><span class="token doc-comment" style="color:slategray"> * [1] уточнение идентификатора (имени)
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Informer</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>message</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">InformerProps</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>h1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>message</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>h1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<!-- -->
<span></span><span class="token" style="color:slategray">// file InformerDecorator.tsx</span><span>
</span><span>                    </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">Informer</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">InformerProps</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;./Informer&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт типа пропсов
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>               </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>                   </span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">InformerDecoratorProps</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">InformerProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    decor</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token doc-comment" style="color:slategray">/**[4] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [1] экспорт типа
</span><span class="token doc-comment" style="color:slategray"> * [2] уточнение идентификатора (имени)
</span><span class="token doc-comment" style="color:slategray"> * [3] расширение типа пропсов другого компонента
</span><span class="token doc-comment" style="color:slategray"> * позволяет не дописывать необходимые ему поля [4]
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<!-- -->
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">InformerDecorator</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>decor</span><span class="token" style="color:#999">,</span><span> message</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">InformerDecoratorProps</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Informer</span><span> message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>message </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">+</span><span> decor</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>В случаях когда компонент-провайдер нуждается только в части пропсов определенных в типе представляющих их, ненужную часть можно исключить с помощью типа <code class="content__code_inline">Omit&lt;T, K&gt;</code> или <code class="content__code_inline">Exclude&lt;T, U&gt;</code>.</p>
<p>Тем, кому ближе минимализм, может прийтись по душе подход с получением типа пропсов без его экспорта.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// @filename: Informer.tsx</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// InformerProps не экспортируется наружу</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">InformerProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Informer</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>message</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">InformerProps</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>h1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>message</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>h1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">}</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// @filename: InformerDecorator.tsx</span><span>
</span>
<span>                  </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ComponentType</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Informer</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;./Informer&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>    </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>  </span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span>        </span><span class="token doc-comment" style="color:slategray">/**[4] */</span><span>   </span><span class="token doc-comment" style="color:slategray">/**[5] */</span><span>   </span><span class="token doc-comment" style="color:slategray">/**[6] */</span><span class="token doc-comment" style="color:slategray">/**[7] */</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">GetProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">ComponentType</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">infer</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">Props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span> </span><span class="token maybe-class-name">Props</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">unknown</span><span class="token" style="color:#999">;</span><span>
</span>
<span>        </span><span class="token doc-comment" style="color:slategray">/**[8] */</span><span>               </span><span class="token doc-comment" style="color:slategray">/**[9] */</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">InformerProps</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">GetProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#07a">typeof</span><span> </span><span class="token maybe-class-name">Informer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>                                                  </span><span class="token doc-comment" style="color:slategray">/**[10] */</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">InformerDecoratorProps</span><span> </span><span class="token" style="color:#07a">extends</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">InformerProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    decor</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] Импортируем обобщенный тип ComponentType&lt;Props&gt;
</span><span class="token doc-comment" style="color:slategray"> * представляющий объединение классового и функционального
</span><span class="token doc-comment" style="color:slategray"> * компонента. [1] Импортируем как &quot;только тип&quot; функциональный
</span><span class="token doc-comment" style="color:slategray"> * компонент Informer. [2] Определяем тип GetProps&lt;T&gt; параметр типа
</span><span class="token doc-comment" style="color:slategray"> * которого ожидает тип React компонента. Далее, с помощью механизма
</span><span class="token doc-comment" style="color:slategray"> * определения типа на основе условия (условный тип) выясняем принадлежит
</span><span class="token doc-comment" style="color:slategray"> * ли тип [3] T к React компоненту и в этот момент определяем переменную
</span><span class="token doc-comment" style="color:slategray"> * infer Props [5], которая и будет представлять тип пропсов компонент T.
</span><span class="token doc-comment" style="color:slategray"> * Если условие верно, то возвращаем тип [6] Props, иначе unknown.
</span><span class="token doc-comment" style="color:slategray"> * [8] С помощью типа GetProps, на основе типа Informer, полученного
</span><span class="token doc-comment" style="color:slategray"> * с помощью запроса типа [9], определяем новый  тип InformerProps,
</span><span class="token doc-comment" style="color:slategray"> * который в дальнейшем используем по назначению.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Подобный способ будет не заменим при работе со сторонними библиотеками <em>React</em> компонентов, которые не имеют экспорты типов описывающих свои пропсы.</p>
<p>Не будет лишним напомнить, что при помощи модификатора <code class="content__code_inline">readonly</code> не удастся избежать изменений переменных ссылки на которые были получены с помощью механизма деструктуризации.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">InformerProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">readonly</span><span> message</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<span>                                            </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Informer</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>message</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">InformerProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    message </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#690">&#x27;new value&#x27;</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span>
<span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>h1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>message</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>h1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] добавление модификатора readonly вручную,
</span><span class="token doc-comment" style="color:slategray"> * а затем ещё тоже самое с помощью тип Readonly&lt;T&gt; [1]
</span><span class="token doc-comment" style="color:slategray"> * и тем не менее переменная message изменяема [2].
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Такое поведение является причиной того, что деструктурированные идентификаторы являются определением новой переменной, а переменные не могут иметь модификатор <code class="content__code_inline">readonly</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                  </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#07a">let</span><span> o</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Readonly</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#999">{</span><span>f</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">{</span><span>f</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span><span>o</span><span class="token" style="color:#999">.</span><span class="token property-access">f</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error -&gt; [1]</span><span>
</span>
<span></span><span class="token" style="color:#07a">let</span><span> </span><span class="token" style="color:#999">{</span><span>f</span><span class="token" style="color:#999">}</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> o</span><span class="token" style="color:#999">;</span><span>
</span><span>f </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok -&gt; [2]</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Определение переменной o с типом инлайн интерфейса [0]
</span><span class="token doc-comment" style="color:slategray"> * поля которого модифицированный с помощью типа Readonly&lt;T&gt;.
</span><span class="token doc-comment" style="color:slategray"> * При попытке изменить член o.f с модификатором readonly
</span><span class="token doc-comment" style="color:slategray"> * возникает ошибка [1] -&gt;
</span><span class="token doc-comment" style="color:slategray"> * Cannot assign to &#x27;f&#x27; because it is a read-only property.
</span><span class="token doc-comment" style="color:slategray"> * Чего не происходит при изменении переменной определенной
</span><span class="token doc-comment" style="color:slategray"> * в процессе деструктуризации.
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * Механизм деструктуризации предполагает создание новой
</span><span class="token doc-comment" style="color:slategray"> * переменной со значением одноименного члена объекта указанного
</span><span class="token doc-comment" style="color:slategray"> * в качестве правого операнда выражения.
</span><span class="token doc-comment" style="color:slategray"> * Выражение let </span><span class="token doc-comment" style="color:#999">{</span><span class="token doc-comment" style="color:slategray">f</span><span class="token doc-comment" style="color:#999">}</span><span class="token doc-comment" style="color:slategray"> = o; эквивалентно выражению let f = o.f;
</span><span class="token doc-comment" style="color:slategray"> * В этом случае создается новая переменная тип которой устанавливается
</span><span class="token doc-comment" style="color:slategray"> * выводом типов. А вот модификатор readonly не применим к переменным.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>При необходимости декларирования <code class="content__code_inline">children</code> можно выбрать несколько путей. Первый из них подразумевает использование обобщенного типа <code class="content__code_inline">PropsWithChildren&lt;P&gt;</code> ожидающего в качестве аргумента типа тип представляющий пропсы. Данный тип определяет <code class="content__code_inline">children</code> как необязательное поле принадлежащее к <code class="content__code_inline">ReactNode</code>. При отсутствии продуманного плана насчёт <code class="content__code_inline">children</code> или необходимости их принадлежности к любому допустимому типу, данный тип будет как нельзя к месту.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                    </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">PropsWithChildren</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">LabelProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span>
<span></span><span class="token" style="color:#999">}</span><span>
</span>
<span>                                                </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Label</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">PropsWithChildren</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">LabelProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт типа PropsWithChildren&lt;T&gt;
</span><span class="token doc-comment" style="color:slategray"> * для указания его в аннотации типа параметров [1].
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&quot;label&quot;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// string as children -&gt; Ok [2]</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">1000</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// number as children -&gt; Ok [3]</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// undefined as children -&gt; Ok [4]</span><span>
</span>
<span> </span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray">  * При создании экземпляров компонента Label
</span><span class="token doc-comment" style="color:slategray">  * допустимо указывать в качестве children
</span><span class="token doc-comment" style="color:slategray">  * как строку [2], так и числа [3] и кроме
</span><span class="token doc-comment" style="color:slategray">  * того не указывать значения вовсе [4]
</span><span class="token doc-comment" style="color:slategray">  */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Если логика компонента предполагает обязательную установку <code class="content__code_inline">children</code> или уточнение типа к которому они принадлежат, то появляется необходимость их непосредственной декларации в типе представляющем пропсы этого компонента.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] children определены как 
</span><span class="token doc-comment" style="color:slategray"> * обязательное принадлежащее к
</span><span class="token doc-comment" style="color:slategray"> * типу string поле.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">LabelProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    children</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Label</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">LabelProps</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">label</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">1000</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error -&gt; number не совместим со string</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error -&gt; children обязательны</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Может показаться, что конкретизация типа <code class="content__code_inline">children</code> будет полезна при создании собственных <code class="content__code_inline">ui</code> компонентов. К примеру при создании компонента <code class="content__code_inline">List</code> выполняющего отрисовку элемента <code class="content__code_inline">ul</code>, было бы здорово определить <code class="content__code_inline">children</code>, как массив компонентов <code class="content__code_inline">ListItem</code> отрисовывающих элемент <code class="content__code_inline">li</code>.</p>
<p>Для этого понадобится импортировать обобщенный тип <code class="content__code_inline">ReactElement&lt;P, T&gt;</code>, первый параметр типа которого ожидает тип пропсов, а второй строку или конструктор компонента для указания его в качестве типа поля <code class="content__code_inline">type</code> необходимого для идентификации. По факту тип <code class="content__code_inline">ReactElement&lt;P, T&gt;</code> представляет экземпляр любого компонента в системе типов <em>React</em>. После определения компонентов <code class="content__code_inline">List</code> и <code class="content__code_inline">ListItem</code>, для первого нам понадобится переопределить поле <code class="content__code_inline">children</code>, указав ему тип <code class="content__code_inline">ReactElement&lt;ListItemProps&gt;</code>, что буквально означает — экземпляр компонента, пропсы которого принадлежат к типу указанному в качестве первого аргумента типа.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                  </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactElement</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactNode</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт типа представляющего
</span><span class="token doc-comment" style="color:slategray"> * экземпляр любого компонента.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">ListItemProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    children</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactNode</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [1] для примера определим тип children
</span><span class="token doc-comment" style="color:slategray"> * как ReactNode представляющего любой
</span><span class="token doc-comment" style="color:slategray"> * допустимый тип.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">ListItem</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ListItemProps</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span> </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>li</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>li</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span> </span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<!-- -->
<span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">ListProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    children</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItemProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [2] при определении children
</span><span class="token doc-comment" style="color:slategray"> * указываем тип ReactElement&lt;ListItemProps&gt;
</span><span class="token doc-comment" style="color:slategray"> *, что стоит понимать как - экземпляр компонента
</span><span class="token doc-comment" style="color:slategray"> * пропсы которого совместимы с типом ListItemProps.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">List</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ListProps</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>ul</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>ul</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">List</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>first</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">List</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [3] создаем экземпляр List
</span><span class="token doc-comment" style="color:slategray"> * и указываем ему в качестве children
</span><span class="token doc-comment" style="color:slategray"> * один экземпляр ListItem.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Если кажется просто, то не стоит сомневаться, оно так и есть. Совершенно ничего сложного. Единственное стоит уточнить два важных момента.</p>
<p>Первый момент заключается в том, что конкретизация типа <code class="content__code_inline">children</code> для <em>React</em> элементов не работает. Проще говоря, если определить новый компонент <code class="content__code_inline">Label</code> и указать ему в качестве пропсов тип определяющий единственное поле <code class="content__code_inline">type</code>, то его экземпляр без возникновения ошибки можно будет указать в качестве <code class="content__code_inline">children</code> компоненту <code class="content__code_inline">List</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">ListItemProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    children</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">string</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] оставляем тип пропсов,
</span><span class="token doc-comment" style="color:slategray"> * но для упрощения удаляем компонент
</span><span class="token doc-comment" style="color:slategray"> * нуждающийся в нем.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">LabelProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">&#x27;danger&#x27;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token template-string" style="color:#690">error</span><span class="token template-string template-punctuation" style="color:#690">`</span><span class="token" style="color:#999">;</span><span>
</span><span>    children</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactNode</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Label</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>type</span><span class="token" style="color:#999">,</span><span> children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">LabelProps</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>span className</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#07a">type</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">{</span><span>children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [1] определяем компонент Label
</span><span class="token doc-comment" style="color:slategray"> * и описываем его пропсы.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<!-- -->
<!-- -->
<span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">ListProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    children</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItemProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Тип children по прежнему указан
</span><span class="token doc-comment" style="color:slategray"> * как ReactElement&lt;ListItemProps&gt;.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token" style="color:slategray">// компонент List удален для упрощения</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">List</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span> type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&#x27;danger&#x27;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token maybe-class-name">Hello</span><span> </span><span class="token maybe-class-name">World</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">List</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [3] несмотря на то, что в компоненте List
</span><span class="token doc-comment" style="color:slategray"> * тип children обозначен как ReactElement&lt;ListItemProps&gt;
</span><span class="token doc-comment" style="color:slategray"> * вместо ожидаемого экземпляра без возникновения
</span><span class="token doc-comment" style="color:slategray"> * ошибки устанавливается тип ReactElement&lt;LabelProps&gt;.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Всё дело в том, что экземпляр компонента представляется типом <code class="content__code_inline">Element</code> из пространства имен <em>JSX</em>, является производным от типа <code class="content__code_inline">ReactElement&lt;P, T&gt;</code>. Кроме того, при расширении, своему базовому классу, в качестве аргументов типа, он устанавливает <code class="content__code_inline">any</code> - <code class="content__code_inline">Element extends ReactElement&lt;any, any&gt;</code>. Это в свою очередь означает?, что любые экземпляры компонентов будут совместимы с любыми типами <code class="content__code_inline">ReactElement&lt;P, T&gt;</code>, что делает уточнение типа бессмысленным.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">let</span><span> listItem </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>first</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// let listItem: JSX.Element</span><span>
</span><span></span><span class="token" style="color:#07a">let</span><span> label </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">Label</span><span> type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span class="token" style="color:#690">&#x27;danger&#x27;</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">Label</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// let label: JSX.Element</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Поскольку оба экземпляра принадлежат
</span><span class="token doc-comment" style="color:slategray"> * к типу JSX.Element который в свою очередь
</span><span class="token doc-comment" style="color:slategray"> * является производным от типа ReactElement&lt;any, any&gt;,
</span><span class="token doc-comment" style="color:slategray"> *, то любой экземпляр будет совместим с любым типом ReactElement&lt;P, T&gt;.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span> </span><span class="token" style="color:#07a">let</span><span> v0</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItemProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> label</span><span class="token" style="color:#999">;</span><span>
</span><span> </span><span class="token" style="color:#07a">let</span><span> v1</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">LabelProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> listItem</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Кроме этого, <code class="content__code_inline">ReactElement&lt;P, T&gt;</code> совместим не только с экземплярами компонентов, но и <em>React</em> элементов.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">let</span><span> v</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItemProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>span</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Это, как уже было сказано, делает конкретизацию <code class="content__code_inline">children</code>, для экземпляров <em>React</em> компонентов и элементов, бессмысленной. Остается надеяться, что это исправят.</p>
<p>Второй неочевидный момент состоит в том, что при текущей постановке, в случае необходимости указать в качестве <code class="content__code_inline">children</code> множество экземпляров <code class="content__code_inline">ListItem</code>, возникнет ошибка.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">ListProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    children</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItemProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">List</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>first</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>second</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">List</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] тип указан как единственный
</span><span class="token doc-comment" style="color:slategray"> * экземпляр компонента. поэтому при
</span><span class="token doc-comment" style="color:slategray"> * установке множества экземпляров [1]
</span><span class="token doc-comment" style="color:slategray"> * возникает ошибка.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Для разрешения подобного случая необходимо указать тип <code class="content__code_inline">children</code> как объединение (<code class="content__code_inline">Union</code>) определяемое типами представляющих как единственный экземпляр <code class="content__code_inline">ReactElement&lt;ListItemProps&gt;</code> так и множество, а если быть конкретнее, то массив экземпляров <code class="content__code_inline">ReactElement&lt;ListItemProps&gt;[]</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">ListProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    children</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItemProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token maybe-class-name">ReactElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItemProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">List</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>first</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>second</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">ListItem</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token maybe-class-name">List</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] указание в качестве типа children
</span><span class="token doc-comment" style="color:slategray"> * объединение предполагающее как единственный
</span><span class="token doc-comment" style="color:slategray"> * экземпляр так и множество, ошибка [1] не возникает.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Ввиду того, что тема касающаяся первого параметра функционального компонента обозначаемого пропсами, себя исчерпала, пришло время рассмотреть его второй, нечасто используемый, параметр, обозначаемый как <em>реф</em> и предназначенный для передачи ссылки на текущий компонент. Для большего понимания этого механизма необходимо начать его рассмотрение из далека. Но прежде стоит уточнить два момента. Во-первых, тему посвященную рефам стоит начать с напоминания, что они делятся на два вида. Первый вид предназначен для получения ссылок на <em>React элементы</em>, а второй на <em>React компоненты</em>. Так вот второй параметр функционального компонента предназначен для установления рефы на себя самого, тио есть на компонент. Во вторых, при рассмотрении механизма посвященного рефам, применяются хуки, чья логика работы будет затронута лишь поверхностно, поскольку впереди ожидает целая глава посвященная их подробному рассмотрению.</p>
<p>Представьте сценарий при котором форма должна перейти в начальное состояние путем вызова нативного метода <code class="content__code_inline">reset()</code>, что потребует получения на нее ссылки с помощью объекта рефы создаваемого хуком <code class="content__code_inline">useRef()</code>.</p>
<p>Для начала необходимо с помощью универсальной функции <code class="content__code_inline">useRef()</code> создать объект рефы и присвоить ссылку на него переменной, которую в дальнейшем установить элементу формы. Сразу стоит обратить внимание, что декларации <em>React</em> элементов содержат устаревшие типы в аннотации поля <code class="content__code_inline">ref</code>. Это непременно приведет к возникновению ошибки при установлении объекта рефы. Чтобы этого избежать, необходимо явным образом, при определении объекта рефы, преобразовать его к обобщенному типу <code class="content__code_inline">RefObject&lt;T&gt;</code>, которому в качестве аргумента типа установить тип нативного элемента, в данном случае <code class="content__code_inline">HTMLFormElement</code>. Также стоит сделать акцент на том, что необходимо именно преобразование. Указания аннотации типа переменной или передачи типа в качестве аргумента типа, хуку не поможет. Более детально поведение хука <code class="content__code_inline">useState()</code> рассматривается в главе посвященной предопределенным хукам.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> useRef</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">RefObject</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>                   </span><span class="token doc-comment" style="color:slategray">/**[0]         [1]          [2] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">let</span><span> formRef </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useRef</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token module" style="color:#07a">as</span><span> </span><span class="token maybe-class-name">RefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>    
<span>                 </span><span class="token doc-comment" style="color:slategray">/**[3] */</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>formRef</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Создаваемый хуком объект рефы необходимо преобразовать в обобщенный тип
</span><span class="token doc-comment" style="color:slategray"> * RefObject&lt;T&gt; [1] в качестве аргумента которому требуется указать нативный тип
</span><span class="token doc-comment" style="color:slategray"> * формы [2]. Если не произвести преобразования, то в момент установки объекта рефы форме [3]
</span><span class="token doc-comment" style="color:slategray"> * возникнет ошибка, поскольку декларации описывающие React элементы содержат устаревший
</span><span class="token doc-comment" style="color:slategray"> * тип в аннотации поля ref.
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * БОЛЕЕ ПОДРОБНО В ТЕМЕ ПОСВЯЩЕННОЙ ХУКУ useRef()
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Если появится необходимость задать форме первоначальное состояние извне компонента, то можно прибегнуть к механизму получения ссылки на сам компонент, или точнее на определяемый им объект выступающий в роли публичного <em>api</em>. Но, что бы стало возможным получить ссылку на функциональный компонент, его необходимо преобразовать с помощью универсальной функции <code class="content__code_inline">forwardRef&lt;R, P&gt;()</code>, на которой сфокусируется дальнейшее повествование.</p>
<p>По факту логика работы универсальной функции <code class="content__code_inline">forwardRef&lt;R, P&gt;(render)</code> заключатся в проверке единственного параметра на принадлежность к функциональному типу у которой помимо первого параметра представляющего <code class="content__code_inline">props</code>, определен ещё и второй, представляющий <code class="content__code_inline">ref</code>. Данная функция обозначается как <code class="content__code_inline">render</code> и теоретически её можно считать функциональным компонентом с определением второго параметра предназначенного для установления рефы. В системе типов <em>React</em> функция <code class="content__code_inline">render</code> принадлежит к обобщенному функциональному типу <code class="content__code_inline">ForwardRefRenderFunction&lt;T, P&gt;</code> определяющего два параметра типа, первый из которых представляет тип рефы, а второй пропсов. Первый параметр функции <code class="content__code_inline">render</code> представляющий пропсы не таит в себе ничего необычного. В отличии от него, второй параметр представляющий рефу, требует детального рассмотрения, поскольку именно с ним связан один неочевидный момент.</p>
<p>Дело в том, что рефы могут быть представлены как экземпляром объекта принадлежащего к типу <code class="content__code_inline">RefObject&lt;T&gt;</code> или полностью совместимым с ним <code class="content__code_inline">MutableRefObject&lt;T&gt;</code>, так и функцией <code class="content__code_inline">&lt;T&gt;(instance: T) =&gt; void</code>. Учитывая этот факт, функция <code class="content__code_inline">render</code>, в аннотации типа второго параметра <code class="content__code_inline">ref</code>, просто вынуждена указать все эти типы в качестве <code class="content__code_inline">union</code>. Но сложность состоит в том, что определение объединения происходит непосредственно в аннотации типа параметра <code class="content__code_inline">ref</code>. Простыми словами система типов <em>React</em> не предусмотрела более удобного и короткого псевдонима типа представляющего рефу определяемую функциональным компонентом.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">ForwardRefRenderFunction</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token" style="color:#905">P</span><span class="token" style="color:#DD4A68"> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#DD4A68"> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                                       </span><span class="token doc-comment" style="color:slategray">/**                              [0]                              */</span><span>
</span><span>    </span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">PropsWithChildren</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">P</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">,</span><span> ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">(</span><span>instance</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token maybe-class-name">MutableRefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactElement</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">|</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] тип объединение определенный
</span><span class="token doc-comment" style="color:slategray"> * непосредственно в аннотации типа.
</span><span class="token doc-comment" style="color:slategray"> * Простыми словами он не имеет более
</span><span class="token doc-comment" style="color:slategray"> * удобного короткого псевдонима.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Это означает, что функциональный компонент определенный как <em>Function Declaration</em> и указавший принадлежность второго параметра к типу, скажем <code class="content__code_inline">MutableRefObject&lt;T&gt;</code> не сможет пройти проверку на совместимость типов в качестве аргумента универсальной функции <code class="content__code_inline">forwardRef()</code>, даже если установить её аргументы типа. И причина тому контравариантность параметров функции при проверке на совместимость.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                    </span><span class="token doc-comment" style="color:slategray">/**[0]           [1] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">MutableRefObject</span><span class="token imports" style="color:#999">,</span><span class="token imports"> forwardRef </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FormProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FormApi</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token function-variable" style="color:#DD4A68">reset</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [2] объявление типа описывающего доступное
</span><span class="token doc-comment" style="color:slategray"> * api компонента.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span><span>                               </span><span class="token doc-comment" style="color:slategray">/**[3]       [4]         [5] */</span><span>
</span><span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FormProps</span><span class="token" style="color:#999">,</span><span> ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">MutableRefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">FormApi</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span>        </span><span class="token doc-comment" style="color:slategray">/**[6]          [7]      [8]       [9]     [10] */</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">FormWithRef</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token generic-function" style="color:#DD4A68">forwardRef</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic maybe-class-name" style="color:#DD4A68">FormApi</span><span class="token generic-function generic" style="color:#999">,</span><span class="token generic-function generic" style="color:#DD4A68"> </span><span class="token generic-function generic maybe-class-name" style="color:#DD4A68">FormProps</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">(</span><span class="token maybe-class-name">Form</span><span> </span><span class="token doc-comment" style="color:slategray">/**Error */</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">FormWithRef</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[11] */</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт обобщенного типа MutableRefObject&lt;T&gt;
</span><span class="token doc-comment" style="color:slategray"> * который будет указан в аннотации типа [4] второго
</span><span class="token doc-comment" style="color:slategray"> * параметра [3] функционального компонента предварительно
</span><span class="token doc-comment" style="color:slategray"> * получив в качестве аргумента типа тип нативного dom
</span><span class="token doc-comment" style="color:slategray"> * элемента HTMLDivElement [5].
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * Несмотря на все принятые меры по типизации сигнатуры функционального
</span><span class="token doc-comment" style="color:slategray"> * компонента Form избежать возникновения ошибки [10] при проверке на совместимость
</span><span class="token doc-comment" style="color:slategray"> * в момент передачи в качестве аргумента универсальной функции forwardRef [7] не получится
</span><span class="token doc-comment" style="color:slategray"> * даже при конкретизации с помощью аргументов функционального типа [8][9].
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * [11] для экспорта функционального компонента определяющего второй параметр необходимо
</span><span class="token doc-comment" style="color:slategray"> * сохранить результат выполнения функции forwardRef [6].
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Разрешить данную ситуацию можно несколькими способами. Первый заключается в явном преобразовании типа функционального компонента к типу <code class="content__code_inline">ForwardRefRenderFunction&lt;T, P&gt;</code> которому в качестве аргументов типа требуется указать необходимые типы. При этом отпадает нужда в указании аргументов типа непосредственно самой универсальной функции <code class="content__code_inline">forwardRef&lt;T, P&gt;()</code>;</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                                                     </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">MutableRefObject</span><span class="token imports" style="color:#999">,</span><span class="token imports"> forwardRef</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ForwardRefRenderFunction</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FormProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FormApi</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token function-variable" style="color:#DD4A68">reset</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FormProps</span><span class="token" style="color:#999">,</span><span> ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">MutableRefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">FormApi</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span>                        </span><span class="token doc-comment" style="color:slategray">/**[6]                          [7]       [8]        [9] */</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">FormWithRef</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">forwardRef</span><span class="token" style="color:#999">(</span><span class="token maybe-class-name">Form</span><span> </span><span class="token module" style="color:#07a">as</span><span> </span><span class="token maybe-class-name">ForwardRefRenderFunction</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">FormApi</span><span class="token" style="color:#999">,</span><span> </span><span class="token maybe-class-name">FormProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">FormWithRef</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт обобщенного функционального типа ForwardRefRenderFunction&lt;T, P&gt;
</span><span class="token doc-comment" style="color:slategray"> * к которому тип Form [7] будет преобразован с помощью оператора as, для
</span><span class="token doc-comment" style="color:slategray"> * чего потребуется указать необходимые аргументы типа [8] [9]. При этом отпадает
</span><span class="token doc-comment" style="color:slategray"> * потребность в установке аргументов непосредственно универсальной функции [6]
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Следующий способ заключается в получении типа представляющего рефу непосредственно из самого функционального типа <code class="content__code_inline">ForwardRefRenderFunction&lt;T, P&gt;</code>. Для необходимо указать в аннотации второго параметра функционального компонента обобщенный тип взятого у второго параметра функционального типа <code class="content__code_inline">ForwardRefRenderFunction&lt;T, P&gt;</code> при помощи типа <code class="content__code_inline">Parameters&lt;T&gt;</code> предназначенного для получения массива с типами соответствующих параметрам функции. Поскольку интересующий нас тип принадлежит второму параметру, то он будет доступен как элемент под индексом один. Кроме того, в указании аргументов типа универсальной функции <code class="content__code_inline">forwardRef&lt;T, P&gt;()</code> нет необходимости, поскольку выводу типов достаточно описания сигнатуры функционального компонента.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> forwardRef</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ForwardRefRenderFunction</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FormProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FormApi</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token function-variable" style="color:#DD4A68">reset</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span>  </span><span class="token doc-comment" style="color:slategray">/**[0][1]       [2]             [3]            [4] [5] */</span><span>
</span><span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Parameters</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ForwardRefRenderFunction</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;&gt;</span><span class="token" style="color:#999">[</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span>
<span>                                  </span><span class="token doc-comment" style="color:slategray">/**[6]   [7] */</span><span>
</span><span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FormProps</span><span class="token" style="color:#999">,</span><span> ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">FormApi</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token null nil" style="color:#07a">null</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span>                        </span><span class="token doc-comment" style="color:slategray">/**[8] */</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">FormWithRef</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">forwardRef</span><span class="token" style="color:#999">(</span><span class="token maybe-class-name">Form</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">FormWithRef</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * При помощи типа Parameters&lt;T&gt; [2] получаем массив элементы которого
</span><span class="token doc-comment" style="color:slategray"> * принадлежат к типам параметров функции представляемой типом
</span><span class="token doc-comment" style="color:slategray"> * ForwardRefRenderFunction&lt;T, P&gt; [3] которому в качестве первого аргумента
</span><span class="token doc-comment" style="color:slategray"> * типа [4] устанавливаем параметр обобщенного псевдонима [1]. Таким образом
</span><span class="token doc-comment" style="color:slategray"> * Ref&lt;T&gt; ссылается на первый элемент массива [5] содержащего тип указанный в аннотации
</span><span class="token doc-comment" style="color:slategray"> * второго параметра (ref). Определенный псевдоним указываем в аннотации
</span><span class="token doc-comment" style="color:slategray"> * второго параметра функционального компонента [6] установив в качестве аргумента
</span><span class="token doc-comment" style="color:slategray"> * типа тип нативного dom элемента [7]. При таком сценарии нет необходимости 
</span><span class="token doc-comment" style="color:slategray"> * конкретизировать типы при помощи аргументов типа универсальной функции
</span><span class="token doc-comment" style="color:slategray"> * forwardRef&lt;T, P&gt;() [8]. 
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Последнее на, что стоит обратить внимание, это обобщенный тип <code class="content__code_inline">ForwardRefExoticComponent&lt;P&gt;</code>, к которому принадлежит значение, возвращаемое из универсальной функции <code class="content__code_inline">forwardRef&lt;T, P&gt;()</code>, и который указывать в явной форме нет никакой необходимости.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                                                              </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> forwardRef</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ForwardRefRenderFunction</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ForwardRefExoticComponent</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:slategray">// ...</span><span>
</span>
<span>                            </span><span class="token doc-comment" style="color:slategray">/**[1]                [2] */</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">FormWithRef</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ForwardRefExoticComponent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">FormProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">forwardRef</span><span class="token" style="color:#999">(</span><span class="token maybe-class-name">Form</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">FormWithRef</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт обобщенного типа ForwardRefExoticComponent&lt;P&gt;
</span><span class="token doc-comment" style="color:slategray"> * который в качестве аргумента типа ожидает тип представляющий пропсы того
</span><span class="token doc-comment" style="color:slategray"> * компонента [2] в аннотации типа которого указан [1]. Стоит заметить, 
</span><span class="token doc-comment" style="color:slategray"> * что указан он исключительно в образовательных целях.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>После того как функциональный компонент получит рефу, ему необходимо присвоить ей значение выступающее в качестве открытого <em>api</em>. Для этого необходимо прибегнуть к помощи хука <code class="content__code_inline">useImperativeHandle&lt;T, R&gt;(ref: Ref&lt;T&gt;, apiFactory() =&gt; R): void</code> подробное рассмотрение которого можно найти в теме посвященной предопределенным хукам.</p>
<p>Для того, что бы ассоциировать <em>api</em> компонента с компонентной рефой при помощи хука <code class="content__code_inline">useImperativeHandle()</code>, ему необходимо передать её в качестве первого аргумента. После этого, компонентная рефа будет ассоциирована со значением возвращаемого из функции ожидаемой хуком в качестве второго параметра. Процесс переинициализации компонентной рефы будет выполняться всякий раз при изменении элементов массива ожидаемого в качестве третьего параметра данного хука. Также необходимо уточнить, что рефа создаваемая с помощью хука <code class="content__code_inline">useRef()</code> и предназначенная для ассоциации с функциональным компонентом, также нуждается в явном преобразовании к обобщенному типу <code class="content__code_inline">MutableRefObject&lt;T&gt;</code>, которому в качестве единственного аргумента типа будет установлен тип представляющий открытое <em>api</em> компонента.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> forwardRef</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ForwardRefRenderFunction</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">RefObject</span><span class="token imports" style="color:#999">,</span><span class="token imports"> useRef</span><span class="token imports" style="color:#999">,</span><span class="token imports"> useImperativeHandle</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">MutableRefObject</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FormProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">FormApi</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token function-variable" style="color:#DD4A68">reset</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#07a">void</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">type</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token maybe-class-name">Parameters</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">ForwardRefRenderFunction</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">T</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;&gt;</span><span class="token" style="color:#999">[</span><span class="token" style="color:#905">1</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FormProps</span><span class="token" style="color:#999">,</span><span> ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">Ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">FormApi</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                    </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">let</span><span> formRef </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useRef</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token module" style="color:#07a">as</span><span> </span><span class="token maybe-class-name">RefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>        </span><span class="token doc-comment" style="color:slategray">/**[1]          [2]     [3] */</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">useImperativeHandle</span><span class="token" style="color:#999">(</span><span>ref</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>
</span><span>        </span><span class="token function-variable" style="color:#DD4A68">reset</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> formRef</span><span class="token" style="color:#999">.</span><span class="token property-access">current</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?.</span><span class="token method property-access" style="color:#DD4A68">reset</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span> </span><span class="token doc-comment" style="color:slategray">/**[4] */</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>formRef</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] не забываем о необходимости явного преобразования.
</span><span class="token doc-comment" style="color:slategray"> * Хук useImperativeHandle ожидает в качестве первого параметра
</span><span class="token doc-comment" style="color:slategray"> * ссылку [1], в качестве второго фабричную функцию [3], которая
</span><span class="token doc-comment" style="color:slategray"> * будет переопределять объект api каждый раз при изменении 
</span><span class="token doc-comment" style="color:slategray"> * элементов массива ожидаемого в качестве третьего параметра [4].
</span><span class="token doc-comment" style="color:slategray"> *  
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">FormWithRef</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">forwardRef</span><span class="token" style="color:#999">(</span><span class="token maybe-class-name">Form</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">App</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>                       </span><span class="token doc-comment" style="color:slategray">/**[5]         [6]        [7] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">let</span><span> formRef </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">useRef</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token module" style="color:#07a">as</span><span> </span><span class="token maybe-class-name">MutableRefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">FormApi</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>    
<span>    </span><span class="token doc-comment" style="color:slategray">/**[8] */</span><span>
</span><span>    formRef</span><span class="token" style="color:#999">.</span><span class="token property-access">current</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?.</span><span class="token method property-access" style="color:#DD4A68">reset</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span>                </span><span class="token doc-comment" style="color:slategray">/**[9] */</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">FormWithRef</span><span> ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>formRef</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Необходимо помнить, что ссылка предназначенная
</span><span class="token doc-comment" style="color:slategray"> * для ассоциации с функциональным компонентом
</span><span class="token doc-comment" style="color:slategray"> * также требует явного преобразование [5] к обобщенному
</span><span class="token doc-comment" style="color:slategray"> * типу MutableRefObject&lt;T&gt; [6] которому в качестве аргумента
</span><span class="token doc-comment" style="color:slategray"> * типа необходимо установить тип представляющий открытое api
</span><span class="token doc-comment" style="color:slategray"> * компонента [7]. И после создания экземпляра компонента определенного
</span><span class="token doc-comment" style="color:slategray"> * с помощью функции forwardRef [9] можно использовать его api через объект
</span><span class="token doc-comment" style="color:slategray"> * рефы [8].
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>В связи с тем, что функциональный компонент может определять только два параметра, пора перейти к рассмотрению следующего звена его сигнатуры — аннотации типа возвращаемого им значения. Для этого возвратимся к первоначальному, модифицированному с учетом пропсов, примеру функционального компонента у которого тип возвращаемого значения не указан явно, что в большинстве случаев является предпочтительней явного указания.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Timer</span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">TimerProps</span><span class="token" style="color:#999">)</span><span> </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token maybe-class-name">Is</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] отсутствие явного указания типа
</span><span class="token doc-comment" style="color:slategray"> * возвращаемого типа, которая для большинства
</span><span class="token doc-comment" style="color:slategray"> * случаев является предпочтительным.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>И дело не в том, что бы как можно больше делегировать работы выводу типов экономя тем самым драгоценное время, а в том, что система типов <em>React</em>, устанавливаемая из репозиториев <code class="content__code_inline">@types</code>, не имеет достаточно высокого уровня типобезопасности. Поскольку это очень щекотливая тема её освещение стоит начать с самого начала, а именно с перечисления типов к которым может принадлежать возвращаемое значение.</p>
<p>И так, любое допустимое возвращаемое компонентом значение, в системе типов <em>React</em>, может быть представлено типом <code class="content__code_inline">ReactNode</code> являющимся объединением (<code class="content__code_inline">Union</code>) определяемого типами <code class="content__code_inline">ReactChild | ReactFragment | ReactPortal | boolean | null | undefined</code>. Тип <code class="content__code_inline">ReactChild</code> также представляет собой объединение типов <code class="content__code_inline">ReactElement&lt;Props, Type&gt; | ReactText</code>. Первый, как уже было рассмотрено ранее, представляет экземпляр любого компонента и элемента <em>React</em>, а второй объединение <code class="content__code_inline">string | number</code>. <code class="content__code_inline">ReactFragment</code> представляет объединение для <code class="content__code_inline"> {} | ReactNodeArray</code>. Не сложно догадаться, что <code class="content__code_inline">ReactNodeArray</code>, это абстракция над <code class="content__code_inline">Array&lt;ReactNode&gt;</code>. Оставшийся тип <code class="content__code_inline">ReactPortal</code> является производным от типа <code class="content__code_inline">ReactElement</code>. Это может казаться очень запутанным и более того разбираться в этом прямо сейчас нет нужды, поскольку совсем скоро станет ясно, в чем кроется подвох, причиной которого являются два из перечисленных типа.</p>
<p>Первый тип, вносящий смуту, это ранее рассмотренный <code class="content__code_inline">ReactElement&lt;P, T&gt;</code> и всё неожиданное поведение которое с ним связанно. Вторым типом вносящий неразбериху стал <code class="content__code_inline">ReactFragment</code>, поскольку определяющий его пустой объектный тип <code class="content__code_inline">{}</code> совместим с любым экземпляром объектного типа. По факту, при использовании в качестве типа возвращаемого значения <code class="content__code_inline">ReactFragment</code> или <code class="content__code_inline">ReactNode</code> ошибки не возникнет даже если оно будет экземпляром <code class="content__code_inline">Promise</code> или чего-то ещё. И хотя отсутствие ошибки на этапе компиляции не означает, что её получится избежать во время выполнения, сам сценарий с возвратом ошибочного значения может показаться чересчур надуманным. С какой-то долей вероятности можно с этим согласится, но поскольку идеология <em>TypeScript</em> подразумевает выявление проблем в программах до их запуска, об этом стоило хотя бы упомянуть.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactFragment</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactNode</span><span class="token imports"> </span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#905">A</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactFragment</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Promise</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">resolve</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#905">B</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactNode</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token known-class-name" style="color:#DD4A68">Promise</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">resolve</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] Ok на этапе компиляции и
</span><span class="token doc-comment" style="color:slategray"> * Error во время выполнения.
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<!-- -->
<span></span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token" style="color:#07a">class</span><span> </span><span class="token" style="color:#905">T</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token" style="color:#DD4A68">constructor</span><span class="token" style="color:#999">(</span><span class="token" style="color:#07a">readonly</span><span> p</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#905">C</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactFragment</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token" style="color:#905">D</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactNode</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#07a">new</span><span> </span><span class="token" style="color:#905">T</span><span class="token" style="color:#999">(</span><span class="token" style="color:#905">0</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [1] определение некоторого класса.
</span><span class="token doc-comment" style="color:slategray"> * [2] Ok на этапе компиляции и
</span><span class="token doc-comment" style="color:slategray"> * Error во время выполнения.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Из всего этого следует, что прибегать к аннотации типа возвращаемого значения стоит только в случаях когда оно принадлежит к <code class="content__code_inline">number</code>, <code class="content__code_inline">string</code>, <code class="content__code_inline">boolean</code>, <code class="content__code_inline">null</code> или массиву элементы которого принадлежат к оному из четырех перечисленных типов. Да и, то при острой необходимости. В остальных случаях целесообразней возложить эту работу на вывод типов, для которого это обычное дело.</p>
<p>Последнее, что осталось без внимания, это событийный механизм или если быть точнее определение слушателей событий. Для этого в системе типов <em>React</em> определен специальный обобщенный тип <code class="content__code_inline">ReactEventHandler&lt;T&gt;</code> ожидающий в качестве аргумента типа тип представляющий нативный <em>dom элемент</em>, которому будет установлен текущий слушатель событий.</p>
<p>Представим сценарий в котором по нажатию на кнопку с типом <code class="content__code_inline">submit</code> необходимо вернуть первоначальные значения элементов формы. Для этого потребуется подписать элемент формы на событие <code class="content__code_inline">submit</code> и по его возникновению вызвать у нативного элемента формы, ссылка на которую доступна через свойство событийного объекта <code class="content__code_inline">target</code>, метод <code class="content__code_inline">reset</code>.</p>
<p>Первым делом реализация подобного сценария потребует импорта обобщенного типа <code class="content__code_inline">ReactEventHandler&lt;T&gt;</code>, который в качестве аргумента типа получит тип нативного <em>dom элемента</em> <code class="content__code_inline">HTMLFormElement</code>, после чего будет указан в аннотации слушателя событий <code class="content__code_inline">form_submitHandler</code>. Выбор типа нативного <em>dom элемента</em>, в данном случае <code class="content__code_inline">HTMLFormElement</code>, обуславливается типом элемента, которому устанавливается слушатель событий, в данном случае <code class="content__code_inline">&lt;form&gt;</code>.</p>
<p>Стоит также обратить внимание, что единственный параметр слушателя событий в аннотации типа не нуждается, поскольку вывод типов опирается на обобщенный тип <code class="content__code_inline">ReactEvenHandler&lt;T&gt;</code>.</p>
<p>По возникновению события, первым делом необходимо предотвратить поведение по умолчанию, что бы избежать перезагрузки вкладки браузера. Поскольку ссылка на нативную форму доступна через определенное в объекте события свойство <code class="content__code_inline">target</code>, которое принадлежит к типу <code class="content__code_inline">EventTarget</code>, то перед присвоением её переменной <code class="content__code_inline">form</code> появляется необходимость в приведении к типу <code class="content__code_inline">HTMLFormElement</code> с помощью оператора <code class="content__code_inline">as</code>. После это можно вызывать нативный метод <code class="content__code_inline">reset</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                    </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">ReactEventHandler</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>            </span><span class="token doc-comment" style="color:slategray">/**[1]                 [2]              [3]           [4] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> form_submitHandler</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ReactEventHandler</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> event </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>        event</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">preventDefault</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[5] */</span><span>
</span>
<span>        </span><span class="token doc-comment" style="color:slategray">/**  [6]        [7]              [8] */</span><span>
</span><span>        </span><span class="token" style="color:#07a">let</span><span> form </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> event</span><span class="token" style="color:#999">.</span><span class="token property-access">target</span><span> </span><span class="token module" style="color:#07a">as</span><span> </span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#999">;</span><span>
</span><span>        form</span><span class="token" style="color:#999">.</span><span class="token method property-access" style="color:#DD4A68">reset</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[9] */</span><span>
</span><span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>                            </span><span class="token doc-comment" style="color:slategray">/**[10] */</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form onSubmit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>form_submitHandler</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>button type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#690">&quot;submit&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>submit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>button</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт обобщенного функционального типа
</span><span class="token doc-comment" style="color:slategray"> * которому установив в качестве аргумента типа
</span><span class="token doc-comment" style="color:slategray"> * тип нативного элемента HTMLFormElement [3]
</span><span class="token doc-comment" style="color:slategray"> * использовали в аннотации типа [2] переменной
</span><span class="token doc-comment" style="color:slategray"> * form_submitHandler [1], которой в качестве
</span><span class="token doc-comment" style="color:slategray"> * значения присвоили функцию слушатель события
</span><span class="token doc-comment" style="color:slategray"> * единственный параметр которой не нуждается в
</span><span class="token doc-comment" style="color:slategray"> * явной аннотации типа [4], поскольку вывод типов
</span><span class="token doc-comment" style="color:slategray"> * опирается на тип ReactEventHandler&lt;T&gt;.
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * При возникновении события первым делом происходит
</span><span class="token doc-comment" style="color:slategray"> * предотвращение поведения по умолчанию, что бы избежать
</span><span class="token doc-comment" style="color:slategray"> * перезагрузки вкладки браузера [5]. Затем создается
</span><span class="token doc-comment" style="color:slategray"> * переменная form [6] которой присваивается ссылка на
</span><span class="token doc-comment" style="color:slategray"> * нативный dom элемент доступный через свойство определенное
</span><span class="token doc-comment" style="color:slategray"> * в объекте события target [7] которое при помощи оператора 
</span><span class="token doc-comment" style="color:slategray"> * as приведено к нужному типу нативного dom элемента HTMLFormElement [8].
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * На следующем шаге вызывается нативный метод сброса значений формы reset [9]
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * [10] установка слушателя событий React элементу form.
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Несмотря на то, что такой способ типизирования слушателей событий является предпочтительным, также не будет лишним рассмотреть и другой имеющийся вариант состоящий в описании непосредственно сигнатуры функции.</p>
<p>Для этого, в нашем конкретном случае, необходимо импортировать обобщенный тип <code class="content__code_inline">FormEvent&lt;T&gt;</code>, которому перед размещением в аннотации единственного параметра слушателя события необходимо в качестве аргумента события указать тип нативного <em>dom элемента</em> <code class="content__code_inline">HTMLFormElement</code>. Также стоит напомнить, что в аннотации возвращаемого из слушателя события значения нет необходимости. Подобную рутинную работу необходимо делегировать выводу типов.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">FormEvent</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>                              </span><span class="token doc-comment" style="color:slategray">/**[1]      [2]           [3]          [4] */</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> form_submitHandler </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>event</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">FormEvent</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLFormElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#07a">void</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span>
<span>    </span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form onSubmit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>form_submitHandler</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>button type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#690">&quot;submit&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>submit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>button</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт обобщенного типа FormEvent&lt;T&gt;
</span><span class="token doc-comment" style="color:slategray"> * которому перед добавлением в аннотацию типа [2]
</span><span class="token doc-comment" style="color:slategray"> * единственного параметра слушателя события [1] 
</span><span class="token doc-comment" style="color:slategray"> * необходимо установить в качестве аргумента типа
</span><span class="token doc-comment" style="color:slategray"> * тип нативного dom элемента HTMLFormElement [3].
</span><span class="token doc-comment" style="color:slategray"> * Указании типа к которому принадлежит возвращаемое
</span><span class="token doc-comment" style="color:slategray"> * из слушателя события значения было указанно лишь
</span><span class="token doc-comment" style="color:slategray"> * для того, что бы напомнить об отсутствии в этом необходимости.
</span><span class="token doc-comment" style="color:slategray"> * Подобную работу нужно делегировать выводу типов.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Работа непосредственно с формой обусловила выбор более конкретного типа события, каковым в данном примере стал обобщенный тип <code class="content__code_inline">FormEvent&lt;T&gt;</code>. При других условиях потребуются другие событийные типы. Кроме того, всегда можно сделать выбор в пользу базового для всех событийных типов <code class="content__code_inline">SyntheticEvent&lt;T&gt;</code> ожидающего в качестве аргумента типа тип нативного <em>dom элемента</em>.</p>
<p>Кроме этого, функциональным компонентам доступна мемоизация слушателей событий при помощи универсального хука <code class="content__code_inline">useCallback&lt;T&gt;()</code>. Для этого понадобится импортировать универсальную функцию определяющую два обязательных параметра. В качестве первого параметра ожидается функция чье описание устанавливается в качестве аргумента функционального типа. Второй параметр принадлежит к типу массива, изменение элементов которого приводит к переинициализации функции переданной в качестве первого параметра. Поскольку в качестве аргумента функционального тпа ожидается тип описывающий первый параметр хука, то нет необходимости в аннотациях типа её параметров. Или в данном случае её единственного параметра представляющего объект события. В остальном же реализация ничем не отличается от предыдущего примера, поэтому повторяющийся код будет исключён.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>                </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports" style="color:#999">{</span><span class="token imports">useCallback</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactEventHandler</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">function</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">Form</span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">{</span><span>
</span><span>                                 </span><span class="token doc-comment" style="color:slategray">/**[1]                    [2]                       [3]*/</span><span>
</span><span>    </span><span class="token" style="color:#07a">const</span><span> form_submitHandler </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token generic-function" style="color:#DD4A68">useCallback</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic maybe-class-name" style="color:#DD4A68">ReactEventHandler</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token generic-function generic maybe-class-name" style="color:#DD4A68">HTMLFormElement</span><span class="token generic-function generic" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;&gt;</span><span class="token" style="color:#999">(</span><span>event </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">{</span><span>
</span>
<span>    </span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span> </span><span class="token doc-comment" style="color:slategray">/**[4] */</span><span> </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>    </span><span class="token control-flow" style="color:#07a">return</span><span> </span><span class="token" style="color:#999">(</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>form onSubmit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#999">{</span><span>form_submitHandler</span><span class="token" style="color:#999">}</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>            </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>button type</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#690">&quot;submit&quot;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>submit</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>button</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>        </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>form</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span>
</span><span>    </span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт универсальной функции useCallback&lt;T&gt;()
</span><span class="token doc-comment" style="color:slategray"> * принимающей в качестве первого обязательного параметра
</span><span class="token doc-comment" style="color:slategray"> * функцию [3], описание которой устанавливается в качестве
</span><span class="token doc-comment" style="color:slategray"> * аргумента функционального типа [1]. D качестве второго
</span><span class="token doc-comment" style="color:slategray"> * обязательного параметра ожидается массив [4] со значениями
</span><span class="token doc-comment" style="color:slategray"> * изменение которых приводит переинициализации функции переданной
</span><span class="token doc-comment" style="color:slategray"> * в качестве первого аргумента.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>На этом рассмотрение типизирования функционального компонента определенного как <em>Function Declaration</em>, завершено. И поскольку тема получилась довольно не маленькая исключим затягивание и перейдем к рассмотрению следующего вида функциональных компонентов.</p></section><section id="Opredelenie_komponenta_kak_Function_Expression" class="content__section"><h2 class="content__heading">Определение компонента как Function Expression</h2>
<p>Поскольку самое необходимое относящиеся ко всем видам <em>React</em> компонентов было рассмотрено в предыдущей теме, в этой и последующих, повествование будет сосредоточено исключительно на различиях.</p>
<p>Для определения функционального компонента как <em>Function Expression</em> декларация типов <em>React</em> предусматривает вспомогательный обобщенный тип <code class="content__code_inline">FC&lt;Props&gt;</code>, чей идентификатор (имя) является сокращением от <em>Function Component</em>, а аргумент типа представляет пропсы и является необязательным. Поскольку вывод типов ориентируется на тип пропсов указанный или присущий по умолчанию в качестве аргумента типа, то в аннотировании первого параметра функционального компонента нет надобности. Помимо этого, тип пропсов, по умолчанию описывает необязательное поле <code class="content__code_inline">children</code> принадлежащего к типу <code class="content__code_inline">ReactNode</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>             </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">FC</span><span class="token" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>          </span><span class="token doc-comment" style="color:slategray">/**[1]       [2] */</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">FC</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token maybe-class-name">Is</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт обобщенного типа FC&lt;P&gt;
</span><span class="token doc-comment" style="color:slategray"> * который указан в аннотации без
</span><span class="token doc-comment" style="color:slategray"> * установки аргумента типа [1] и
</span><span class="token doc-comment" style="color:slategray"> * несмотря на это ошибки при деструктуризации
</span><span class="token doc-comment" style="color:slategray"> * поля children не возникает даже без аннотации
</span><span class="token doc-comment" style="color:slategray"> * типа первого параметра [2]
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Если тип пропсов указан в качестве аргумента типа <code class="content__code_inline">FC&lt;P&gt;</code> и при этом не описывает поле <code class="content__code_inline">children</code>, то оно всё равно будет определенно в объекте пропсов доступного в качестве первого параметра функционального компонента.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">FC</span><span class="token" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerProps</span><span> </span><span class="token" style="color:#999">{</span><span>
</span><span>    duration</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#690">number</span><span class="token" style="color:#999">;</span><span>
</span><span>    </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span><span></span><span class="token" style="color:#999">}</span><span>
</span><span>                 </span><span class="token doc-comment" style="color:slategray">/**[1]                     [3]*/</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">FC</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">{</span><span>duration</span><span class="token" style="color:#999">,</span><span> children</span><span class="token" style="color:#999">}</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token maybe-class-name">Is</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] несмотря на то, что тип представляющий
</span><span class="token doc-comment" style="color:slategray"> * пропсы и указанный в качестве аргумента
</span><span class="token doc-comment" style="color:slategray"> * типа FC&lt;P&gt; [1] не описывает поле children
</span><span class="token doc-comment" style="color:slategray"> * при их деструктуризации ошибки не возникает [3]
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
</code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>В остальном все, что было рассмотрено в предыдущей теме относительно пропсов и <code class="content__code_inline">children</code> идентично и для данного способа типизирования функциональных компонентов.</p>
<p>При возникновении необходимости в определении второго параметра функционального компонента придется самостоятельно указывать аннотацию типа, поскольку по каким-то причинам обобщенный тип <code class="content__code_inline">FC&lt;P&gt;</code> этого не предусматривает.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#905">FC</span><span> </span><span class="token" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span>                             </span><span class="token doc-comment" style="color:slategray">/**[1]   [2] */</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">FC</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">,</span><span> ref</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token maybe-class-name">Is</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * Первый параметр [0] выводится как
</span><span class="token doc-comment" style="color:slategray"> * PropsWithChildren&lt;TimerProps&gt;, а
</span><span class="token doc-comment" style="color:slategray"> * второй [2] как any, поскольку обобщенный
</span><span class="token doc-comment" style="color:slategray"> * тип FC&lt;P&gt; не предусматривает его наличие.
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>В остальном все рассмотренное относительно рефов в теме посвященной функциональным компонентам определенным как <em>Function Declaration</em>, верно и для текущего вида определения.</p>
<p>При необходимости во втором параметре можно отказаться от типа <code class="content__code_inline">FC&lt;P&gt;</code> в пользу ранее рассмотренного типа <code class="content__code_inline">ForwardRefRenderFunction&lt;T, P&gt;</code>. При указании данного типа в аннотации функционального компонента, пропадает необходимость, как в явном аннотировании типов его параметров, так и в указании аргументов типа универсальной функции <code class="content__code_inline">forwardRef&lt;T, P&gt;()</code>.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span> </span><span class="token" style="color:#905">FC</span><span class="token" style="color:#999">,</span><span> forwardRef</span><span class="token" style="color:#999">,</span><span> </span><span class="token maybe-class-name">ForwardRefRenderFunction</span><span> </span><span class="token" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span>
<!-- -->
<span>                    </span><span class="token doc-comment" style="color:slategray">/**[1] */</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">ForwardRefRenderFunction</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLDivElement</span><span class="token" style="color:#999">,</span><span> </span><span class="token maybe-class-name">TimerProps</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">,</span><span> ref</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token maybe-class-name">Is</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">!</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span>
</span>
<!-- -->
<span>                        </span><span class="token doc-comment" style="color:slategray">/**[2] */</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">TimerWithRef</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#DD4A68">forwardRef</span><span class="token" style="color:#999">(</span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#999">)</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token module" style="color:#07a">default</span><span> </span><span class="token maybe-class-name">TimerWithRef</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт типа для указания его в аннотации
</span><span class="token doc-comment" style="color:slategray"> * функционального компонента [1] определяющего второй
</span><span class="token doc-comment" style="color:slategray"> * параметр ref. После этого нет необходимости в явной
</span><span class="token doc-comment" style="color:slategray"> * аннотации типов как обоих параметров функционального
</span><span class="token doc-comment" style="color:slategray"> * компонента, так и универсальной функции forwardRef&lt;T, P&gt;().
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Важной особенностью использования обобщенного типа <code class="content__code_inline">FC&lt;P&gt;</code> заключается в том, что он, помимо типа представляющего пропсы, также содержит описание типа возвращаемого функцией значения. Вроде бы так и должно быть, но нюанс заключается в том, что возвращаемое значение обязательно должно принадлежать к типу совместимому с <code class="content__code_inline">ReactElement&lt;P, T&gt;</code>. Простыми словами на этапе компиляции возникнет ошибка если функциональный компонент, определенный как <em>Function Expression</em>, будет возвращать значение принадлежащие к типам <code class="content__code_inline">number</code>, <code class="content__code_inline">string</code>, <code class="content__code_inline">boolean</code> или абсолютно любому массиву.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token maybe-class-name">React</span><span class="token" style="color:#999">,</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">FC</span><span class="token" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">A</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">FC</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#905">0123</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">B</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">FC</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#690">&quot;0123&quot;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">C</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">FC</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#905">true</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">D</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">FC</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#999">[</span><span class="token" style="color:#999">]</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Error</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">E</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">FC</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span>div</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">F</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">FC</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">E</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token" style="color:#905">G</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">FC</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">/</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">;</span><span> </span><span class="token" style="color:slategray">// Ok</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Поэтому в случае, предполагающем, что функциональный компонент, определенный как <em>Function Expression</em>, будет возвращать значение отличное от <code class="content__code_inline">ReactElement&lt;P, T&gt;</code>, потребуется самостоятельно описать его сигнатуру. Что не представляет никакого труда.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">MutableRefObject</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span>
<span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token function-variable maybe-class-name" style="color:#DD4A68">Timer</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">TimerProps</span><span class="token" style="color:#999">,</span><span> ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">MutableRefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">HTMLDivElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#905">123</span><span class="token" style="color:#999">;</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>Если в подобном определении функциональных компонентов существует частая потребность, будет целесообразней определить собственный тип подробно описывающий сигнатуру функции.</p>
<p>Для этого потребуется определить обобщенный тип с двумя необязательными параметрами. Первый необязательный параметр представляющий тип пропсов должен расширять и к тому же указывать в качестве типа по умолчанию тип <code class="content__code_inline">object</code>. Второй необязательный параметр типа должен проделать тот же процесс только для нативного типа <code class="content__code_inline">HTMLElement</code>.</p>
<p>Чтобы не заморачиваться в определении <code class="content__code_inline">children</code>, указываем принадлежность первого параметра функции к уже знакомому обобщенному типу <code class="content__code_inline">PropsWithChildren&lt;P&gt;</code>, которому в качестве аргумента типа устанавливаем первый параметр типа <code class="content__code_inline">P</code>. Второму необязательному параметру функции указываем принадлежность к обобщенному типу <code class="content__code_inline">MutableRefObject&lt;E&gt;</code> в качестве аргумента типа которому устанавливаем второй параметр типа <code class="content__code_inline">E</code>. Осталось лишь указать принадлежность возвращаемого функцией значения к типу <code class="content__code_inline">ReactNode</code> и тип <code class="content__code_inline">CFC&lt;P, E&gt;</code>, что является сокращением от <em>Custom Functional Component</em>, готов сэкономить время и нервы разработчика.</p>
<div class="content__code"><div class="content__code-panel_top content__code-panel_lang_ts"><span class="content_code-label_lang">ts</span></div><pre class="content__pre"><div style="color:black;background:node;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-ts" style="color:black;background:none;text-shadow:0 1px white;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:slategray">// file CFC.ts</span><span>
</span>
<span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span class="token imports" style="color:#999">,</span><span class="token imports" style="color:#999">{</span><span class="token imports maybe-class-name">MutableRefObject</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ReactNode</span><span class="token imports" style="color:#999">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">PropsWithChildren</span><span class="token imports" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span>
<span>         </span><span class="token doc-comment" style="color:slategray">/**[0][1]         [2]     [3][4]           [5]            [6]                       [7]                      [8]             [9]*/</span><span>
</span><span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">type</span><span> </span><span class="token" style="color:#905">CFC</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">P</span><span class="token" style="color:#DD4A68"> </span><span class="token" style="color:#07a">extends</span><span class="token" style="color:#DD4A68"> object </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#DD4A68"> object</span><span class="token" style="color:#999">,</span><span class="token" style="color:#DD4A68"> </span><span class="token" style="color:#905">E</span><span class="token" style="color:#DD4A68"> </span><span class="token" style="color:#07a">extends</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">HTMLElement</span><span class="token" style="color:#DD4A68"> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span class="token" style="color:#DD4A68"> </span><span class="token maybe-class-name" style="color:#DD4A68">HTMLElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">PropsWithChildren</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">P</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">,</span><span> ref</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">?</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token maybe-class-name">MutableRefObject</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token" style="color:#905">E</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token maybe-class-name">ReactNode</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] определяем обобщенный тип CustomFunctionComponent
</span><span class="token doc-comment" style="color:slategray"> * или сокращенно CFC первый необязательный параметр представляющего
</span><span class="token doc-comment" style="color:slategray"> * пропсы которого [1] расширяет [2] и устанавливает по умолчанию [3]
</span><span class="token doc-comment" style="color:slategray"> * тип object. Второй необязательный параметр представляющий тип нативного
</span><span class="token doc-comment" style="color:slategray"> * dom элемента [4] расширяет [5] и устанавливает по умолчанию [6] тип HTMLElement.
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * [7] устанавливаем принадлежность первого параметра функционального типа к
</span><span class="token doc-comment" style="color:slategray"> * обобщенному типу PropsWithChildren&lt;P&gt; которому в качестве аргумента типа передаем первый
</span><span class="token doc-comment" style="color:slategray"> * параметр типа. 
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * [8] определяем принадлежность второго необязательного параметра к обобщенному типу
</span><span class="token doc-comment" style="color:slategray"> * MutableRefObject&lt;E&gt; которому в качестве аргумента типа устанавливаем второй параметр типа.
</span><span class="token doc-comment" style="color:slategray"> * 
</span><span class="token doc-comment" style="color:slategray"> * [9] тип возвращаемого значения определяем как ReactNode.
</span><span class="token doc-comment" style="color:slategray"> *  
</span><span class="token doc-comment" style="color:slategray"> */</span><span>
</span>
<!-- -->
<span></span><span class="token" style="color:slategray">// file Timer.tsx</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token imports maybe-class-name">React</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;react&quot;</span><span class="token" style="color:#999">;</span><span>
</span><span></span><span class="token module" style="color:#07a">import</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#905">CFC</span><span class="token" style="color:#999">}</span><span> </span><span class="token module" style="color:#07a">from</span><span> </span><span class="token" style="color:#690">&quot;./CFC&quot;</span><span class="token" style="color:#999">;</span><span> </span><span class="token doc-comment" style="color:slategray">/**[0] */</span><span>
</span>
<!-- -->
<span></span><span class="token module" style="color:#07a">export</span><span> </span><span class="token" style="color:#07a">interface</span><span> </span><span class="token maybe-class-name" style="color:#DD4A68">TimerProps</span><span> </span><span class="token" style="color:#999">{</span><span class="token" style="color:#999">}</span><span>
</span>
<span>          </span><span class="token doc-comment" style="color:slategray">/**[1]    [2]           [3]            [4]   [5]     [6]*/</span><span>
</span><span></span><span class="token" style="color:#07a">const</span><span> </span><span class="token maybe-class-name">Timer</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">:</span><span> </span><span class="token" style="color:#905">CFC</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&lt;</span><span class="token maybe-class-name">TimerProps</span><span class="token" style="color:#999">,</span><span> </span><span class="token maybe-class-name">HTMLDivElement</span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">&gt;</span><span> </span><span class="token" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=</span><span> </span><span class="token" style="color:#999">(</span><span>props</span><span class="token" style="color:#999">,</span><span> ref</span><span class="token" style="color:#999">)</span><span> </span><span class="token arrow" style="color:#9a6e3a;background:hsla(0, 0%, 100%, .5)">=&gt;</span><span> </span><span class="token" style="color:#905">123</span><span class="token" style="color:#999">;</span><span>
</span>
<span></span><span class="token doc-comment" style="color:slategray">/**
</span><span class="token doc-comment" style="color:slategray"> * [0] импорт CustomFunctionComponent для
</span><span class="token doc-comment" style="color:slategray"> * указания его в качестве типа функционального
</span><span class="token doc-comment" style="color:slategray"> * компонента определенного как Function Expression [1].
</span><span class="token doc-comment" style="color:slategray"> * В качестве первого параметра типа устанавливается тип
</span><span class="token doc-comment" style="color:slategray"> * представляющий пропсы [2], а в качестве второго тип нативного
</span><span class="token doc-comment" style="color:slategray"> * dom элемента с которым будет ассоциирован объект реф [3].
</span><span class="token doc-comment" style="color:slategray"> * При таком подходе отпадает необходимость в явном указании аннотации
</span><span class="token doc-comment" style="color:slategray"> * типов как пропсов [4], так и рефы [5]. Кроме того, возвращаемое значение
</span><span class="token doc-comment" style="color:slategray"> * может принадлежать к любому типу совместимому с типом ReactNode [6]
</span><span class="token doc-comment" style="color:slategray"> */
</span></code></div></pre><div class="content__code-panel_bottom content__code-panel_lang_ts"></div></div>
<p>На этом тема относящаяся функциональных компонентов себя полностью исчерпала, поэтому без лишних слов двигаемся к следующей теме посвященной классовым компонентам.</p></section><aside class="content-box__page__content-bar_post"><nav class="post-content-bar__nav"><a href="Tipizirovannyi_React" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_prev"><div class="post-content-bar__nav__btn_padding-fix"><span role="img" aria-label="arrow-left" class="anticon anticon-arrow-left post-content-bar__nav__btn__icon_prev"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-left" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"></path></svg></span><span class="post-content-bar__nav__btn__label">Типизированный React</span></div></a><a href="Klassovye_komponenty" class="ant-btn ant-btn-lg ant-btn-block post-content-bar__nav__btn post-content-bar__nav__btn_next"><div class="post-content-bar__nav__btn_padding-fix"><span class="post-content-bar__nav__btn__label">Классовые компоненты</span><span role="img" aria-label="arrow-right" class="anticon anticon-arrow-right post-content-bar__nav__btn__icon_next"><svg viewBox="64 64 896 896" focusable="false" data-icon="arrow-right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"></path></svg></span></div></a></nav></aside></main><div class="content-box__page-nav content-box__page-nav_right"><div class="page-nav__bar page-nav__bar_right"><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="up" class="anticon anticon-up"><svg viewBox="64 64 896 896" focusable="false" data-icon="up" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"></path></svg></span></button></span><button type="button" class="ant-btn ant-btn-primary ant-btn-icon-only page-nav__btn page-nav__btn_next-page"><span role="img" aria-label="right" class="anticon anticon-right"><svg viewBox="64 64 896 896" focusable="false" data-icon="right" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"></path></svg></span></button><span style="display:inline-block;cursor:not-allowed" class="page-nav__btn ant-tooltip-disabled-compatible-wrapper"><button disabled="" style="pointer-events:none" type="button" class="ant-btn ant-btn-primary ant-btn-icon-only"><span role="img" aria-label="down" class="anticon anticon-down"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></button></span></div></div></div></div><div class="slide-layer__last-empty"></div></div><footer class="app-footer"><div class="app-footer__empty"></div><div class="app-footer_contacts app-footer__section"></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"urlResolver":{"image":"https://raw.githubusercontent.com/nauchikus/typescript-definitive-guide/master/book/ru/chapters/051.(React) Функциональные компоненты/images/"},"sectionInfoAll":[{"key":"Функциональные компоненты","elementId":"Funkcionalnye_komponenty","markdown":"# Функциональные компоненты\n\nПоскольку создавать _React_ приложения рекомендуется на основе функциональных компонентов, то именно с них и начнется наше погружение в типизированные `.tsx` конструкции.\n\nВсем известно, что _React_ компоненты, обозначаемые как _функциональные_, являются обычными функциями. И как все функции в _JavaScript_, они также могут быть определены двумя способами — в виде обычной функции (_Function Declaration_) и в виде функционального выражения (_Function Expression_), таящего один неочевидный нюанс, который подробно будет рассмотрен по ходу знакомства с ним."},{"key":"Функциональные компоненты_0","elementId":"Opredelenie_komponenta_kak_Function_Declaration","markdown":"## Определение компонента как Function Declaration\n\nФакт, что функциональный компонент, является обычной функцией, предполагает необходимость в типизировании её сигнатуры или точнее её параметров, так как указание типа возвращаемого значения не просто можно, а даже рекомендуется опустить, возложив эту работу на вывод типов.\n\n`````ts\n      /**[0] */\nimport React from \"react\";\n\n/**[1] */ \nfunction Timer(/**[2] */) /**[3] */ {\n  return \u003cdiv\u003eIs Timer!\u003c/div\u003e;\n}\n\nexport default Timer;\n\n/**\n * [1] функциональный компонент\n * определенный как Function Declaration.\n * [2] отсутствующие параметры.\n * [3] отсутствие явного указания типа\n * возвращаемого типа.\n * [0] все компоненты обязаны импортировать\n * пространство имен React.\n */\n`````\n\nТакже необходимо всегда помнить, что независимо от того используется пространство имен `React` непосредственно или нет, модули определяющие _React_ компоненты обязаны его импортировать. В противном случае компилятор напомнит об этом с помощью ошибки.\n\n`````ts\n/**\n * Error -\u003e\n * 'React' refers to a UMD global, but the current file is a module.\n * Consider adding an import instead.\n */\n\nexport function Message() {\n  return \u003cspan\u003eI ❤️ TypeScript!\u003c/span\u003e;\n}\n\n`````\n\n`````ts\nimport React from \"react\";\n\n/**\n * Ok -\u003e добавлен импорт пространства имен React\n */\n\nexport function Message() {\n  return \u003cspan\u003eI ❤️ TypeScript!\u003c/span\u003e;\n}\n`````\n\nПри определении первого параметра функционального компонента `props` появляется потребность в типе описывающем их. \n\n`````ts\n/**[0] */\ninterface Props {\n  message?: string; /**[1] */\n  duration: number; /**[2] */\n}\n\n                                            /**[3] */\nfunction Timer({duration, message = `Done!`}: Props) {\n  return \u003cdiv\u003e\u003c/div\u003e;\n}\n\n/**\n * [0] определения типа интерфейса\n * который будет указан в аннотации\n * первого параметра функционального\n * компонента [3] и чье описание \n * включает необязательное поле message [1]\n *  и обязательного duration [2] \n */\n `````\n\nПоскольку идеология _React_ подразумевает _прокидывание пропсов_ из одного компонента в другой, то компоненту выступающему в роли провайдера помимо своих пропсов, необходимо описывать пропсы своих детей. В случаях, когда в проброске нуждаются только несколько значений принадлежащих к типам из системы типов _TypeScript_, декларирование их в пропсах провайдера не будет выглядеть удручающе.\n\n`````ts\n// file Informer.tsx\n\n/**[0] */\ninterface Props {\n    message: string;\n}\n\n/**\n * [0] описание пропсов компонента Informer\n */\n\nexport default function Informer({message}: Props){\n  return \u003ch1\u003e{message}\u003c/h1\u003e\n}\n\n\n\n// file InformerDecorator.tsx\n\nimport Informer from \"./Informer\";\n\n\n/**[0] */\ninterface Props {\n    decor: number; /**[1] */\n    message: string; /**[2] */\n}\n\n/**\n * [0] описание пропсов компонента InformerDecorator\n * [1] значение предназначаемое непосредственно текущему компоненту\n * [2] значение предназначаемое компоненту Informer\n */\n\nexport default function InformerDecorator({decor, message}: Props){\n  return \u003cInformer message={message + decor}/\u003e;\n}\n`````\n\nНо если пробрасываемые пропсы представлены множеством значений, к тому же, частично или полностью принадлежат к пользовательским типам, то более целесообразно включить в описание типа пропсов компонента-провайдера, тип, описывающий пропсы компонента, которому они предназначаются. Поэтому тип описывающий пропсы желательно всегда экспортировать. Для того, что бы избежать коллизий именования типов представляющих пропсы, их идентификаторы необходимо конкретизировать, то есть давать более уникальные имена. Поэтому принято имени `Props` добавлять префикс идентичный названию самого компонента.\n\n`````ts\n// file Informer.tsx\n\n/**[0] */           /**[1] */\nexport interface InformerProps {\n    message: string;\n}\n\n/**\n * [0] экспорт типа\n * [1] уточнение идентификатора (имени)\n */\n\nexport default function Informer({message}: InformerProps){\n  return \u003ch1\u003e{message}\u003c/h1\u003e\n}\n\n\n\n// file InformerDecorator.tsx\n                    /**[0] */\nimport Informer, {InformerProps} from \"./Informer\";\n\n/**\n * [0] импорт типа пропсов\n */\n\n/**[1] */               /**[2] */                   /**[3] */\nexport interface InformerDecoratorProps extends InformerProps {\n    decor: number;\n    /**[4] */\n}\n\n/**\n * [1] экспорт типа\n * [2] уточнение идентификатора (имени)\n * [3] расширение типа пропсов другого компонента\n * позволяет не дописывать необходимые ему поля [4]\n */\n\n\nexport default function InformerDecorator({decor, message}: InformerDecoratorProps){\n  return \u003cInformer message={message + decor}/\u003e;\n}\n`````\n\nВ случаях когда компонент-провайдер нуждается только в части пропсов определенных в типе представляющих их, ненужную часть можно исключить с помощью типа `Omit\u003cT, K\u003e` или `Exclude\u003cT, U\u003e`.\n\nТем, кому ближе минимализм, может прийтись по душе подход с получением типа пропсов без его экспорта. \n\n`````ts\n// @filename: Informer.tsx\nimport React from \"react\";\n\n// InformerProps не экспортируется наружу\ninterface InformerProps {\n    message: string;\n}\n\nexport default function Informer({message}: InformerProps){\n  return \u003ch1\u003e{message}\u003c/h1\u003e\n}\n`````\n\n`````ts\n// @filename: InformerDecorator.tsx\n\n                  /**[0] */\nimport React, { ComponentType } from \"react\";\n    /**[1] */\nimport type Informer from \"./Informer\";\n\n    /**[2] */  /**[3] */        /**[4] */   /**[5] */   /**[6] *//**[7] */\ntype GetProps\u003cT\u003e = T extends ComponentType\u003cinfer Props\u003e ? Props : unknown;\n\n        /**[8] */               /**[9] */\ntype InformerProps = GetProps\u003ctypeof Informer\u003e;\n\n                                                  /**[10] */\nexport interface InformerDecoratorProps extends InformerProps {\n    decor: number;\n}\n\n/**\n * [0] Импортируем обобщенный тип ComponentType\u003cProps\u003e\n * представляющий объединение классового и функционального\n * компонента. [1] Импортируем как \"только тип\" функциональный\n * компонент Informer. [2] Определяем тип GetProps\u003cT\u003e параметр типа\n * которого ожидает тип React компонента. Далее, с помощью механизма\n * определения типа на основе условия (условный тип) выясняем принадлежит\n * ли тип [3] T к React компоненту и в этот момент определяем переменную\n * infer Props [5], которая и будет представлять тип пропсов компонент T.\n * Если условие верно, то возвращаем тип [6] Props, иначе unknown.\n * [8] С помощью типа GetProps, на основе типа Informer, полученного\n * с помощью запроса типа [9], определяем новый  тип InformerProps,\n * который в дальнейшем используем по назначению.\n */\n`````\n\nПодобный способ будет не заменим при работе со сторонними библиотеками _React_ компонентов, которые не имеют экспорты типов описывающих свои пропсы.\n\nНе будет лишним напомнить, что при помощи модификатора `readonly` не удастся избежать изменений переменных ссылки на которые были получены с помощью механизма деструктуризации.\n\n`````ts\nexport interface InformerProps {\n    /**[0] */\n    readonly message: string;\n};\n\n                                            /**[1] */\nexport default function Informer({message} : Readonly\u003cInformerProps\u003e){\n    message = 'new value'; /**[2] */\n\n    return \u003ch1\u003e{message}\u003c/h1\u003e\n}\n\n/**\n * [0] добавление модификатора readonly вручную,\n * а затем ещё тоже самое с помощью тип Readonly\u003cT\u003e [1]\n * и тем не менее переменная message изменяема [2].\n */\n `````\n\n\nТакое поведение является причиной того, что деструктурированные идентификаторы являются определением новой переменной, а переменные не могут иметь модификатор `readonly`.\n\n`````ts\n                  /**[0] */\nlet o: Readonly\u003c{f: number}\u003e = {f: 0};\no.f = 1; // Error -\u003e [1]\n\nlet {f} = o;\nf = 1; // Ok -\u003e [2]\n\n/**\n * Определение переменной o с типом инлайн интерфейса [0]\n * поля которого модифицированный с помощью типа Readonly\u003cT\u003e.\n * При попытке изменить член o.f с модификатором readonly\n * возникает ошибка [1] -\u003e\n * Cannot assign to 'f' because it is a read-only property.\n * Чего не происходит при изменении переменной определенной\n * в процессе деструктуризации.\n * \n * Механизм деструктуризации предполагает создание новой\n * переменной со значением одноименного члена объекта указанного\n * в качестве правого операнда выражения.\n * Выражение let {f} = o; эквивалентно выражению let f = o.f;\n * В этом случае создается новая переменная тип которой устанавливается\n * выводом типов. А вот модификатор readonly не применим к переменным.\n */\n `````\n\nПри необходимости декларирования `children` можно выбрать несколько путей. Первый из них подразумевает использование обобщенного типа `PropsWithChildren\u003cP\u003e` ожидающего в качестве аргумента типа тип представляющий пропсы. Данный тип определяет `children` как необязательное поле принадлежащее к `ReactNode`. При отсутствии продуманного плана насчёт `children` или необходимости их принадлежности к любому допустимому типу, данный тип будет как нельзя к месту.\n\n`````ts\n                    /**[0] */\nimport React, {PropsWithChildren} from \"react\";\n\nexport interface LabelProps {\n\n}\n\n                                                /**[1] */\nexport default function Label({children}: PropsWithChildren\u003cLabelProps\u003e){\n    return (\n        \u003cspan\u003e{children}\u003c/span\u003e\n    );\n}\n\n/**\n * [0] импорт типа PropsWithChildren\u003cT\u003e\n * для указания его в аннотации типа параметров [1].\n */\n\n\n\u003cLabel\u003e{\"label\"}\u003c/Label\u003e; // string as children -\u003e Ok [2]\n\u003cLabel\u003e{1000}\u003c/Label\u003e; // number as children -\u003e Ok [3]\n\u003cLabel\u003e\u003c/Label\u003e; // undefined as children -\u003e Ok [4]\n\n /**\n  * При создании экземпляров компонента Label\n  * допустимо указывать в качестве children\n  * как строку [2], так и числа [3] и кроме\n  * того не указывать значения вовсе [4]\n  */\n `````\n\nЕсли логика компонента предполагает обязательную установку `children` или уточнение типа к которому они принадлежат, то появляется необходимость их непосредственной декларации в типе представляющем пропсы этого компонента.\n\n`````ts\n/**\n * [0] children определены как \n * обязательное принадлежащее к\n * типу string поле.\n */\ninterface LabelProps {\n    children: string; /**[0] */\n}\n\n\nexport default function Label({children}: LabelProps){\n    return (\n        \u003cspan\u003e{children}\u003c/span\u003e\n    );\n}\n\n\n\u003cLabel\u003e{`label`}\u003c/Label\u003e; // Ok\n\u003cLabel\u003e{1000}\u003c/Label\u003e; // Error -\u003e number не совместим со string\n\u003cLabel\u003e\u003c/Label\u003e; // Error -\u003e children обязательны\n`````\n\nМожет показаться, что конкретизация типа `children` будет полезна при создании собственных `ui` компонентов. К примеру при создании компонента `List` выполняющего отрисовку элемента `ul`, было бы здорово определить `children`, как массив компонентов `ListItem` отрисовывающих элемент `li`.\n\nДля этого понадобится импортировать обобщенный тип `ReactElement\u003cP, T\u003e`, первый параметр типа которого ожидает тип пропсов, а второй строку или конструктор компонента для указания его в качестве типа поля `type` необходимого для идентификации. По факту тип `ReactElement\u003cP, T\u003e` представляет экземпляр любого компонента в системе типов _React_. После определения компонентов `List` и `ListItem`, для первого нам понадобится переопределить поле `children`, указав ему тип `ReactElement\u003cListItemProps\u003e`, что буквально означает — экземпляр компонента, пропсы которого принадлежат к типу указанному в качестве первого аргумента типа.\n\n`````ts\n                  /**[0] */\nimport React, { ReactElement, ReactNode } from \"react\";\n\n/**\n * [0] импорт типа представляющего\n * экземпляр любого компонента.\n */\n\ninterface ListItemProps {\n    children: ReactNode; /**[1] */\n}\n\n/**\n * [1] для примера определим тип children\n * как ReactNode представляющего любой\n * допустимый тип.\n */\n\n function ListItem({children}: ListItemProps){\n return \u003cli\u003e{children}\u003c/li\u003e;\n }\n\n\n\ninterface ListProps {\n    children: ReactElement\u003cListItemProps\u003e; /**[2] */\n}\n\n/**\n * [2] при определении children\n * указываем тип ReactElement\u003cListItemProps\u003e\n *, что стоит понимать как - экземпляр компонента\n * пропсы которого совместимы с типом ListItemProps.\n */\n\nfunction List({children}: ListProps) {\n    return \u003cul\u003e{children}\u003c/ul\u003e;\n}\n\n/**[3] */\n\u003cList\u003e\n    \u003cListItem\u003efirst\u003c/ListItem\u003e\n\u003c/List\u003e\n\n/**\n * [3] создаем экземпляр List\n * и указываем ему в качестве children\n * один экземпляр ListItem.\n */\n `````\n\nЕсли кажется просто, то не стоит сомневаться, оно так и есть. Совершенно ничего сложного. Единственное стоит уточнить два важных момента.\n\nПервый момент заключается в том, что конкретизация типа `children` для _React_ элементов не работает. Проще говоря, если определить новый компонент `Label` и указать ему в качестве пропсов тип определяющий единственное поле `type`, то его экземпляр без возникновения ошибки можно будет указать в качестве `children` компоненту `List`.\n\n`````ts\n/**[0] */\ninterface ListItemProps {\n    children: string;\n}\n\n/**\n * [0] оставляем тип пропсов,\n * но для упрощения удаляем компонент\n * нуждающийся в нем.\n */\n\n/**[1] */\ninterface LabelProps {\n    type: 'danger' | `error`;\n    children: ReactNode;\n}\n\n/**[1] */\nfunction Label({type, children}: LabelProps){\n    return \u003cspan className={type}\u003e{children}\u003c/span\u003e\n}\n\n/**\n * [1] определяем компонент Label\n * и описываем его пропсы.\n */\n\n\n\ninterface ListProps {\n    children: ReactElement\u003cListItemProps\u003e; /**[2] */\n}\n\n/**\n * Тип children по прежнему указан\n * как ReactElement\u003cListItemProps\u003e.\n */\n\n// компонент List удален для упрощения\n\n/**[3] */\n\u003cList\u003e\n    \u003cLabel type={'danger'}\u003eHello World!\u003c/Label\u003e\n\u003c/List\u003e\n\n/**\n * [3] несмотря на то, что в компоненте List\n * тип children обозначен как ReactElement\u003cListItemProps\u003e\n * вместо ожидаемого экземпляра без возникновения\n * ошибки устанавливается тип ReactElement\u003cLabelProps\u003e.\n */\n `````\n\nВсё дело в том, что экземпляр компонента представляется типом `Element` из пространства имен _JSX_, является производным от типа `ReactElement\u003cP, T\u003e`. Кроме того, при расширении, своему базовому классу, в качестве аргументов типа, он устанавливает `any` - `Element extends ReactElement\u003cany, any\u003e`. Это в свою очередь означает?, что любые экземпляры компонентов будут совместимы с любыми типами `ReactElement\u003cP, T\u003e`, что делает уточнение типа бессмысленным.\n\n`````ts\nlet listItem = \u003cListItem\u003efirst\u003c/ListItem\u003e; // let listItem: JSX.Element\nlet label = \u003cLabel type={'danger'}\u003elabel\u003c/Label\u003e; // let label: JSX.Element\n\n/**\n * Поскольку оба экземпляра принадлежат\n * к типу JSX.Element который в свою очередь\n * является производным от типа ReactElement\u003cany, any\u003e,\n *, то любой экземпляр будет совместим с любым типом ReactElement\u003cP, T\u003e.\n */\n\n let v0: ReactElement\u003cListItemProps\u003e = label;\n let v1: ReactElement\u003cLabelProps\u003e = listItem;\n `````\n\n Кроме этого, `ReactElement\u003cP, T\u003e` совместим не только с экземплярами компонентов, но и _React_ элементов.\n\n`````ts\nlet v: ReactElement\u003cListItemProps\u003e = \u003cspan\u003e\u003c/span\u003e; // Ok\n`````\n\nЭто, как уже было сказано, делает конкретизацию `children`, для экземпляров _React_ компонентов и элементов, бессмысленной. Остается надеяться, что это исправят.\n\nВторой неочевидный момент состоит в том, что при текущей постановке, в случае необходимости указать в качестве `children` множество экземпляров `ListItem`, возникнет ошибка.\n\n`````ts\ninterface ListProps {\n    children: ReactElement\u003cListItemProps\u003e; /**[0] */\n}\n\n/**[1] */\n\u003cList\u003e\n    \u003cListItem\u003efirst\u003c/ListItem\u003e\n    \u003cListItem\u003esecond\u003c/ListItem\u003e\n\u003c/List\u003e\n\n/**\n * [0] тип указан как единственный\n * экземпляр компонента. поэтому при\n * установке множества экземпляров [1]\n * возникает ошибка.\n */\n`````\n\nДля разрешения подобного случая необходимо указать тип `children` как объединение (`Union`) определяемое типами представляющих как единственный экземпляр `ReactElement\u003cListItemProps\u003e` так и множество, а если быть конкретнее, то массив экземпляров `ReactElement\u003cListItemProps\u003e[]`.\n\n`````ts\ninterface ListProps {\n    children: ReactElement\u003cListItemProps\u003e | ReactElement\u003cListItemProps\u003e[]; /**[0] */\n}\n\n/**[1] */\n\u003cList\u003e\n    \u003cListItem\u003efirst\u003c/ListItem\u003e\n    \u003cListItem\u003esecond\u003c/ListItem\u003e\n\u003c/List\u003e\n\n/**\n * [0] указание в качестве типа children\n * объединение предполагающее как единственный\n * экземпляр так и множество, ошибка [1] не возникает.\n */\n`````\n\nВвиду того, что тема касающаяся первого параметра функционального компонента обозначаемого пропсами, себя исчерпала, пришло время рассмотреть его второй, нечасто используемый, параметр, обозначаемый как _реф_ и предназначенный для передачи ссылки на текущий компонент. Для большего понимания этого механизма необходимо начать его рассмотрение из далека. Но прежде стоит уточнить два момента. Во-первых, тему посвященную рефам стоит начать с напоминания, что они делятся на два вида. Первый вид предназначен для получения ссылок на _React элементы_, а второй на _React компоненты_. Так вот второй параметр функционального компонента предназначен для установления рефы на себя самого, тио есть на компонент. Во вторых, при рассмотрении механизма посвященного рефам, применяются хуки, чья логика работы будет затронута лишь поверхностно, поскольку впереди ожидает целая глава посвященная их подробному рассмотрению.\n\nПредставьте сценарий при котором форма должна перейти в начальное состояние путем вызова нативного метода `reset()`, что потребует получения на нее ссылки с помощью объекта рефы создаваемого хуком `useRef()`.\n\nДля начала необходимо с помощью универсальной функции `useRef()` создать объект рефы и присвоить ссылку на него переменной, которую в дальнейшем установить элементу формы. Сразу стоит обратить внимание, что декларации _React_ элементов содержат устаревшие типы в аннотации поля `ref`. Это непременно приведет к возникновению ошибки при установлении объекта рефы. Чтобы этого избежать, необходимо явным образом, при определении объекта рефы, преобразовать его к обобщенному типу `RefObject\u003cT\u003e`, которому в качестве аргумента типа установить тип нативного элемента, в данном случае `HTMLFormElement`. Также стоит сделать акцент на том, что необходимо именно преобразование. Указания аннотации типа переменной или передачи типа в качестве аргумента типа, хуку не поможет. Более детально поведение хука `useState()` рассматривается в главе посвященной предопределенным хукам.\n  \n\n`````ts\nimport React, { useRef, RefObject } from \"react\";\n\nfunction Form(){\n                   /**[0]         [1]          [2] */\n    let formRef = useRef() as RefObject\u003cHTMLFormElement\u003e;\n    \n                 /**[3] */\n    return \u003cform ref={formRef}\u003e\u003c/form\u003e\n}\n\n/**\n * Создаваемый хуком объект рефы необходимо преобразовать в обобщенный тип\n * RefObject\u003cT\u003e [1] в качестве аргумента которому требуется указать нативный тип\n * формы [2]. Если не произвести преобразования, то в момент установки объекта рефы форме [3]\n * возникнет ошибка, поскольку декларации описывающие React элементы содержат устаревший\n * тип в аннотации поля ref.\n * \n * БОЛЕЕ ПОДРОБНО В ТЕМЕ ПОСВЯЩЕННОЙ ХУКУ useRef()\n * \n */\n `````\n\nЕсли появится необходимость задать форме первоначальное состояние извне компонента, то можно прибегнуть к механизму получения ссылки на сам компонент, или точнее на определяемый им объект выступающий в роли публичного _api_. Но, что бы стало возможным получить ссылку на функциональный компонент, его необходимо преобразовать с помощью универсальной функции `forwardRef\u003cR, P\u003e()`, на которой сфокусируется дальнейшее повествование.\n\nПо факту логика работы универсальной функции `forwardRef\u003cR, P\u003e(render)` заключатся в проверке единственного параметра на принадлежность к функциональному типу у которой помимо первого параметра представляющего `props`, определен ещё и второй, представляющий `ref`. Данная функция обозначается как `render` и теоретически её можно считать функциональным компонентом с определением второго параметра предназначенного для установления рефы. В системе типов _React_ функция `render` принадлежит к обобщенному функциональному типу `ForwardRefRenderFunction\u003cT, P\u003e` определяющего два параметра типа, первый из которых представляет тип рефы, а второй пропсов. Первый параметр функции `render` представляющий пропсы не таит в себе ничего необычного. В отличии от него, второй параметр представляющий рефу, требует детального рассмотрения, поскольку именно с ним связан один неочевидный момент.\n\nДело в том, что рефы могут быть представлены как экземпляром объекта принадлежащего к типу `RefObject\u003cT\u003e` или полностью совместимым с ним `MutableRefObject\u003cT\u003e`, так и функцией `\u003cT\u003e(instance: T) =\u003e void`. Учитывая этот факт, функция `render`, в аннотации типа второго параметра `ref`, просто вынуждена указать все эти типы в качестве `union`. Но сложность состоит в том, что определение объединения происходит непосредственно в аннотации типа параметра `ref`. Простыми словами система типов _React_ не предусмотрела более удобного и короткого псевдонима типа представляющего рефу определяемую функциональным компонентом.\n\n`````ts\ninterface ForwardRefRenderFunction\u003cT, P = {}\u003e {\n                                       /**                              [0]                              */\n    (props: PropsWithChildren\u003cP\u003e, ref: ((instance: T | null) =\u003e void) | MutableRefObject\u003cT | null\u003e | null): ReactElement | null;\n}\n\n/**\n * [0] тип объединение определенный\n * непосредственно в аннотации типа.\n * Простыми словами он не имеет более\n * удобного короткого псевдонима.\n */\n`````\n\nЭто означает, что функциональный компонент определенный как _Function Declaration_ и указавший принадлежность второго параметра к типу, скажем `MutableRefObject\u003cT\u003e` не сможет пройти проверку на совместимость типов в качестве аргумента универсальной функции `forwardRef()`, даже если установить её аргументы типа. И причина тому контравариантность параметров функции при проверке на совместимость.\n\n\n`````ts\n                    /**[0]           [1] */\nimport React, { MutableRefObject, forwardRef } from \"react\";\n\nexport interface FormProps {}\n\n/**[2] */\nexport interface FormApi {\n    reset: () =\u003e void;\n}\n\n/**\n * [2] объявление типа описывающего доступное\n * api компонента.\n */\n                               /**[3]       [4]         [5] */\nfunction Form(props: FormProps, ref: MutableRefObject\u003cFormApi\u003e) {\n    return null;\n}\n\n        /**[6]          [7]      [8]       [9]     [10] */\nconst FormWithRef = forwardRef\u003cFormApi, FormProps\u003e(Form /**Error */);\n\nexport default FormWithRef; /**[11] */\n\n/**\n * [0] импорт обобщенного типа MutableRefObject\u003cT\u003e\n * который будет указан в аннотации типа [4] второго\n * параметра [3] функционального компонента предварительно\n * получив в качестве аргумента типа тип нативного dom\n * элемента HTMLDivElement [5].\n * \n * Несмотря на все принятые меры по типизации сигнатуры функционального\n * компонента Form избежать возникновения ошибки [10] при проверке на совместимость\n * в момент передачи в качестве аргумента универсальной функции forwardRef [7] не получится\n * даже при конкретизации с помощью аргументов функционального типа [8][9].\n * \n * [11] для экспорта функционального компонента определяющего второй параметр необходимо\n * сохранить результат выполнения функции forwardRef [6].\n */\n`````\n\nРазрешить данную ситуацию можно несколькими способами. Первый заключается в явном преобразовании типа функционального компонента к типу `ForwardRefRenderFunction\u003cT, P\u003e` которому в качестве аргументов типа требуется указать необходимые типы. При этом отпадает нужда в указании аргументов типа непосредственно самой универсальной функции `forwardRef\u003cT, P\u003e()`;\n\n`````ts\n                                                     /**[0] */\nimport React, { MutableRefObject, forwardRef, ForwardRefRenderFunction } from \"react\";\n\nexport interface FormProps {}\nexport interface FormApi {\n    reset: () =\u003e void;\n}\n\nfunction Form(props: FormProps, ref: MutableRefObject\u003cFormApi\u003e) {\n    return null;\n}\n\n                        /**[6]                          [7]       [8]        [9] */\nconst FormWithRef = forwardRef(Form as ForwardRefRenderFunction\u003cFormApi, FormProps\u003e);\n\nexport default FormWithRef;\n\n/**\n * [0] импорт обобщенного функционального типа ForwardRefRenderFunction\u003cT, P\u003e\n * к которому тип Form [7] будет преобразован с помощью оператора as, для\n * чего потребуется указать необходимые аргументы типа [8] [9]. При этом отпадает\n * потребность в установке аргументов непосредственно универсальной функции [6]\n */\n`````\n\nСледующий способ заключается в получении типа представляющего рефу непосредственно из самого функционального типа `ForwardRefRenderFunction\u003cT, P\u003e`. Для необходимо указать в аннотации второго параметра функционального компонента обобщенный тип взятого у второго параметра функционального типа `ForwardRefRenderFunction\u003cT, P\u003e` при помощи типа `Parameters\u003cT\u003e` предназначенного для получения массива с типами соответствующих параметрам функции. Поскольку интересующий нас тип принадлежит второму параметру, то он будет доступен как элемент под индексом один. Кроме того, в указании аргументов типа универсальной функции `forwardRef\u003cT, P\u003e()` нет необходимости, поскольку выводу типов достаточно описания сигнатуры функционального компонента.\n\n`````ts\nimport React, { forwardRef, ForwardRefRenderFunction } from \"react\";\n\nexport interface FormProps {}\nexport interface FormApi {\n    reset: () =\u003e void;\n}\n\n  /**[0][1]       [2]             [3]            [4] [5] */\ntype Ref\u003cT\u003e = Parameters\u003cForwardRefRenderFunction\u003cT\u003e\u003e[1];\n\n                                  /**[6]   [7] */\nfunction Form(props: FormProps, ref: Ref\u003cFormApi\u003e) {\n    return null;\n}\n\n                        /**[8] */\nconst FormWithRef = forwardRef(Form);\n\nexport default FormWithRef;\n\n/**\n * При помощи типа Parameters\u003cT\u003e [2] получаем массив элементы которого\n * принадлежат к типам параметров функции представляемой типом\n * ForwardRefRenderFunction\u003cT, P\u003e [3] которому в качестве первого аргумента\n * типа [4] устанавливаем параметр обобщенного псевдонима [1]. Таким образом\n * Ref\u003cT\u003e ссылается на первый элемент массива [5] содержащего тип указанный в аннотации\n * второго параметра (ref). Определенный псевдоним указываем в аннотации\n * второго параметра функционального компонента [6] установив в качестве аргумента\n * типа тип нативного dom элемента [7]. При таком сценарии нет необходимости \n * конкретизировать типы при помощи аргументов типа универсальной функции\n * forwardRef\u003cT, P\u003e() [8]. \n */\n`````\n\nПоследнее на, что стоит обратить внимание, это обобщенный тип `ForwardRefExoticComponent\u003cP\u003e`, к которому принадлежит значение, возвращаемое из универсальной функции `forwardRef\u003cT, P\u003e()`, и который указывать в явной форме нет никакой необходимости.\n\n`````ts\n                                                              /**[0] */\nimport React, { forwardRef, ForwardRefRenderFunction, ForwardRefExoticComponent } from \"react\";\n\n// ...\n\n                            /**[1]                [2] */\nconst FormWithRef: ForwardRefExoticComponent\u003cFormProps\u003e = forwardRef(Form);\n\nexport default FormWithRef;\n\n/**\n * [0] импорт обобщенного типа ForwardRefExoticComponent\u003cP\u003e\n * который в качестве аргумента типа ожидает тип представляющий пропсы того\n * компонента [2] в аннотации типа которого указан [1]. Стоит заметить, \n * что указан он исключительно в образовательных целях.\n */\n `````\n\nПосле того как функциональный компонент получит рефу, ему необходимо присвоить ей значение выступающее в качестве открытого _api_. Для этого необходимо прибегнуть к помощи хука `useImperativeHandle\u003cT, R\u003e(ref: Ref\u003cT\u003e, apiFactory() =\u003e R): void` подробное рассмотрение которого можно найти в теме посвященной предопределенным хукам. \n\nДля того, что бы ассоциировать _api_ компонента с компонентной рефой при помощи хука `useImperativeHandle()`, ему необходимо передать её в качестве первого аргумента. После этого, компонентная рефа будет ассоциирована со значением возвращаемого из функции ожидаемой хуком в качестве второго параметра. Процесс переинициализации компонентной рефы будет выполняться всякий раз при изменении элементов массива ожидаемого в качестве третьего параметра данного хука. Также необходимо уточнить, что рефа создаваемая с помощью хука `useRef()` и предназначенная для ассоциации с функциональным компонентом, также нуждается в явном преобразовании к обобщенному типу `MutableRefObject\u003cT\u003e`, которому в качестве единственного аргумента типа будет установлен тип представляющий открытое _api_ компонента.\n\n`````ts\nimport React, { forwardRef, ForwardRefRenderFunction, RefObject, useRef, useImperativeHandle, MutableRefObject } from \"react\";\n\ninterface FormProps {}\ninterface FormApi {\n    reset: () =\u003e void;\n}\n\ntype Ref\u003cT\u003e = Parameters\u003cForwardRefRenderFunction\u003cT\u003e\u003e[1];\n\nfunction Form(props: FormProps, ref: Ref\u003cFormApi\u003e) {\n                    /**[0] */\n    let formRef = useRef() as RefObject\u003cHTMLFormElement\u003e;\n\n        /**[1]          [2]     [3] */\n    useImperativeHandle(ref, () =\u003e ({\n        reset: () =\u003e formRef.current?.reset()\n    }), [] /**[4] */);\n\n\n    return \u003cform ref={formRef}\u003e\u003c/form\u003e;\n}\n\n/**\n * [0] не забываем о необходимости явного преобразования.\n * Хук useImperativeHandle ожидает в качестве первого параметра\n * ссылку [1], в качестве второго фабричную функцию [3], которая\n * будет переопределять объект api каждый раз при изменении \n * элементов массива ожидаемого в качестве третьего параметра [4].\n *  \n */\n\nconst FormWithRef = forwardRef(Form);\n\n\nconst App = () =\u003e {\n                       /**[5]         [6]        [7] */\n    let formRef = useRef() as MutableRefObject\u003cFormApi\u003e;\n    \n    /**[8] */\n    formRef.current?.reset();\n\n                /**[9] */\n    return \u003cFormWithRef ref={formRef}/\u003e;\n}\n\n/**\n * Необходимо помнить, что ссылка предназначенная\n * для ассоциации с функциональным компонентом\n * также требует явного преобразование [5] к обобщенному\n * типу MutableRefObject\u003cT\u003e [6] которому в качестве аргумента\n * типа необходимо установить тип представляющий открытое api\n * компонента [7]. И после создания экземпляра компонента определенного\n * с помощью функции forwardRef [9] можно использовать его api через объект\n * рефы [8].\n */\n `````\n\nВ связи с тем, что функциональный компонент может определять только два параметра, пора перейти к рассмотрению следующего звена его сигнатуры — аннотации типа возвращаемого им значения. Для этого возвратимся к первоначальному, модифицированному с учетом пропсов, примеру функционального компонента у которого тип возвращаемого значения не указан явно, что в большинстве случаев является предпочтительней явного указания.\n\n`````ts\nimport React from \"react\";\n\nexport interface TimerProps {}\n\nexport default function Timer(props: TimerProps) /**[0] */ {\n    return \u003cdiv\u003eIs Timer!\u003c/div\u003e;\n}\n\n\n/**\n * [0] отсутствие явного указания типа\n * возвращаемого типа, которая для большинства\n * случаев является предпочтительным.\n */\n `````\n\nИ дело не в том, что бы как можно больше делегировать работы выводу типов экономя тем самым драгоценное время, а в том, что система типов _React_, устанавливаемая из репозиториев `@types`, не имеет достаточно высокого уровня типобезопасности. Поскольку это очень щекотливая тема её освещение стоит начать с самого начала, а именно с перечисления типов к которым может принадлежать возвращаемое значение.\n\nИ так, любое допустимое возвращаемое компонентом значение, в системе типов _React_, может быть представлено типом `ReactNode` являющимся объединением (`Union`) определяемого типами `ReactChild | ReactFragment | ReactPortal | boolean | null | undefined`. Тип `ReactChild` также представляет собой объединение типов `ReactElement\u003cProps, Type\u003e | ReactText`. Первый, как уже было рассмотрено ранее, представляет экземпляр любого компонента и элемента _React_, а второй объединение `string | number`. `ReactFragment` представляет объединение для ` {} | ReactNodeArray`. Не сложно догадаться, что `ReactNodeArray`, это абстракция над `Array\u003cReactNode\u003e`. Оставшийся тип `ReactPortal` является производным от типа `ReactElement`. Это может казаться очень запутанным и более того разбираться в этом прямо сейчас нет нужды, поскольку совсем скоро станет ясно, в чем кроется подвох, причиной которого являются два из перечисленных типа.\n\nПервый тип, вносящий смуту, это ранее рассмотренный `ReactElement\u003cP, T\u003e` и всё неожиданное поведение которое с ним связанно. Вторым типом вносящий неразбериху стал `ReactFragment`, поскольку определяющий его пустой объектный тип `{}` совместим с любым экземпляром объектного типа. По факту, при использовании в качестве типа возвращаемого значения `ReactFragment` или `ReactNode` ошибки не возникнет даже если оно будет экземпляром `Promise` или чего-то ещё. И хотя отсутствие ошибки на этапе компиляции не означает, что её получится избежать во время выполнения, сам сценарий с возвратом ошибочного значения может показаться чересчур надуманным. С какой-то долей вероятности можно с этим согласится, но поскольку идеология _TypeScript_ подразумевает выявление проблем в программах до их запуска, об этом стоило хотя бы упомянуть.\n\n`````ts\nimport React, { ReactFragment, ReactNode } from \"react\";\n\n\nfunction A(): ReactFragment {\n    return Promise.resolve(0); /**[0] */\n}\nfunction B(): ReactNode {\n    return Promise.resolve(0); /**[0] */\n}\n\n/**\n * [0] Ok на этапе компиляции и\n * Error во время выполнения.\n */\n\n\n/**[1] */\nclass T {\n    constructor(readonly p: number){}\n}\n\nfunction C(): ReactFragment {\n    return new T(0); /**[2] */\n}\nfunction D(): ReactNode {\n    return new T(0); /**[2] */\n}\n\n/**\n * [1] определение некоторого класса.\n * [2] Ok на этапе компиляции и\n * Error во время выполнения.\n */\n `````\n\nИз всего этого следует, что прибегать к аннотации типа возвращаемого значения стоит только в случаях когда оно принадлежит к `number`, `string`, `boolean`, `null` или массиву элементы которого принадлежат к оному из четырех перечисленных типов. Да и, то при острой необходимости. В остальных случаях целесообразней возложить эту работу на вывод типов, для которого это обычное дело.\n\nПоследнее, что осталось без внимания, это событийный механизм или если быть точнее определение слушателей событий. Для этого в системе типов _React_ определен специальный обобщенный тип `ReactEventHandler\u003cT\u003e` ожидающий в качестве аргумента типа тип представляющий нативный _dom элемент_, которому будет установлен текущий слушатель событий.\n\nПредставим сценарий в котором по нажатию на кнопку с типом `submit` необходимо вернуть первоначальные значения элементов формы. Для этого потребуется подписать элемент формы на событие `submit` и по его возникновению вызвать у нативного элемента формы, ссылка на которую доступна через свойство событийного объекта `target`, метод `reset`.\n\nПервым делом реализация подобного сценария потребует импорта обобщенного типа `ReactEventHandler\u003cT\u003e`, который в качестве аргумента типа получит тип нативного _dom элемента_ `HTMLFormElement`, после чего будет указан в аннотации слушателя событий `form_submitHandler`. Выбор типа нативного _dom элемента_, в данном случае `HTMLFormElement`, обуславливается типом элемента, которому устанавливается слушатель событий, в данном случае `\u003cform\u003e`. \n\nСтоит также обратить внимание, что единственный параметр слушателя событий в аннотации типа не нуждается, поскольку вывод типов опирается на обобщенный тип `ReactEvenHandler\u003cT\u003e`.\n\nПо возникновению события, первым делом необходимо предотвратить поведение по умолчанию, что бы избежать перезагрузки вкладки браузера. Поскольку ссылка на нативную форму доступна через определенное в объекте события свойство `target`, которое принадлежит к типу `EventTarget`, то перед присвоением её переменной `form` появляется необходимость в приведении к типу `HTMLFormElement` с помощью оператора `as`. После это можно вызывать нативный метод `reset`.\n\n`````ts\n                    /**[0] */\nimport React, {ReactEventHandler} from \"react\";\n\nfunction Form(){\n            /**[1]                 [2]              [3]           [4] */\n    const form_submitHandler: ReactEventHandler\u003cHTMLFormElement\u003e = event =\u003e {\n        event.preventDefault(); /**[5] */\n\n        /**  [6]        [7]              [8] */\n        let form = event.target as HTMLFormElement;\n        form.reset(); /**[9] */\n    };\n\n\n    return (\n                            /**[10] */\n        \u003cform onSubmit={form_submitHandler}\u003e\n            \u003cbutton type=\"submit\"\u003esubmit\u003c/button\u003e\n        \u003c/form\u003e\n    );\n}\n\n/**\n * [0] импорт обобщенного функционального типа\n * которому установив в качестве аргумента типа\n * тип нативного элемента HTMLFormElement [3]\n * использовали в аннотации типа [2] переменной\n * form_submitHandler [1], которой в качестве\n * значения присвоили функцию слушатель события\n * единственный параметр которой не нуждается в\n * явной аннотации типа [4], поскольку вывод типов\n * опирается на тип ReactEventHandler\u003cT\u003e.\n * \n * При возникновении события первым делом происходит\n * предотвращение поведения по умолчанию, что бы избежать\n * перезагрузки вкладки браузера [5]. Затем создается\n * переменная form [6] которой присваивается ссылка на\n * нативный dom элемент доступный через свойство определенное\n * в объекте события target [7] которое при помощи оператора \n * as приведено к нужному типу нативного dom элемента HTMLFormElement [8].\n * \n * На следующем шаге вызывается нативный метод сброса значений формы reset [9]\n * \n * [10] установка слушателя событий React элементу form.\n * \n */\n `````\n\nНесмотря на то, что такой способ типизирования слушателей событий является предпочтительным, также не будет лишним рассмотреть и другой имеющийся вариант состоящий в описании непосредственно сигнатуры функции.\n\nДля этого, в нашем конкретном случае, необходимо импортировать обобщенный тип `FormEvent\u003cT\u003e`, которому перед размещением в аннотации единственного параметра слушателя события необходимо в качестве аргумента события указать тип нативного _dom элемента_ `HTMLFormElement`. Также стоит напомнить, что в аннотации возвращаемого из слушателя события значения нет необходимости. Подобную рутинную работу необходимо делегировать выводу типов.\n\n`````ts\n                /**[0] */\nimport React, {FormEvent} from \"react\";\n\nfunction Form(){\n                              /**[1]      [2]           [3]          [4] */\n    const form_submitHandler = (event: FormEvent\u003cHTMLFormElement\u003e): void =\u003e {\n\n    }\n\n\n    return (\n        \u003cform onSubmit={form_submitHandler}\u003e\n            \u003cbutton type=\"submit\"\u003esubmit\u003c/button\u003e\n        \u003c/form\u003e\n    );\n}\n\n/**\n * [0] импорт обобщенного типа FormEvent\u003cT\u003e\n * которому перед добавлением в аннотацию типа [2]\n * единственного параметра слушателя события [1] \n * необходимо установить в качестве аргумента типа\n * тип нативного dom элемента HTMLFormElement [3].\n * Указании типа к которому принадлежит возвращаемое\n * из слушателя события значения было указанно лишь\n * для того, что бы напомнить об отсутствии в этом необходимости.\n * Подобную работу нужно делегировать выводу типов.\n */\n `````\n\nРабота непосредственно с формой обусловила выбор более конкретного типа события, каковым в данном примере стал обобщенный тип `FormEvent\u003cT\u003e`. При других условиях потребуются другие событийные типы. Кроме того, всегда можно сделать выбор в пользу базового для всех событийных типов `SyntheticEvent\u003cT\u003e` ожидающего в качестве аргумента типа тип нативного _dom элемента_.\n\nКроме этого, функциональным компонентам доступна мемоизация слушателей событий при помощи универсального хука `useCallback\u003cT\u003e()`. Для этого понадобится импортировать универсальную функцию определяющую два обязательных параметра. В качестве первого параметра ожидается функция чье описание устанавливается в качестве аргумента функционального типа. Второй параметр принадлежит к типу массива, изменение элементов которого приводит к переинициализации функции переданной в качестве первого параметра. Поскольку в качестве аргумента функционального тпа ожидается тип описывающий первый параметр хука, то нет необходимости в аннотациях типа её параметров. Или в данном случае её единственного параметра представляющего объект события. В остальном же реализация ничем не отличается от предыдущего примера, поэтому повторяющийся код будет исключён.\n\n`````ts\n                /**[0] */\nimport React, {useCallback, ReactEventHandler} from \"react\";\n\nfunction Form(){\n                                 /**[1]                    [2]                       [3]*/\n    const form_submitHandler = useCallback\u003cReactEventHandler\u003cHTMLFormElement\u003e\u003e(event =\u003e {\n\n    }, [] /**[4] */ );\n\n\n    return (\n        \u003cform onSubmit={form_submitHandler}\u003e\n            \u003cbutton type=\"submit\"\u003esubmit\u003c/button\u003e\n        \u003c/form\u003e\n    );\n}\n\n/**\n * [0] импорт универсальной функции useCallback\u003cT\u003e()\n * принимающей в качестве первого обязательного параметра\n * функцию [3], описание которой устанавливается в качестве\n * аргумента функционального типа [1]. D качестве второго\n * обязательного параметра ожидается массив [4] со значениями\n * изменение которых приводит переинициализации функции переданной\n * в качестве первого аргумента.\n */\n `````\n\nНа этом рассмотрение типизирования функционального компонента определенного как _Function Declaration_, завершено. И поскольку тема получилась довольно не маленькая исключим затягивание и перейдем к рассмотрению следующего вида функциональных компонентов."},{"key":"Функциональные компоненты_1","elementId":"Opredelenie_komponenta_kak_Function_Expression","markdown":"## Определение компонента как Function Expression\n\nПоскольку самое необходимое относящиеся ко всем видам _React_ компонентов было рассмотрено в предыдущей теме, в этой и последующих, повествование будет сосредоточено исключительно на различиях.\n\nДля определения функционального компонента как _Function Expression_ декларация типов _React_ предусматривает вспомогательный обобщенный тип `FC\u003cProps\u003e`, чей идентификатор (имя) является сокращением от _Function Component_, а аргумент типа представляет пропсы и является необязательным. Поскольку вывод типов ориентируется на тип пропсов указанный или присущий по умолчанию в качестве аргумента типа, то в аннотировании первого параметра функционального компонента нет надобности. Помимо этого, тип пропсов, по умолчанию описывает необязательное поле `children` принадлежащего к типу `ReactNode`.\n\n`````ts\n             /**[0] */\nimport React, {FC} from \"react\";\n\n          /**[1]       [2] */\nconst Timer: FC = ({children}) =\u003e \u003cdiv\u003eIs Timer!\u003c/div\u003e;\n\n/**\n * [0] импорт обобщенного типа FC\u003cP\u003e\n * который указан в аннотации без\n * установки аргумента типа [1] и\n * несмотря на это ошибки при деструктуризации\n * поля children не возникает даже без аннотации\n * типа первого параметра [2]\n */\n`````\n\nЕсли тип пропсов указан в качестве аргумента типа `FC\u003cP\u003e` и при этом не описывает поле `children`, то оно всё равно будет определенно в объекте пропсов доступного в качестве первого параметра функционального компонента.\n\n`````ts\nimport React, {FC} from \"react\";\n\nexport interface TimerProps {\n    duration: number;\n    /**[0] */\n}\n                 /**[1]                     [3]*/\nconst Timer: FC\u003cTimerProps\u003e = ({duration, children}) =\u003e \u003cdiv\u003eIs Timer!\u003c/div\u003e;\n\n\nexport default Timer;\n\n/**\n * [0] несмотря на то, что тип представляющий\n * пропсы и указанный в качестве аргумента\n * типа FC\u003cP\u003e [1] не описывает поле children\n * при их деструктуризации ошибки не возникает [3]\n */\n\n`````\n\nВ остальном все, что было рассмотрено в предыдущей теме относительно пропсов и `children` идентично и для данного способа типизирования функциональных компонентов.\n\nПри возникновении необходимости в определении второго параметра функционального компонента придется самостоятельно указывать аннотацию типа, поскольку по каким-то причинам обобщенный тип `FC\u003cP\u003e` этого не предусматривает.\n\n`````ts\nimport React, { FC } from \"react\";\n\nexport interface TimerProps {}\n\n\n                             /**[1]   [2] */\nconst Timer: FC\u003cTimerProps\u003e = (props, ref) =\u003e \u003cdiv\u003eIs Timer!\u003c/div\u003e;\n\n/**\n * Первый параметр [0] выводится как\n * PropsWithChildren\u003cTimerProps\u003e, а\n * второй [2] как any, поскольку обобщенный\n * тип FC\u003cP\u003e не предусматривает его наличие.\n */\n `````\n\nВ остальном все рассмотренное относительно рефов в теме посвященной функциональным компонентам определенным как _Function Declaration_, верно и для текущего вида определения.\n\nПри необходимости во втором параметре можно отказаться от типа `FC\u003cP\u003e` в пользу ранее рассмотренного типа `ForwardRefRenderFunction\u003cT, P\u003e`. При указании данного типа в аннотации функционального компонента, пропадает необходимость, как в явном аннотировании типов его параметров, так и в указании аргументов типа универсальной функции `forwardRef\u003cT, P\u003e()`.\n\n`````ts\nimport React, { FC, forwardRef, ForwardRefRenderFunction } from \"react\";\n\nexport interface TimerProps {}\n\n\n                    /**[1] */\nconst Timer: ForwardRefRenderFunction\u003cHTMLDivElement, TimerProps\u003e = (props, ref) =\u003e \u003cdiv\u003eIs Timer!\u003c/div\u003e;\n\n\n                        /**[2] */\nconst TimerWithRef = forwardRef(Timer);\n\nexport default TimerWithRef;\n\n/**\n * [0] импорт типа для указания его в аннотации\n * функционального компонента [1] определяющего второй\n * параметр ref. После этого нет необходимости в явной\n * аннотации типов как обоих параметров функционального\n * компонента, так и универсальной функции forwardRef\u003cT, P\u003e().\n */\n `````\n\nВажной особенностью использования обобщенного типа `FC\u003cP\u003e` заключается в том, что он, помимо типа представляющего пропсы, также содержит описание типа возвращаемого функцией значения. Вроде бы так и должно быть, но нюанс заключается в том, что возвращаемое значение обязательно должно принадлежать к типу совместимому с `ReactElement\u003cP, T\u003e`. Простыми словами на этапе компиляции возникнет ошибка если функциональный компонент, определенный как _Function Expression_, будет возвращать значение принадлежащие к типам `number`, `string`, `boolean` или абсолютно любому массиву.\n\n\n `````ts\n import React, {FC} from \"react\";\n\nconst A: FC = () =\u003e 0123; // Error\nconst B: FC = () =\u003e \"0123\"; // Error\nconst C: FC = () =\u003e true; // Error\nconst D: FC = () =\u003e []; // Error\n\nconst E: FC = () =\u003e \u003cdiv\u003e\u003c/div\u003e; // Ok\nconst F: FC = () =\u003e \u003cE/\u003e; // Ok\nconst G: FC = () =\u003e \u003c\u003e\u003c/\u003e; // Ok\n `````\n\nПоэтому в случае, предполагающем, что функциональный компонент, определенный как _Function Expression_, будет возвращать значение отличное от `ReactElement\u003cP, T\u003e`, потребуется самостоятельно описать его сигнатуру. Что не представляет никакого труда.\n\n `````ts\n import React,{MutableRefObject} from \"react\";\n\nexport interface TimerProps {}\n\nconst Timer = (props: TimerProps, ref: MutableRefObject\u003cHTMLDivElement\u003e) =\u003e 123;\n`````\n\nЕсли в подобном определении функциональных компонентов существует частая потребность, будет целесообразней определить собственный тип подробно описывающий сигнатуру функции.\n\nДля этого потребуется определить обобщенный тип с двумя необязательными параметрами. Первый необязательный параметр представляющий тип пропсов должен расширять и к тому же указывать в качестве типа по умолчанию тип `object`. Второй необязательный параметр типа должен проделать тот же процесс только для нативного типа `HTMLElement`.\n\nЧтобы не заморачиваться в определении `children`, указываем принадлежность первого параметра функции к уже знакомому обобщенному типу `PropsWithChildren\u003cP\u003e`, которому в качестве аргумента типа устанавливаем первый параметр типа `P`. Второму необязательному параметру функции указываем принадлежность к обобщенному типу `MutableRefObject\u003cE\u003e` в качестве аргумента типа которому устанавливаем второй параметр типа `E`. Осталось лишь указать принадлежность возвращаемого функцией значения к типу `ReactNode` и тип `CFC\u003cP, E\u003e`, что является сокращением от _Custom Functional Component_, готов сэкономить время и нервы разработчика.\n\n`````ts\n// file CFC.ts\n\nimport React,{MutableRefObject, ReactNode, PropsWithChildren} from \"react\";\n\n         /**[0][1]         [2]     [3][4]           [5]            [6]                       [7]                      [8]             [9]*/\nexport type CFC\u003cP extends object = object, E extends HTMLElement = HTMLElement\u003e = (props: PropsWithChildren\u003cP\u003e, ref?: MutableRefObject\u003cE\u003e) =\u003e ReactNode;\n\n/**\n * [0] определяем обобщенный тип CustomFunctionComponent\n * или сокращенно CFC первый необязательный параметр представляющего\n * пропсы которого [1] расширяет [2] и устанавливает по умолчанию [3]\n * тип object. Второй необязательный параметр представляющий тип нативного\n * dom элемента [4] расширяет [5] и устанавливает по умолчанию [6] тип HTMLElement.\n * \n * [7] устанавливаем принадлежность первого параметра функционального типа к\n * обобщенному типу PropsWithChildren\u003cP\u003e которому в качестве аргумента типа передаем первый\n * параметр типа. \n * \n * [8] определяем принадлежность второго необязательного параметра к обобщенному типу\n * MutableRefObject\u003cE\u003e которому в качестве аргумента типа устанавливаем второй параметр типа.\n * \n * [9] тип возвращаемого значения определяем как ReactNode.\n *  \n */\n\n\n// file Timer.tsx\nimport React from \"react\";\nimport {CFC} from \"./CFC\"; /**[0] */\n\n\nexport interface TimerProps {}\n\n          /**[1]    [2]           [3]            [4]   [5]     [6]*/\nconst Timer: CFC\u003cTimerProps, HTMLDivElement\u003e = (props, ref) =\u003e 123;\n\n/**\n * [0] импорт CustomFunctionComponent для\n * указания его в качестве типа функционального\n * компонента определенного как Function Expression [1].\n * В качестве первого параметра типа устанавливается тип\n * представляющий пропсы [2], а в качестве второго тип нативного\n * dom элемента с которым будет ассоциирован объект реф [3].\n * При таком подходе отпадает необходимость в явном указании аннотации\n * типов как пропсов [4], так и рефы [5]. Кроме того, возвращаемое значение\n * может принадлежать к любому типу совместимому с типом ReactNode [6]\n */\n `````\n\nНа этом тема относящаяся функциональных компонентов себя полностью исчерпала, поэтому без лишних слов двигаемся к следующей теме посвященной классовым компонентам."}],"githubFileInfo":{"lastUpdate":1617711223000,"contributorAll":[{"name":"nauchikus","avatar":"https://avatars.githubusercontent.com/u/31518738?v=4","bio":"@TechnoFanatic(\"🍬\")\r\n","githubUrl":"https://github.com/nauchikus"}]},"pageNav":{"isPrevPage":true,"isNextPage":true,"prevPage":{"title":"Типизированный React","path":"Tipizirovannyi_React"},"nextPage":{"title":"Классовые компоненты","path":"Klassovye_komponenty"}},"contentNavData":{"key":"Функциональные компоненты","level":0,"index":51,"contentIndex":0,"section":"React","title":"Функциональные компоненты","path":"Funkcionalnye_komponenty","elementId":"Funkcionalnye_komponenty","children":[{"key":"Функциональные компоненты_0","index":0,"contentIndex":1,"level":1,"section":"React","title":"Определение компонента как Function Declaration","path":"Opredelenie_komponenta_kak_Function_Declaration","elementId":"Opredelenie_komponenta_kak_Function_Declaration"},{"key":"Функциональные компоненты_1","index":1,"contentIndex":2,"level":1,"section":"React","title":"Определение компонента как Function Expression","path":"Opredelenie_komponenta_kak_Function_Expression","elementId":"Opredelenie_komponenta_kak_Function_Expression"}]},"pageDescription":"Функциональные компоненты"},"__N_SSG":true},"page":"/book/chapters/[chapterId]","query":{"chapterId":"Funkcionalnye_komponenty"},"buildId":"XWDQAoRNB_TZzeFVmm_Vh","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>